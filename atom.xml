<?xml version="1.0" encoding="utf-8"?><feed xmlns="http://www.w3.org/2005/Atom" ><generator uri="https://jekyllrb.com/" version="3.9.0">Jekyll</generator><link href="https://komasaru.github.io/atom.xml" rel="self" type="application/atom+xml" /><link href="https://komasaru.github.io/" rel="alternate" type="text/html" /><updated>2022-02-15T11:19:48+09:00</updated><id>https://komasaru.github.io/atom.xml</id><title type="html">mk-mode BLOG</title><subtitle>このブログは自宅サーバ(Debian GNU/Linux)で運用してしている&lt;a href=&quot;https://www.mk-mode.com/blog/&quot;&gt;ブログ&lt;/a&gt;のクローンです。&lt;br /&gt;PC・サーバ構築等の話題を中心に公開しております。</subtitle><author><name>mk-mode.com</name></author><entry><title type="html">Debian 11 (bullseye) - Let’s Encrypt で常時 SSL 化(on Nginx)！</title><link href="https://komasaru.github.io/2022/02/16/debian-11-nginx-ssl-by-lets-encrypt/" rel="alternate" type="text/html" title="Debian 11 (bullseye) - Let’s Encrypt で常時 SSL 化(on Nginx)！" /><published>2022-02-16T00:20:00+09:00</published><updated>2022-02-16T00:20:00+09:00</updated><id>https://komasaru.github.io/2022/02/16/debian-11-nginx-ssl-by-lets-encrypt</id><content type="html" xml:base="https://komasaru.github.io/2022/02/16/debian-11-nginx-ssl-by-lets-encrypt/">&lt;p&gt;Debian GNU/Linux 11 (bullseye) に構築した Web サーバ Nginx への接続を、 Let’s Encrypt で取得した SSL サーバ証明書で常時 SSL 化するための方法についての記録です。&lt;/p&gt;

&lt;p&gt;（当然ながら、興味がなければスルーしてください）&lt;/p&gt;

&lt;!--more--&gt;

&lt;h3 id=&quot;0-前提条件&quot;&gt;0. 前提条件&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;Debian GNU/Linux 11 (bullseye; 64bit) での作業を想定。&lt;/li&gt;
  &lt;li&gt;クライアント側も Debian GNU/Linux 11 (bullseye; 64bit) を想定。&lt;/li&gt;
  &lt;li&gt;Web(HTTP)サーバ Nginx が「&lt;a href=&quot;/2022/02/02/debian-11-nginx-installation-by-official-apt&quot; title=&quot;Debian 11 (bullseye) - Web サーバ Nginx 構築（Nginx 公式リポジトリ使用）！&quot;&gt;Debian 11 (bullseye) - Web サーバ Nginx 構築（Nginx 公式リポジトリ使用）！&lt;/a&gt;」の方法で導入済みであることを想定。&lt;/li&gt;
  &lt;li&gt;Nginx 1.21.3 での作業を想定。（稼働していること。稼働していない場合は方法が若干異なる）&lt;/li&gt;
  &lt;li&gt;ACME(Automatic Certificate Management Environment) クライアントに Certbot を使用することを想定。&lt;/li&gt;
  &lt;li&gt;バーチャルホストは使用しない。&lt;/li&gt;
  &lt;li&gt;root ユーザでの作業を想定。&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;1-acme-クライアント-certbot-のインストール&quot;&gt;1. ACME クライアント Certbot のインストール&lt;/h3&gt;

&lt;div class=&quot;language-text highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# apt -y install certbot

# certbot --version
certbot 1.12.0
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;ul&gt;
  &lt;li&gt;当記事執筆時点、 1.12.0 がインストールされた。&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;2-ポートの開放&quot;&gt;2. ポートの開放&lt;/h3&gt;

&lt;p&gt;ドメイン所有者の認証のために TCP ポートの 80 番と 443 番に接続されるので、開放されてなければ開放しておく。&lt;/p&gt;

&lt;p&gt;ufw コマンドによるポート開放については、過去記事「&lt;a href=&quot;/2021/10/20/debian-11-firewall-setting&quot; title=&quot;Debian 11 (bullseye) - ファイアウォール設定！&quot;&gt;Debian 11 (bullseye) - ファイアウォール設定！&lt;/a&gt;」を参照。&lt;/p&gt;

&lt;h3 id=&quot;3-certbot-クライアントの起動&quot;&gt;3. Certbot クライアントの起動&lt;/h3&gt;

&lt;p&gt;証明書発行のために Certbot クライアントを起動する。ドキュメントルートにするディレクトリが存在しなければ、作成しておく。&lt;/p&gt;

&lt;div class=&quot;language-text highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# mkdir -p /var/www/html
# certbot certonly --webroot -w /var/www/html -d example.jp -d www.example.jp
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;example.jp&lt;/code&gt;, &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;www.example.jp&lt;/code&gt; は自分のものに置き換えること。&lt;/li&gt;
  &lt;li&gt;起動後の設定は次項。&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;4-メールアドレス等の設定&quot;&gt;4. メールアドレス等の設定&lt;/h3&gt;

&lt;p&gt;メールアドレスの登録と利用条件への同意を行う。（初回のみ）&lt;/p&gt;

&lt;div class=&quot;language-text highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;Saving debug log to /var/log/letsencrypt/letsencrypt.log
Plugins selected: Authenticator webroot, Installer None
Enter email address (used for urgent renewal and security notices)
 (Enter &apos;c&apos; to cancel): webmaster@example.jp

- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
Please read the Terms of Service at
https://letsencrypt.org/documents/LE-SA-v1.2-November-15-2017.pdf. You must
agree in order to register with the ACME server. Do you agree?
- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
(Y)es/(N)o: Y

- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
Would you be willing, once your first certificate is successfully issued, to
share your email address with the Electronic Frontier Foundation, a founding
partner of the Let&apos;s Encrypt project and the non-profit organization that
develops Certbot? We&apos;d like to send you email about our work encrypting the web,
EFF news, campaigns, and ways to support digital freedom.
- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
(Y)es/(N)o: Y
Account registered.
Requesting a certificate for example.jp and www.example.jp
Performing the following challenges:
http-01 challenge for example.jp
http-01 challenge for www.example.jp
Using the webroot path /var/www/html for all unmatched domains.
Waiting for verification...
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;ul&gt;
  &lt;li&gt;ルータでポート開放してからでないと失敗する。&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;5-ssltls-サーバ証明書の取得完了&quot;&gt;5. SSL/TLS サーバ証明書の取得完了&lt;/h3&gt;

&lt;p&gt;しばらく待つと、SSL/TLS サーバ証明書の取得プロセスが完了する。&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;サーバ証明書の実体（ファイル）は、 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;/etc/letsencrypt/archive/ドメイン名&lt;/code&gt; ディレクトリ配下に保存される。
    &lt;ul&gt;
      &lt;li&gt;サーバ証明書（公開鍵） … &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;certN.pem&lt;/code&gt;&lt;/li&gt;
      &lt;li&gt;中間証明書 … &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;chainN.pem&lt;/code&gt;&lt;/li&gt;
      &lt;li&gt;サーバ証明書と中間証明書の結合ファイル … &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;fullchainN.pem&lt;/code&gt;&lt;/li&gt;
      &lt;li&gt;秘密鍵 … &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;privkeyN.pem&lt;/code&gt;&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;シンボリックリンクは、 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;/etc/letsencrypt/live/ドメイン名&lt;/code&gt; ディレクトリ配下に保存される。
    &lt;ul&gt;
      &lt;li&gt;サーバ証明書（公開鍵） … &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;cert.pem&lt;/code&gt;&lt;/li&gt;
      &lt;li&gt;中間証明書 … &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;chain.pem&lt;/code&gt;&lt;/li&gt;
      &lt;li&gt;サーバ証明書と中間証明書の結合ファイル … &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;fullchain.pem&lt;/code&gt;&lt;/li&gt;
      &lt;li&gt;秘密鍵 … &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;privkey.pem&lt;/code&gt;&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;SSL/TLS サーバ証明書の取得に失敗した場合は、ポート開放等の設定を再確認する。&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;6-nginx-設定ファイルの編集&quot;&gt;6. Nginx 設定ファイルの編集&lt;/h3&gt;

&lt;p&gt;環境により設定ファイルの配置ディレクトリやファイル名、記述方法等が異なるかもしれない。適宜置き換えること。&lt;/p&gt;

&lt;p&gt;File: &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;/etc/nginx/conf.d/default.conf&lt;/code&gt;&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-bash&quot; data-lang=&quot;bash&quot;&gt;server &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
    listen 80&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;c&quot;&gt;#       :&lt;/span&gt;
    &lt;span class=&quot;c&quot;&gt;# ===&amp;lt; 中略 &amp;gt;===&lt;/span&gt;
    &lt;span class=&quot;c&quot;&gt;#       :&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;return &lt;/span&gt;301 https://&lt;span class=&quot;nv&quot;&gt;$host$request_uri&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;  &lt;span class=&quot;c&quot;&gt;# &amp;lt;= 追加&lt;/span&gt;
    &lt;span class=&quot;c&quot;&gt;#       :&lt;/span&gt;
    &lt;span class=&quot;c&quot;&gt;# ===&amp;lt; 中略 &amp;gt;===&lt;/span&gt;
    &lt;span class=&quot;c&quot;&gt;#       :&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;p&gt;File: &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;/etc/nginx/conf.d/ssl.conf&lt;/code&gt;&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-bash&quot; data-lang=&quot;bash&quot;&gt;server &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
    listen 443 ssl&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;c&quot;&gt;#       :&lt;/span&gt;
    &lt;span class=&quot;c&quot;&gt;# ===&amp;lt; 中略 &amp;gt;===&lt;/span&gt;
    &lt;span class=&quot;c&quot;&gt;#       :&lt;/span&gt;
    ssl on&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;                                                               &lt;span class=&quot;c&quot;&gt;# &amp;lt;= 追加&lt;/span&gt;
    ssl_protocols       TLSv1 TLSv1.1 TLSv1.2&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;                            &lt;span class=&quot;c&quot;&gt;# &amp;lt;= 追加&lt;/span&gt;
    ssl_certificate     /etc/letsencrypt/live/example.com/fullchain.pem&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;  &lt;span class=&quot;c&quot;&gt;# &amp;lt;= 追加&lt;/span&gt;
    ssl_certificate_key /etc/letsencrypt/live/example.com/privkey.pem&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;    &lt;span class=&quot;c&quot;&gt;# &amp;lt;= 追加&lt;/span&gt;
    &lt;span class=&quot;c&quot;&gt;#       :&lt;/span&gt;
    &lt;span class=&quot;c&quot;&gt;# ===&amp;lt; 中略 &amp;gt;===&lt;/span&gt;
    &lt;span class=&quot;c&quot;&gt;#       :&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;h3 id=&quot;7-nginx-設定ファイルの文法チェック&quot;&gt;7. Nginx 設定ファイルの文法チェック&lt;/h3&gt;

&lt;div class=&quot;language-text highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# nginx -t
nginx: the configuration file /etc/nginx/nginx.conf syntax is ok
nginx: configuration file /etc/nginx/nginx.conf test is successful
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;問題があれば、設定ファイルの内容を見直す。&lt;/p&gt;

&lt;h3 id=&quot;8-web-サーバ-の再起動&quot;&gt;8. Web サーバ の再起動&lt;/h3&gt;

&lt;div class=&quot;language-text highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# systemctl restart nginx
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;9-証明書の更新&quot;&gt;9. 証明書の更新&lt;/h3&gt;

&lt;p&gt;Certbot にはタイマーが搭載されているので、自動で定期的に証明書が更新される。&lt;/p&gt;

&lt;p&gt;Certbot タイマーの詳細を確認するなら、以下を実行。&lt;/p&gt;

&lt;div class=&quot;language-text highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# systemctl status certbot.timer

# systemctl list-timers certbot.timer --no-pager

# systemctl cat certbot.timer

# systemctl cat certbot.service
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;タイマーによる更新でなく、手動で更新したい場合は以下を実行。&lt;/p&gt;

&lt;div class=&quot;language-text highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# certbot renew
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;10-参考サイト&quot;&gt;10. 参考サイト&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;https://certbot.eff.org/docs/using.html#certbot-command-line-options&quot; title=&quot;Certbot command-line options&quot;&gt;Certbot command-line options&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;hr /&gt;

&lt;p&gt;以上。&lt;/p&gt;</content><author><name>mk-mode.com</name></author><category term="サーバ構築" /><category term="Debian" /><category term="Linux" /><category term="Nginx" /><category term="SSL" /><summary type="html">Debian GNU/Linux 11 (bullseye) に構築した Web サーバ Nginx への接続を、 Let’s Encrypt で取得した SSL サーバ証明書で常時 SSL 化するための方法についての記録です。 （当然ながら、興味がなければスルーしてください）</summary></entry><entry><title type="html">Debian 11 (bullseye) - Web サーバ Nginx で SSL 接続！</title><link href="https://komasaru.github.io/2022/02/09/debian-11-nginx-ssl-connection-setting/" rel="alternate" type="text/html" title="Debian 11 (bullseye) - Web サーバ Nginx で SSL 接続！" /><published>2022-02-09T00:20:00+09:00</published><updated>2022-02-09T00:20:00+09:00</updated><id>https://komasaru.github.io/2022/02/09/debian-11-nginx-ssl-connection-setting</id><content type="html" xml:base="https://komasaru.github.io/2022/02/09/debian-11-nginx-ssl-connection-setting/">&lt;p&gt;Debian GNU/Linux 11 (bullseye) に構築した Web サーバ Nginx で SSL 接続するための設定についての記録です。&lt;/p&gt;

&lt;p&gt;以前古いバージョンでの作業時に残していた記録を参考に作業を行い、今回更新した作業記録を貼付する形式の内容となっています。&lt;br /&gt;
（当然ながら、興味がなければスルーしてください）&lt;/p&gt;

&lt;!--more--&gt;

&lt;h3 id=&quot;0-前提条件&quot;&gt;0. 前提条件&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;Debian GNU/Linux 11.0.0 (bullseye; 64bit) での作業を想定。&lt;/li&gt;
  &lt;li&gt;クライアント側も Debian GNU/Linux 11 (bullseye; 64bit) を想定。&lt;/li&gt;
  &lt;li&gt;サーバ用途なので、作業は基本的に全て一般ユーザから root になって行う。&lt;/li&gt;
  &lt;li&gt;Web(HTTP)サーバ Nginx が「&lt;a href=&quot;/2022/02/02/debian-11-nginx-installation-by-official-apt&quot; title=&quot;Debian 11 (bullseye) - Web サーバ Nginx 構築（Nginx 公式リポジトリ使用）！&quot;&gt;Debian 11 (bullseye) - Web サーバ Nginx 構築（Nginx 公式リポジトリ使用）！&lt;/a&gt;」の方法で導入済みであることを想定。&lt;/li&gt;
  &lt;li&gt;今回は SSL サーバ証明書は自分で作成するが、後日、Let’s Encrypt で無料で証明書を取得するようにする。&lt;/li&gt;
  &lt;li&gt;当方はメールサーバ構築時に SSL 証明書作成済みであったので、以下の “2” から作業を行なった。&lt;/li&gt;
  &lt;li&gt;root ユーザでの作業を想定。&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;1-ssl-証明書の作成&quot;&gt;1. SSL 証明書の作成&lt;/h3&gt;

&lt;p&gt;openssl 未インストールならインストール。&lt;/p&gt;

&lt;div class=&quot;language-text highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# apt -y install openssl
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;秘密鍵生成。&lt;/p&gt;

&lt;div class=&quot;language-text highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# cd /etc/ssl/private
# openssl genrsa -des3 -out server.key 2048
Generating RSA private key, 2048 bit long modulus
...................+++
.....+++
e is 65537 (0x10001)
Enter pass phrase for server.key:              # &amp;lt;= パスフレーズ設定
Verifying - Enter pass phrase for server.key:  # &amp;lt;= 確認再入力
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;秘密鍵からパスフレーズを削除。&lt;/p&gt;

&lt;div class=&quot;language-text highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# openssl rsa -in server.key -out server.key
Enter pass phrase for server.key:              # &amp;lt;= パスフレーズ
writing RSA key

# openssl req -new -days 3650 -key server.key -out server.csr
You are about to be asked to enter information that will be incorporated
into your certificate request.
What you are about to enter is what is called a Distinguished Name or a DN.
There are quite a few fields but you can leave some blank
For some fields there will be a default value,
If you enter &apos;.&apos;, the field will be left blank.
-----
Country Name (2 letter code) [AU]:JP                                    # &amp;lt;= 国の略名
State or Province Name (full name) [Some-State]:Shimane                 # &amp;lt;= 都道府県名
Locality Name (eg, city) []:Matsue                                      # &amp;lt;= 市区町村名
Organization Name (eg, company) [Internet Widgits Pty Ltd]:mk-mode.com  # &amp;lt;= サイト名（何でもよい）
Organizational Unit Name (eg, section) []:                              # &amp;lt;= 部署名（空でよい）
Common Name (e.g. server FQDN or YOUR name) []:www.mk-mode.com          # &amp;lt;= ホスト名
Email Address []: webmaster@mk-mode.com                                 # &amp;lt;= 管理者メールアドレス
Please enter the following &apos;extra&apos; attributes
to be sent with your certificate request
A challenge password []:                                                # &amp;lt;= 追加属性・空エンターでよい
An optional company name []:                                            # &amp;lt;= 追加属性・空エンターでよい

# openssl x509 -in server.csr -out server.crt -req -signkey server.key -days 3650
Signature ok
subject=C = JP, ST = Shimane, L = Matsue, O = mk-mode.com, CN = www.mk-mode.com, emailAddress = webmaster@mk-mode.com
Getting Private key
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;権限設定。&lt;/p&gt;

&lt;div class=&quot;language-text highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# chmod 400 server.*
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;2-nginx-設定ファイルの編集&quot;&gt;2. Nginx 設定ファイルの編集&lt;/h3&gt;

&lt;p&gt;以下のように、Nginx 設定ファイルを作成する。&lt;br /&gt;
（Nginx のインストール方法やバージョンによっては設定ファイルの構成が異なるので注意。以下は「&lt;a href=&quot;/2022/02/02/debian-11-nginx-installation-by-official-apt&quot; title=&quot;Debian 11 (bullseye) - Web サーバ Nginx 構築（Nginx 公式リポジトリ使用）！&quot;&gt;Debian 11 (bullseye) - Web サーバ Nginx 構築（Nginx 公式リポジトリ使用）！&lt;/a&gt;」の方法でインストールした場合）&lt;/p&gt;

&lt;p&gt;File: &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;/etc/nginx/conf.d/ssl.conf&lt;/code&gt;&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-bash&quot; data-lang=&quot;bash&quot;&gt;&lt;table class=&quot;rouge-table&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;c&quot;&gt;# HTTPS server&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;#&lt;/span&gt;
server &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
    listen       443 ssl&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    server_name  localhost&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;

    &lt;span class=&quot;c&quot;&gt;#ssl_certificate      cert.pem;&lt;/span&gt;
    ssl_certificate      /etc/ssl/private/server.crt&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;c&quot;&gt;#ssl_certificate_key  cert.key;&lt;/span&gt;
    ssl_certificate_key  /etc/ssl/private/server.key&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;

    ssl_session_cache    shared:SSL:1m&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    ssl_session_timeout  5m&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;

    ssl_ciphers  HIGH:!aNULL:!MD5&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    ssl_prefer_server_ciphers  on&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;

    location / &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
        root   html&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
        index  index.html index.htm&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;ul&gt;
  &lt;li&gt;設定ファイルの文法をチェックするには &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;nginx -t&lt;/code&gt; を実行する&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;3-nginx-の再起動&quot;&gt;3. Nginx の再起動&lt;/h3&gt;

&lt;div class=&quot;language-text highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# systemctl restart nginx
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;4-ファイアウォールufwの設定&quot;&gt;4. ファイアウォール(ufw)の設定&lt;/h3&gt;

&lt;p&gt;ポート TCP:443 を開放する。&lt;/p&gt;

&lt;div class=&quot;language-text highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# ufw allow 443/tcp
Rule added

# ufw status
    :
443/tcp                    ALLOW       Anywhere
    :
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;5-動作確認&quot;&gt;5. 動作確認&lt;/h3&gt;

&lt;p&gt;ブラウザから &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;https://＜サーバ名 or IPアドレス＞/&lt;/code&gt; にアクセスし、セキュリティに関するページが表示されたら適宜インストールする。&lt;br /&gt;
ブラウザにより異なるが、 Firefox なら「危険を理解した上で接続するには」をクリック後「例外追加」ボタンをクリックする。そして開いたウィンドウ内で「セキュリティ例外を追加」ボタンをクリックする。&lt;br /&gt;
認証に成功すると以下のように表示される。&lt;/p&gt;

&lt;h3 id=&quot;6-参考サイト&quot;&gt;6. 参考サイト&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;https://nginx.org/en/docs/http/configuring_https_servers.html&quot; title=&quot;HTTPS サーバの設定&quot;&gt;HTTPS サーバの設定&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;hr /&gt;

&lt;p&gt;以上。&lt;/p&gt;</content><author><name>mk-mode.com</name></author><category term="サーバ構築" /><category term="Debian" /><category term="Linux" /><category term="Nginx" /><category term="SSL" /><summary type="html">Debian GNU/Linux 11 (bullseye) に構築した Web サーバ Nginx で SSL 接続するための設定についての記録です。 以前古いバージョンでの作業時に残していた記録を参考に作業を行い、今回更新した作業記録を貼付する形式の内容となっています。 （当然ながら、興味がなければスルーしてください）</summary></entry><entry><title type="html">Debian 11 (bullseye) - Web サーバ Nginx 構築（Nginx 公式リポジトリ使用）！</title><link href="https://komasaru.github.io/2022/02/02/debian-11-nginx-installation-by-official-apt/" rel="alternate" type="text/html" title="Debian 11 (bullseye) - Web サーバ Nginx 構築（Nginx 公式リポジトリ使用）！" /><published>2022-02-02T00:20:00+09:00</published><updated>2022-02-02T00:20:00+09:00</updated><id>https://komasaru.github.io/2022/02/02/debian-11-nginx-installation-by-official-apt</id><content type="html" xml:base="https://komasaru.github.io/2022/02/02/debian-11-nginx-installation-by-official-apt/">&lt;p&gt;Debian GNU/Linux 11 (bullseye) に Web サーバ Nginx を Nginx 公式リポジトリを使用して導入する方法についての記録です。&lt;/p&gt;

&lt;p&gt;以前古いバージョンでの作業時に残していた記録を参考に作業を行い、今回更新した作業記録を貼付する形式の内容となっています。&lt;br /&gt;
（当然ながら、興味がなければスルーしてください）&lt;/p&gt;

&lt;!--more--&gt;

&lt;h3 id=&quot;0-前提条件&quot;&gt;0 前提条件&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;Debian GNU/Linux 11.0.0 (bullseye; 64bit) での作業を想定。&lt;/li&gt;
  &lt;li&gt;接続元のマシンも Debian GNU/Linux 11 (bullseye; 64bit) を想定。&lt;/li&gt;
  &lt;li&gt;Debian 公式リポジトリの Nginx はバージョンが古いため、Nginx リポジトリを使用して 1.21.3（当記事執筆時点最新安定版）をインストールする。&lt;/li&gt;
  &lt;li&gt;実際に運用する際は、ドキュメントルートを変更する等、設定を編集すること。&lt;/li&gt;
  &lt;li&gt;root ユーザでの作業を想定。&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;1-依存パッケージのインストール&quot;&gt;1. 依存パッケージのインストール&lt;/h3&gt;

&lt;div class=&quot;language-text highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# apt -y install curl gnupg2 ca-certificates lsb-release debian-archive-keyring
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;2-署名鍵のインポート&quot;&gt;2. 署名鍵のインポート&lt;/h3&gt;

&lt;div class=&quot;language-text highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# curl https://nginx.org/keys/nginx_signing.key | gpg --dearmor \
  | tee /usr/share/keyrings/nginx-archive-keyring.gpg &amp;gt;/dev/null

# gpg --dry-run --quiet --import --import-options import-show \
  /usr/share/keyrings/nginx-archive-keyring.gpg
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;ul&gt;
  &lt;li&gt;フィンガープリントが &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;573BFD6B3D8FBC641079A6ABABF5BD827BD9BF62&lt;/code&gt; であることを確認。&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;3-リポジトリの追加設定&quot;&gt;3. リポジトリの追加設定&lt;/h3&gt;

&lt;p&gt;リポジトリの追加、 APT のデフォルト優先度の設定を行う。&lt;/p&gt;

&lt;div class=&quot;language-text highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# echo &quot;deb [signed-by=/usr/share/keyrings/nginx-archive-keyring.gpg] \
  http://nginx.org/packages/mainline/debian `lsb_release -cs` nginx&quot; \
  | tee /etc/apt/sources.list.d/nginx.list

# echo -e &quot;Package: *\nPin: origin nginx.org\nPin: release o=nginx\nPin-Priority: 900\n&quot; \
  | tee /etc/apt/preferences.d/99nginx
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;4-nginx-のインストール&quot;&gt;4. Nginx のインストール&lt;/h3&gt;

&lt;p&gt;Apt パッケージリストを更新後、 Nginx をインストールする。&lt;/p&gt;

&lt;div class=&quot;language-text highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# apt -y update
# apt -y install nginx
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;5-インストールの確認&quot;&gt;5. インストールの確認&lt;/h3&gt;

&lt;p&gt;Nginx がインストールできたか確認してみる。(&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;-v&lt;/code&gt; の代わりに &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;-V&lt;/code&gt; オプションを使用すると詳細に表示される）&lt;/p&gt;

&lt;div class=&quot;language-text highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# nginx -v
nginx version: nginx/1.21.3
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;6-設定&quot;&gt;6. 設定&lt;/h3&gt;

&lt;p&gt;今回のインストール環境の場合、基本的（グローバル）な設定のファイルは &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;/etc/nginx/nginx.conf&lt;/code&gt; で、このファイルから &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;/etc/nginx/conf.d&lt;/code&gt; ディレクトリ配下の設定ファイルを読み込む形式となっている。&lt;br /&gt;
取り急ぎ、デフォルトのままとした。（当方、最終的には詳細に設定している）&lt;br /&gt;
詳細な設定は、「&lt;a href=&quot;https://www.mk-mode.com/blog/tags/nginx/&quot; title=&quot;Tag: Nginx - mk-mode BLOG&quot;&gt;当ブログ Nginx 関連の過去記事&lt;/a&gt;」を参照。&lt;/p&gt;

&lt;h3 id=&quot;7-ファイアウォールufwの設定&quot;&gt;7. ファイアウォール(ufw)の設定&lt;/h3&gt;

&lt;p&gt;TCP ポート 80 を開放する必要がある。（HTTPS の場合は TCP: 443）&lt;/p&gt;

&lt;div class=&quot;language-text highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# ufw allow 80/tcp
Rule added

# ufw status
    :
80/tcp                     ALLOW       Anywhere
    :
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;8-サーバの起動&quot;&gt;8. サーバの起動&lt;/h3&gt;

&lt;div class=&quot;language-text highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# systemctl start nginx
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;9-起動確認&quot;&gt;9. 起動確認&lt;/h3&gt;

&lt;p&gt;ブラウザで &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;http://＜サーバアドレス or ホスト名＞/&lt;/code&gt; にアクセスしてみる。&lt;br /&gt;
&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Welcome to nginx!&lt;/code&gt; と以下5行くらい表示されば成功。&lt;/p&gt;

&lt;h3 id=&quot;10-自動起動の設定&quot;&gt;10. 自動起動の設定&lt;/h3&gt;

&lt;p&gt;マシン起動時に自動で Nginx を起動させるには以下のようにする。（インストール直後は自動起動するようになっているはずなので、そうなっていない場合）&lt;/p&gt;

&lt;div class=&quot;language-text highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# systemctl enable nginx
nginx.service is not a native service, redirecting to systemd-sysv-install.
Executing: /lib/systemd/systemd-sysv-install enable nginx

# systemctl is-enabled nginx
enabled
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;（&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;nginx&lt;/code&gt; はネイティブなサービスでないため、 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;systemd-sysv-install&lt;/code&gt; にリダイレクトされる）&lt;/p&gt;

&lt;p&gt;自動起動しないようにするには、&lt;/p&gt;

&lt;div class=&quot;language-text highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# systemctl disable nginx
nginx.service is not a native service, redirecting to systemd-sysv-install.
Executing: /lib/systemd/systemd-sysv-install disable nginx
insserv: warning: current start runlevel(s) (empty) of script `nginx&apos; overrides LSB defaults (2 3 4 5).
insserv: warning: current stop runlevel(s) (0 1 2 3 4 5 6) of script `nginx&apos; overrides LSB defaults (0 1 6).

# systemctl is-enabled nginx
nginx.service is not a native service, redirecting to systemd-sysv-install.
Executing: /lib/systemd/systemd-sysv-install is-enabled nginx
disabled
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;11-参考サイト&quot;&gt;11. 参考サイト&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;https://nginx.org/en/linux_packages.html#Debian&quot; title=&quot;nginx: Linux packages&quot;&gt;nginx: Linux packages&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;hr /&gt;

&lt;p&gt;以上。&lt;/p&gt;</content><author><name>mk-mode.com</name></author><category term="サーバ構築" /><category term="Debian" /><category term="Linux" /><category term="Nginx" /><summary type="html">Debian GNU/Linux 11 (bullseye) に Web サーバ Nginx を Nginx 公式リポジトリを使用して導入する方法についての記録です。 以前古いバージョンでの作業時に残していた記録を参考に作業を行い、今回更新した作業記録を貼付する形式の内容となっています。 （当然ながら、興味がなければスルーしてください）</summary></entry><entry><title type="html">2022年1月 - OS・ブラウザ別アクセス状況！</title><link href="https://komasaru.github.io/2022/02/01/blog-access/" rel="alternate" type="text/html" title="2022年1月 - OS・ブラウザ別アクセス状況！" /><published>2022-02-01T00:20:00+09:00</published><updated>2022-02-01T00:20:00+09:00</updated><id>https://komasaru.github.io/2022/02/01/blog-access</id><content type="html" xml:base="https://komasaru.github.io/2022/02/01/blog-access/">&lt;p&gt;2月になりましたので、先月1月分の当ブログアクセス状況を公開します。（※自分用の記録）&lt;/p&gt;

&lt;!--more--&gt;

&lt;h3 id=&quot;1-アクセスをos別に集計&quot;&gt;1. アクセスをOS別に集計&lt;/h3&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th style=&quot;text-align: left&quot;&gt;OS&lt;/th&gt;
      &lt;th style=&quot;text-align: right&quot;&gt;PageViews&lt;/th&gt;
      &lt;th style=&quot;text-align: right&quot;&gt;比率(%)&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;Windows&lt;/td&gt;
      &lt;td style=&quot;text-align: right&quot;&gt;21,787&lt;/td&gt;
      &lt;td style=&quot;text-align: right&quot;&gt;66.5211&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;Mac OS&lt;/td&gt;
      &lt;td style=&quot;text-align: right&quot;&gt;7,677&lt;/td&gt;
      &lt;td style=&quot;text-align: right&quot;&gt;23.4398&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;Linux&lt;/td&gt;
      &lt;td style=&quot;text-align: right&quot;&gt;1,424&lt;/td&gt;
      &lt;td style=&quot;text-align: right&quot;&gt;4.3478&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;Android&lt;/td&gt;
      &lt;td style=&quot;text-align: right&quot;&gt;1,197&lt;/td&gt;
      &lt;td style=&quot;text-align: right&quot;&gt;3.6547&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;Ubuntu Linux&lt;/td&gt;
      &lt;td style=&quot;text-align: right&quot;&gt;393&lt;/td&gt;
      &lt;td style=&quot;text-align: right&quot;&gt;1.1999&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;unknown&lt;/td&gt;
      &lt;td style=&quot;text-align: right&quot;&gt;215&lt;/td&gt;
      &lt;td style=&quot;text-align: right&quot;&gt;0.6564&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;Fedora Linux&lt;/td&gt;
      &lt;td style=&quot;text-align: right&quot;&gt;41&lt;/td&gt;
      &lt;td style=&quot;text-align: right&quot;&gt;0.1252&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;FreeBSD&lt;/td&gt;
      &lt;td style=&quot;text-align: right&quot;&gt;16&lt;/td&gt;
      &lt;td style=&quot;text-align: right&quot;&gt;0.0489&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;NetBSD&lt;/td&gt;
      &lt;td style=&quot;text-align: right&quot;&gt;2&lt;/td&gt;
      &lt;td style=&quot;text-align: right&quot;&gt;0.0061&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
  &lt;tfoot&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;合　計&lt;/td&gt;
      &lt;td style=&quot;text-align: right&quot;&gt;32,752&lt;/td&gt;
      &lt;td style=&quot;text-align: right&quot;&gt;100.0000&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tfoot&gt;
&lt;/table&gt;

&lt;h3 id=&quot;2-アクセスをosバージョン別に集計&quot;&gt;2. アクセスをOS・バージョン別に集計&lt;/h3&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th style=&quot;text-align: left&quot;&gt;OS&lt;/th&gt;
      &lt;th style=&quot;text-align: left&quot;&gt;Version&lt;/th&gt;
      &lt;th style=&quot;text-align: right&quot;&gt;PageViews&lt;/th&gt;
      &lt;th style=&quot;text-align: right&quot;&gt;比率(%)&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;Windows&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;10&lt;/td&gt;
      &lt;td style=&quot;text-align: right&quot;&gt;16,759&lt;/td&gt;
      &lt;td style=&quot;text-align: right&quot;&gt;51.1694&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;Mac OS&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;X&lt;/td&gt;
      &lt;td style=&quot;text-align: right&quot;&gt;7,677&lt;/td&gt;
      &lt;td style=&quot;text-align: right&quot;&gt;23.4398&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;Windows&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;7&lt;/td&gt;
      &lt;td style=&quot;text-align: right&quot;&gt;4,707&lt;/td&gt;
      &lt;td style=&quot;text-align: right&quot;&gt;14.3716&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;Linux&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;unknown&lt;/td&gt;
      &lt;td style=&quot;text-align: right&quot;&gt;1,424&lt;/td&gt;
      &lt;td style=&quot;text-align: right&quot;&gt;4.3478&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;Android&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;unknown&lt;/td&gt;
      &lt;td style=&quot;text-align: right&quot;&gt;1,197&lt;/td&gt;
      &lt;td style=&quot;text-align: right&quot;&gt;3.6547&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;Ubuntu Linux&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;unknown&lt;/td&gt;
      &lt;td style=&quot;text-align: right&quot;&gt;393&lt;/td&gt;
      &lt;td style=&quot;text-align: right&quot;&gt;1.1999&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;Windows&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;8.1&lt;/td&gt;
      &lt;td style=&quot;text-align: right&quot;&gt;279&lt;/td&gt;
      &lt;td style=&quot;text-align: right&quot;&gt;0.8519&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;unknown&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;unknown&lt;/td&gt;
      &lt;td style=&quot;text-align: right&quot;&gt;215&lt;/td&gt;
      &lt;td style=&quot;text-align: right&quot;&gt;0.6564&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;Fedora Linux&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;unknown&lt;/td&gt;
      &lt;td style=&quot;text-align: right&quot;&gt;41&lt;/td&gt;
      &lt;td style=&quot;text-align: right&quot;&gt;0.1252&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;Windows&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;XP&lt;/td&gt;
      &lt;td style=&quot;text-align: right&quot;&gt;19&lt;/td&gt;
      &lt;td style=&quot;text-align: right&quot;&gt;0.0580&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;Windows&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;8&lt;/td&gt;
      &lt;td style=&quot;text-align: right&quot;&gt;18&lt;/td&gt;
      &lt;td style=&quot;text-align: right&quot;&gt;0.0550&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;FreeBSD&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;unknown&lt;/td&gt;
      &lt;td style=&quot;text-align: right&quot;&gt;16&lt;/td&gt;
      &lt;td style=&quot;text-align: right&quot;&gt;0.0489&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;Windows&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;98&lt;/td&gt;
      &lt;td style=&quot;text-align: right&quot;&gt;3&lt;/td&gt;
      &lt;td style=&quot;text-align: right&quot;&gt;0.0092&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;Windows&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;Vista&lt;/td&gt;
      &lt;td style=&quot;text-align: right&quot;&gt;2&lt;/td&gt;
      &lt;td style=&quot;text-align: right&quot;&gt;0.0061&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;NetBSD&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;unknown&lt;/td&gt;
      &lt;td style=&quot;text-align: right&quot;&gt;2&lt;/td&gt;
      &lt;td style=&quot;text-align: right&quot;&gt;0.0061&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
  &lt;tfoot&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;合　計&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt; &lt;/td&gt;
      &lt;td style=&quot;text-align: right&quot;&gt;32,752&lt;/td&gt;
      &lt;td style=&quot;text-align: right&quot;&gt;100.0000&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tfoot&gt;
&lt;/table&gt;

&lt;h3 id=&quot;2-アクセスをosバージョン別に集計-1&quot;&gt;2. アクセスをOS・バージョン別に集計&lt;/h3&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th style=&quot;text-align: left&quot;&gt;OS&lt;/th&gt;
      &lt;th style=&quot;text-align: left&quot;&gt;Version&lt;/th&gt;
      &lt;th style=&quot;text-align: right&quot;&gt;PageViews&lt;/th&gt;
      &lt;th style=&quot;text-align: right&quot;&gt;比率(%)&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;Windows&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;10&lt;/td&gt;
      &lt;td style=&quot;text-align: right&quot;&gt;16,759&lt;/td&gt;
      &lt;td style=&quot;text-align: right&quot;&gt;51.1694&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;Mac OS&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;X&lt;/td&gt;
      &lt;td style=&quot;text-align: right&quot;&gt;7,677&lt;/td&gt;
      &lt;td style=&quot;text-align: right&quot;&gt;23.4398&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;Windows&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;7&lt;/td&gt;
      &lt;td style=&quot;text-align: right&quot;&gt;4,707&lt;/td&gt;
      &lt;td style=&quot;text-align: right&quot;&gt;14.3716&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;Linux&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;unknown&lt;/td&gt;
      &lt;td style=&quot;text-align: right&quot;&gt;1,424&lt;/td&gt;
      &lt;td style=&quot;text-align: right&quot;&gt;4.3478&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;Android&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;unknown&lt;/td&gt;
      &lt;td style=&quot;text-align: right&quot;&gt;1,197&lt;/td&gt;
      &lt;td style=&quot;text-align: right&quot;&gt;3.6547&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;Ubuntu Linux&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;unknown&lt;/td&gt;
      &lt;td style=&quot;text-align: right&quot;&gt;393&lt;/td&gt;
      &lt;td style=&quot;text-align: right&quot;&gt;1.1999&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;Windows&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;8.1&lt;/td&gt;
      &lt;td style=&quot;text-align: right&quot;&gt;279&lt;/td&gt;
      &lt;td style=&quot;text-align: right&quot;&gt;0.8519&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;unknown&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;unknown&lt;/td&gt;
      &lt;td style=&quot;text-align: right&quot;&gt;215&lt;/td&gt;
      &lt;td style=&quot;text-align: right&quot;&gt;0.6564&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;Fedora Linux&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;unknown&lt;/td&gt;
      &lt;td style=&quot;text-align: right&quot;&gt;41&lt;/td&gt;
      &lt;td style=&quot;text-align: right&quot;&gt;0.1252&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;Windows&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;XP&lt;/td&gt;
      &lt;td style=&quot;text-align: right&quot;&gt;19&lt;/td&gt;
      &lt;td style=&quot;text-align: right&quot;&gt;0.0580&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;Windows&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;8&lt;/td&gt;
      &lt;td style=&quot;text-align: right&quot;&gt;18&lt;/td&gt;
      &lt;td style=&quot;text-align: right&quot;&gt;0.0550&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;FreeBSD&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;unknown&lt;/td&gt;
      &lt;td style=&quot;text-align: right&quot;&gt;16&lt;/td&gt;
      &lt;td style=&quot;text-align: right&quot;&gt;0.0489&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;Windows&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;98&lt;/td&gt;
      &lt;td style=&quot;text-align: right&quot;&gt;3&lt;/td&gt;
      &lt;td style=&quot;text-align: right&quot;&gt;0.0092&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;Windows&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;Vista&lt;/td&gt;
      &lt;td style=&quot;text-align: right&quot;&gt;2&lt;/td&gt;
      &lt;td style=&quot;text-align: right&quot;&gt;0.0061&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;NetBSD&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;unknown&lt;/td&gt;
      &lt;td style=&quot;text-align: right&quot;&gt;2&lt;/td&gt;
      &lt;td style=&quot;text-align: right&quot;&gt;0.0061&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
  &lt;tfoot&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;合　計&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt; &lt;/td&gt;
      &lt;td style=&quot;text-align: right&quot;&gt;32,752&lt;/td&gt;
      &lt;td style=&quot;text-align: right&quot;&gt;100.0000&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tfoot&gt;
&lt;/table&gt;

&lt;h3 id=&quot;3-アクセスをブラウザ別に集計&quot;&gt;3. アクセスをブラウザ別に集計&lt;/h3&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th style=&quot;text-align: left&quot;&gt;ブラウザ&lt;/th&gt;
      &lt;th style=&quot;text-align: right&quot;&gt;PageViews&lt;/th&gt;
      &lt;th style=&quot;text-align: right&quot;&gt;比率(%)&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;Chrome&lt;/td&gt;
      &lt;td style=&quot;text-align: right&quot;&gt;19,600&lt;/td&gt;
      &lt;td style=&quot;text-align: right&quot;&gt;59.8437&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;Safari&lt;/td&gt;
      &lt;td style=&quot;text-align: right&quot;&gt;4,924&lt;/td&gt;
      &lt;td style=&quot;text-align: right&quot;&gt;15.0342&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;Netscape Navigator&lt;/td&gt;
      &lt;td style=&quot;text-align: right&quot;&gt;4,604&lt;/td&gt;
      &lt;td style=&quot;text-align: right&quot;&gt;14.0572&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;Mozilla Firefox&lt;/td&gt;
      &lt;td style=&quot;text-align: right&quot;&gt;3,172&lt;/td&gt;
      &lt;td style=&quot;text-align: right&quot;&gt;9.6849&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;Internet Explorer&lt;/td&gt;
      &lt;td style=&quot;text-align: right&quot;&gt;452&lt;/td&gt;
      &lt;td style=&quot;text-align: right&quot;&gt;1.3801&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
  &lt;tfoot&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;合　計&lt;/td&gt;
      &lt;td style=&quot;text-align: right&quot;&gt;32,752&lt;/td&gt;
      &lt;td style=&quot;text-align: right&quot;&gt;100.0000&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tfoot&gt;
&lt;/table&gt;

&lt;h3 id=&quot;3-アクセスをブラウザ別に集計-1&quot;&gt;3. アクセスをブラウザ別に集計&lt;/h3&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th style=&quot;text-align: left&quot;&gt;ブラウザ&lt;/th&gt;
      &lt;th style=&quot;text-align: right&quot;&gt;PageViews&lt;/th&gt;
      &lt;th style=&quot;text-align: right&quot;&gt;比率(%)&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;Chrome&lt;/td&gt;
      &lt;td style=&quot;text-align: right&quot;&gt;19,600&lt;/td&gt;
      &lt;td style=&quot;text-align: right&quot;&gt;59.8437&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;Safari&lt;/td&gt;
      &lt;td style=&quot;text-align: right&quot;&gt;4,924&lt;/td&gt;
      &lt;td style=&quot;text-align: right&quot;&gt;15.0342&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;Netscape Navigator&lt;/td&gt;
      &lt;td style=&quot;text-align: right&quot;&gt;4,604&lt;/td&gt;
      &lt;td style=&quot;text-align: right&quot;&gt;14.0572&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;Mozilla Firefox&lt;/td&gt;
      &lt;td style=&quot;text-align: right&quot;&gt;3,172&lt;/td&gt;
      &lt;td style=&quot;text-align: right&quot;&gt;9.6849&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;Internet Explorer&lt;/td&gt;
      &lt;td style=&quot;text-align: right&quot;&gt;452&lt;/td&gt;
      &lt;td style=&quot;text-align: right&quot;&gt;1.3801&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
  &lt;tfoot&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;合　計&lt;/td&gt;
      &lt;td style=&quot;text-align: right&quot;&gt;32,752&lt;/td&gt;
      &lt;td style=&quot;text-align: right&quot;&gt;100.0000&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tfoot&gt;
&lt;/table&gt;

&lt;h3 id=&quot;4-アクセスをブラウザバージョン別に集計上位20件&quot;&gt;4. アクセスをブラウザ・バージョン別に集計（上位20件）&lt;/h3&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th style=&quot;text-align: left&quot;&gt;ブラウザ&lt;/th&gt;
      &lt;th style=&quot;text-align: left&quot;&gt;Version&lt;/th&gt;
      &lt;th style=&quot;text-align: right&quot;&gt;PageViews&lt;/th&gt;
      &lt;th style=&quot;text-align: right&quot;&gt;比率(%)&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;Chrome&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;97.0.4692.71&lt;/td&gt;
      &lt;td style=&quot;text-align: right&quot;&gt;8,037&lt;/td&gt;
      &lt;td style=&quot;text-align: right&quot;&gt;24.5390&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;Netscape Navigator&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;5.0&lt;/td&gt;
      &lt;td style=&quot;text-align: right&quot;&gt;4,604&lt;/td&gt;
      &lt;td style=&quot;text-align: right&quot;&gt;14.0572&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;Chrome&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;96.0.4664.110&lt;/td&gt;
      &lt;td style=&quot;text-align: right&quot;&gt;4,599&lt;/td&gt;
      &lt;td style=&quot;text-align: right&quot;&gt;14.0419&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;Chrome&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;97.0.4692.99&lt;/td&gt;
      &lt;td style=&quot;text-align: right&quot;&gt;4,261&lt;/td&gt;
      &lt;td style=&quot;text-align: right&quot;&gt;13.0099&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;Safari&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;9537.53&lt;/td&gt;
      &lt;td style=&quot;text-align: right&quot;&gt;2,028&lt;/td&gt;
      &lt;td style=&quot;text-align: right&quot;&gt;6.1920&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;Safari&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;604.1&lt;/td&gt;
      &lt;td style=&quot;text-align: right&quot;&gt;1,950&lt;/td&gt;
      &lt;td style=&quot;text-align: right&quot;&gt;5.9538&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;Mozilla Firefox&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;96.0&lt;/td&gt;
      &lt;td style=&quot;text-align: right&quot;&gt;1,163&lt;/td&gt;
      &lt;td style=&quot;text-align: right&quot;&gt;3.5509&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;Mozilla Firefox&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;95.0&lt;/td&gt;
      &lt;td style=&quot;text-align: right&quot;&gt;922&lt;/td&gt;
      &lt;td style=&quot;text-align: right&quot;&gt;2.8151&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;Safari&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;605.1.15&lt;/td&gt;
      &lt;td style=&quot;text-align: right&quot;&gt;917&lt;/td&gt;
      &lt;td style=&quot;text-align: right&quot;&gt;2.7998&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;Mozilla Firefox&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;91.0&lt;/td&gt;
      &lt;td style=&quot;text-align: right&quot;&gt;466&lt;/td&gt;
      &lt;td style=&quot;text-align: right&quot;&gt;1.4228&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;Internet Explorer&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;11.0&lt;/td&gt;
      &lt;td style=&quot;text-align: right&quot;&gt;412&lt;/td&gt;
      &lt;td style=&quot;text-align: right&quot;&gt;1.2579&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;Chrome&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;97.0.4692.98&lt;/td&gt;
      &lt;td style=&quot;text-align: right&quot;&gt;291&lt;/td&gt;
      &lt;td style=&quot;text-align: right&quot;&gt;0.8885&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;Chrome&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;97.0.4692.87&lt;/td&gt;
      &lt;td style=&quot;text-align: right&quot;&gt;286&lt;/td&gt;
      &lt;td style=&quot;text-align: right&quot;&gt;0.8732&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;Chrome&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;96.0.4664.104&lt;/td&gt;
      &lt;td style=&quot;text-align: right&quot;&gt;246&lt;/td&gt;
      &lt;td style=&quot;text-align: right&quot;&gt;0.7511&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;Chrome&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;96.0.4664.93&lt;/td&gt;
      &lt;td style=&quot;text-align: right&quot;&gt;228&lt;/td&gt;
      &lt;td style=&quot;text-align: right&quot;&gt;0.6961&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;Mozilla Firefox&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;60.0&lt;/td&gt;
      &lt;td style=&quot;text-align: right&quot;&gt;222&lt;/td&gt;
      &lt;td style=&quot;text-align: right&quot;&gt;0.6778&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;Chrome&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;97.0.4692.70&lt;/td&gt;
      &lt;td style=&quot;text-align: right&quot;&gt;145&lt;/td&gt;
      &lt;td style=&quot;text-align: right&quot;&gt;0.4427&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;Chrome&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;95.0.4638.69&lt;/td&gt;
      &lt;td style=&quot;text-align: right&quot;&gt;116&lt;/td&gt;
      &lt;td style=&quot;text-align: right&quot;&gt;0.3542&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;Mozilla Firefox&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;78.0&lt;/td&gt;
      &lt;td style=&quot;text-align: right&quot;&gt;100&lt;/td&gt;
      &lt;td style=&quot;text-align: right&quot;&gt;0.3053&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;Chrome&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;96.0.4664.45&lt;/td&gt;
      &lt;td style=&quot;text-align: right&quot;&gt;98&lt;/td&gt;
      &lt;td style=&quot;text-align: right&quot;&gt;0.2992&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;：&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;：&lt;/td&gt;
      &lt;td style=&quot;text-align: right&quot;&gt;：&lt;/td&gt;
      &lt;td style=&quot;text-align: right&quot;&gt;：&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
  &lt;tfoot&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;合　計&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt; &lt;/td&gt;
      &lt;td style=&quot;text-align: right&quot;&gt;32,752&lt;/td&gt;
      &lt;td style=&quot;text-align: right&quot;&gt;100.0000&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tfoot&gt;
&lt;/table&gt;

&lt;hr /&gt;

&lt;p&gt;以上。&lt;/p&gt;

&lt;h3 id=&quot;4-アクセスをブラウザバージョン別に集計上位20件-1&quot;&gt;4. アクセスをブラウザ・バージョン別に集計（上位20件）&lt;/h3&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th style=&quot;text-align: left&quot;&gt;ブラウザ&lt;/th&gt;
      &lt;th style=&quot;text-align: left&quot;&gt;Version&lt;/th&gt;
      &lt;th style=&quot;text-align: right&quot;&gt;PageViews&lt;/th&gt;
      &lt;th style=&quot;text-align: right&quot;&gt;比率(%)&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;Chrome&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;97.0.4692.71&lt;/td&gt;
      &lt;td style=&quot;text-align: right&quot;&gt;8,037&lt;/td&gt;
      &lt;td style=&quot;text-align: right&quot;&gt;24.5390&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;Netscape Navigator&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;5.0&lt;/td&gt;
      &lt;td style=&quot;text-align: right&quot;&gt;4,604&lt;/td&gt;
      &lt;td style=&quot;text-align: right&quot;&gt;14.0572&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;Chrome&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;96.0.4664.110&lt;/td&gt;
      &lt;td style=&quot;text-align: right&quot;&gt;4,599&lt;/td&gt;
      &lt;td style=&quot;text-align: right&quot;&gt;14.0419&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;Chrome&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;97.0.4692.99&lt;/td&gt;
      &lt;td style=&quot;text-align: right&quot;&gt;4,261&lt;/td&gt;
      &lt;td style=&quot;text-align: right&quot;&gt;13.0099&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;Safari&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;9537.53&lt;/td&gt;
      &lt;td style=&quot;text-align: right&quot;&gt;2,028&lt;/td&gt;
      &lt;td style=&quot;text-align: right&quot;&gt;6.1920&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;Safari&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;604.1&lt;/td&gt;
      &lt;td style=&quot;text-align: right&quot;&gt;1,950&lt;/td&gt;
      &lt;td style=&quot;text-align: right&quot;&gt;5.9538&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;Mozilla Firefox&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;96.0&lt;/td&gt;
      &lt;td style=&quot;text-align: right&quot;&gt;1,163&lt;/td&gt;
      &lt;td style=&quot;text-align: right&quot;&gt;3.5509&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;Mozilla Firefox&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;95.0&lt;/td&gt;
      &lt;td style=&quot;text-align: right&quot;&gt;922&lt;/td&gt;
      &lt;td style=&quot;text-align: right&quot;&gt;2.8151&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;Safari&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;605.1.15&lt;/td&gt;
      &lt;td style=&quot;text-align: right&quot;&gt;917&lt;/td&gt;
      &lt;td style=&quot;text-align: right&quot;&gt;2.7998&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;Mozilla Firefox&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;91.0&lt;/td&gt;
      &lt;td style=&quot;text-align: right&quot;&gt;466&lt;/td&gt;
      &lt;td style=&quot;text-align: right&quot;&gt;1.4228&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;Internet Explorer&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;11.0&lt;/td&gt;
      &lt;td style=&quot;text-align: right&quot;&gt;412&lt;/td&gt;
      &lt;td style=&quot;text-align: right&quot;&gt;1.2579&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;Chrome&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;97.0.4692.98&lt;/td&gt;
      &lt;td style=&quot;text-align: right&quot;&gt;291&lt;/td&gt;
      &lt;td style=&quot;text-align: right&quot;&gt;0.8885&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;Chrome&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;97.0.4692.87&lt;/td&gt;
      &lt;td style=&quot;text-align: right&quot;&gt;286&lt;/td&gt;
      &lt;td style=&quot;text-align: right&quot;&gt;0.8732&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;Chrome&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;96.0.4664.104&lt;/td&gt;
      &lt;td style=&quot;text-align: right&quot;&gt;246&lt;/td&gt;
      &lt;td style=&quot;text-align: right&quot;&gt;0.7511&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;Chrome&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;96.0.4664.93&lt;/td&gt;
      &lt;td style=&quot;text-align: right&quot;&gt;228&lt;/td&gt;
      &lt;td style=&quot;text-align: right&quot;&gt;0.6961&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;Mozilla Firefox&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;60.0&lt;/td&gt;
      &lt;td style=&quot;text-align: right&quot;&gt;222&lt;/td&gt;
      &lt;td style=&quot;text-align: right&quot;&gt;0.6778&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;Chrome&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;97.0.4692.70&lt;/td&gt;
      &lt;td style=&quot;text-align: right&quot;&gt;145&lt;/td&gt;
      &lt;td style=&quot;text-align: right&quot;&gt;0.4427&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;Chrome&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;95.0.4638.69&lt;/td&gt;
      &lt;td style=&quot;text-align: right&quot;&gt;116&lt;/td&gt;
      &lt;td style=&quot;text-align: right&quot;&gt;0.3542&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;Mozilla Firefox&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;78.0&lt;/td&gt;
      &lt;td style=&quot;text-align: right&quot;&gt;100&lt;/td&gt;
      &lt;td style=&quot;text-align: right&quot;&gt;0.3053&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;Chrome&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;96.0.4664.45&lt;/td&gt;
      &lt;td style=&quot;text-align: right&quot;&gt;98&lt;/td&gt;
      &lt;td style=&quot;text-align: right&quot;&gt;0.2992&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;：&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;：&lt;/td&gt;
      &lt;td style=&quot;text-align: right&quot;&gt;：&lt;/td&gt;
      &lt;td style=&quot;text-align: right&quot;&gt;：&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
  &lt;tfoot&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;合　計&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt; &lt;/td&gt;
      &lt;td style=&quot;text-align: right&quot;&gt;32,752&lt;/td&gt;
      &lt;td style=&quot;text-align: right&quot;&gt;100.0000&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tfoot&gt;
&lt;/table&gt;

&lt;hr /&gt;

&lt;p&gt;以上。&lt;/p&gt;</content><author><name>mk-mode.com</name></author><category term="ブログ" /><category term="Jekyll" /><summary type="html">2月になりましたので、先月1月分の当ブログアクセス状況を公開します。（※自分用の記録）</summary></entry><entry><title type="html">Debian 11 (bullseye) - Mroonga インストール（ソースビルド）！</title><link href="https://komasaru.github.io/2022/01/26/debian-11-mroonga-installation-by-src/" rel="alternate" type="text/html" title="Debian 11 (bullseye) - Mroonga インストール（ソースビルド）！" /><published>2022-01-26T00:20:00+09:00</published><updated>2022-01-26T00:20:00+09:00</updated><id>https://komasaru.github.io/2022/01/26/debian-11-mroonga-installation-by-src</id><content type="html" xml:base="https://komasaru.github.io/2022/01/26/debian-11-mroonga-installation-by-src/">&lt;p&gt;Debian GNU/Linux 11 (bullseye) 上に全文検索エンジン Mroonga をインストールする方法についての記録です。&lt;/p&gt;

&lt;p&gt;以前古いバージョンでの作業時に残していた記録を参考に作業を行い、今回更新した作業記録を貼付する形式の内容となっています。&lt;br /&gt;
（当然ながら、興味がなければスルーしてください）&lt;/p&gt;

&lt;!--more--&gt;

&lt;h3 id=&quot;0-前提条件&quot;&gt;0. 前提条件&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;Debian GNU/Linux 11.0.0 (bullseye; 64bit) での作業を想定。&lt;/li&gt;
  &lt;li&gt;当記事執筆時点で最新の Mroonga 11.06 をインストールする。&lt;/li&gt;
  &lt;li&gt;Groonga 11.0.6 がインストール済みであることを想定。&lt;br /&gt;
（参照「&lt;a href=&quot;/2022/01/12/debian-11-groonga-installation-by-official-apt&quot; title=&quot;Debian 11 (bullseye) - 全文検索エンジン Groonga インストール（by Groonga 公式リポジトリ）！&quot;&gt;Debian 11 (bullseye) - 全文検索エンジン Groonga インストール（by Groonga 公式リポジトリ）！&lt;/a&gt;」）&lt;/li&gt;
  &lt;li&gt;MariaDB 10.5.12 をソースをビルドしてインストールしていること。（Mroonga のビルドに MySQL のソースが必要なため。MariaDB をパッケージでインストールしている場合にも、ソースが必要となる）&lt;br /&gt;
（参照「&lt;a href=&quot;/2022/01/19/debian-11-mariadb-installation-by-src&quot; title=&quot;Debian 11 (bullseye) - MariaDB 10.5 サーバ構築（ソースビルド）！&quot;&gt;Debian 11 (bullseye) - MariaDB 10.5 サーバ構築（ソースビルド）！&lt;/a&gt;」）&lt;/li&gt;
  &lt;li&gt;MariaDB 10.5.12 は &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;/usr/local/mysql&lt;/code&gt; ディレクトリにインストールされていることを想定。&lt;/li&gt;
  &lt;li&gt;MariaDB 10.5.12 のインストールに使用したソースは &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;/usr/local/src/mariadb-10.5.12&lt;/code&gt; ディレクトリに存在することを想定。&lt;/li&gt;
  &lt;li&gt;MariaDB 10.5.12 のビルド用ディレクトリは &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;/usr/local/src/build-mariadb&lt;/code&gt; であることを想定。&lt;/li&gt;
  &lt;li&gt;環境の相違等のために以下の方法ではうまく行かないこともあるだろう。&lt;br /&gt;
ログを確認して適宜対処すること。&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;1-必要ライブラリのインストール&quot;&gt;1. 必要ライブラリのインストール&lt;/h3&gt;

&lt;p&gt;Groonga 開発ライブラリをインストール。&lt;/p&gt;

&lt;div class=&quot;language-text highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# apt -y install libgroonga-dev
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;トクーナイザとして MeCab を使用する予定があるなら、次を実行。（当方は実行）&lt;/p&gt;

&lt;div class=&quot;language-text highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# apt -y -V install groonga-tokenizer-mecab
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;トークンフィルタとして TokeFilterStem を使用する予定があるなら、次を実行。（当方は実行）&lt;/p&gt;

&lt;div class=&quot;language-text highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# apt -y -V install groonga-token-filter-stem
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;ノーマライザとして groonga-normalizer-mysql を使用する予定があるなら、次を実行。（当方は実行）&lt;/p&gt;

&lt;div class=&quot;language-text highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# apt -y -V install groonga-normalizer-mysql
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;2-ソースの取得&quot;&gt;2. ソースの取得&lt;/h3&gt;

&lt;p&gt;アーカイブファイルを取得、展開後、ディレクトリを移動しておく。（ダウンロード先は一般ユーザホームディレクトリとした）&lt;/p&gt;

&lt;div class=&quot;language-text highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# cd /usr/local/src
# wget http://packages.groonga.org/source/mroonga/mroonga-11.06.tar.gz
# tar xvf mroonga-11.06.tar.gz
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;3-makefile-の生成&quot;&gt;3. Makefile の生成&lt;/h3&gt;

&lt;div class=&quot;language-text highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# cd mroonga-11.06
# ./configure \
 --with-mysql-source=/usr/local/src/mariadb-10.5.12 \
 --with-mysql-build=/usr/local/src/build-mariadb \
 --with-mysql-config=/usr/local/mysql/bin/mysql_config
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;4-ビルドインストール&quot;&gt;4. ビルド＆インストール&lt;/h3&gt;

&lt;div class=&quot;language-text highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# make -j$(grep &apos;^processor&apos; /proc/cpuinfo | wc -l)
# make install
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;make&lt;/code&gt; の &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;-j$(grep &apos;^processor&apos; /proc/cpuinfo | wc -l)&lt;/code&gt; の部分はプロセッサ数が明確なら &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;-j4&lt;/code&gt; のように指定してもよいし、速度を気にしないのなら単に &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;make&lt;/code&gt; のみでもよい。&lt;/p&gt;

&lt;h3 id=&quot;5-mariadb-への-mroonga-プラグインの適用&quot;&gt;5. MariaDB への Mroonga プラグインの適用&lt;/h3&gt;

&lt;p&gt;MariaDB サーバが起動していることを確認してから以下を実行する。&lt;/p&gt;

&lt;div class=&quot;language-text highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# mariadb -u root &amp;lt; /usr/local/share/mroonga/install.sql
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;mariadb&lt;/code&gt; コマンドは &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;mysql&lt;/code&gt; でもよい。&lt;/p&gt;

&lt;p&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;... does not exist&lt;/code&gt; のメッセージが出力されるかもしれないが問題ない。（おそらく）&lt;/p&gt;

&lt;h3 id=&quot;6-mroonga-導入の確認&quot;&gt;6. Mroonga 導入の確認&lt;/h3&gt;

&lt;p&gt;MariaDB サーバに root でログインして確認してみる。&lt;/p&gt;

&lt;div class=&quot;language-text highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ mariadb -u root -p
Enter password:
Welcome to the MariaDB monitor.  Commands end with ; or \g.
Your MariaDB connection id is 15
Server version: 10.5.12-MariaDB Source distribution

Copyright (c) 2000, 2018, Oracle, MariaDB Corporation Ab and others.

Type &apos;help;&apos; or &apos;\h&apos; for help. Type &apos;\c&apos; to clear the current input statement.

root@localhost:(none) 16:48:05&amp;gt; show engines;
+--------------------+---------+-------------------------------------------------------------------------------------------------+--------------+------+------------+
| Engine             | Support | Comment                                                                                         | Transactions | XA   | Savepoints |
+--------------------+---------+-------------------------------------------------------------------------------------------------+--------------+------+------------+
| CSV                | YES     | Stores tables as CSV files                                                                      | NO           | NO   | NO         |
| MRG_MyISAM         | YES     | Collection of identical MyISAM tables                                                           | NO           | NO   | NO         |
| MEMORY             | YES     | Hash based, stored in memory, useful for temporary tables                                       | NO           | NO   | NO         |
| Aria               | YES     | Crash-safe tables with MyISAM heritage. Used for internal temporary tables and privilege tables | NO           | NO   | NO         |
| MyISAM             | YES     | Non-transactional engine with good performance and small data footprint                         | NO           | NO   | NO         |
| SEQUENCE           | YES     | Generated tables filled with sequential values                                                  | YES          | NO   | YES        |
| Mroonga            | YES     | CJK-ready fulltext search, column store                                                         | NO           | NO   | NO         |
| PERFORMANCE_SCHEMA | YES     | Performance Schema                                                                              | NO           | NO   | NO         |
| InnoDB             | DEFAULT | Supports transactions, row-level locking, foreign keys and encryption for tables                | YES          | YES  | YES        |
+--------------------+---------+-------------------------------------------------------------------------------------------------+--------------+------+------------+
9 rows in set (0.056 sec)

root@localhost:(none) 16:48:18&amp;gt; exit
Bye
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Mroonga&lt;/code&gt; 行が存在することを確認する。&lt;/p&gt;

&lt;p&gt;その他、 Mroonga の簡単な使用方法は以下の過去記事等を参照。&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;/2015/08/21/mariadb-mroonga-installation&quot; title=&quot;MariaDB 10.0.x - Mroonga プラグインの有効化！&quot;&gt;MariaDB 10.0.x - Mroonga プラグインの有効化！&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;7-参考サイト&quot;&gt;7. 参考サイト&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;https://mroonga.org/ja/docs/install/others.html&quot; title=&quot;2.8. その他 — Mroonga v11.06 documentation&quot;&gt;2.8. その他 — Mroonga v11.06 documentation&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;hr /&gt;

&lt;hr /&gt;

&lt;p&gt;以上。&lt;/p&gt;</content><author><name>mk-mode.com</name></author><category term="サーバ構築" /><category term="Linux" /><category term="Debian" /><category term="MariaDB" /><category term="Mroonga" /><summary type="html">Debian GNU/Linux 11 (bullseye) 上に全文検索エンジン Mroonga をインストールする方法についての記録です。 以前古いバージョンでの作業時に残していた記録を参考に作業を行い、今回更新した作業記録を貼付する形式の内容となっています。 （当然ながら、興味がなければスルーしてください）</summary></entry><entry><title type="html">Debian 11 (bullseye) - MariaDB 10.5 サーバ構築（ソースビルド）！</title><link href="https://komasaru.github.io/2022/01/19/debian-11-mariadb-installation-by-src/" rel="alternate" type="text/html" title="Debian 11 (bullseye) - MariaDB 10.5 サーバ構築（ソースビルド）！" /><published>2022-01-19T00:20:00+09:00</published><updated>2022-01-19T00:20:00+09:00</updated><id>https://komasaru.github.io/2022/01/19/debian-11-mariadb-installation-by-src</id><content type="html" xml:base="https://komasaru.github.io/2022/01/19/debian-11-mariadb-installation-by-src/">&lt;p&gt;Debian GNU/Linux 11 (bullseye) 上に DB サーバ MariaDB（10.5系）を構築する方法についての記録です。&lt;/p&gt;

&lt;p&gt;以前古いバージョンでの作業時に残していた記録を参考に作業を行い、今回更新した作業記録を貼付する形式の内容となっています。&lt;br /&gt;
（当然ながら、興味がなければスルーしてください）&lt;/p&gt;

&lt;!--more--&gt;

&lt;h3 id=&quot;0-前提条件&quot;&gt;0. 前提条件&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;Debian GNU/Linux 11.0.0 (bullseye; 64bit) での作業を想定。&lt;/li&gt;
  &lt;li&gt;接続元のマシンも Debian GNU/Linux 11 (bullseye; 64bit) を想定。&lt;/li&gt;
  &lt;li&gt;インストールする MariaDB は、当記事執筆時点で 10.5 系最新の 10.5.12 とする。&lt;br /&gt;
（当記事執筆時点、 10.6 系は全文検索エンジン Mroonga 最新版が未対応）&lt;/li&gt;
  &lt;li&gt;MariaDB とは言っても中身は MySQL が元になっているので、各所で &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;mysql&lt;/code&gt; のキーワードが出現する。&lt;/li&gt;
  &lt;li&gt;データディレクトリは &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;/var/lib/mysql&lt;/code&gt; ディレクトリ配下とする。&lt;/li&gt;
  &lt;li&gt;root ユーザでの作業を想定。&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;1-sourceslist-ファイルの編集&quot;&gt;1. sources.list ファイルの編集&lt;/h3&gt;

&lt;p&gt;今回は MariaDB をソースをビルドしてインストールするので、本来は &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;sources.list&lt;/code&gt; の編集は必要ないが、 MariaDB のビルドに依存するパッケージをインストールすために使用するので、編集する。&lt;br /&gt;
&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;/etc/apt/sources.list&lt;/code&gt; に直接記述してもよいが、今回は &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;/etc/apt/sources.list.d/mariadb.list&lt;/code&gt; に新規作成する。&lt;br /&gt;
記述する内容は「&lt;a href=&quot;https://downloads.mariadb.org/mariadb/repositories/&quot; title=&quot;Setting up MariaDB Repositories&quot;&gt;こちら(Setting up MariaDB Repositories)&lt;/a&gt;」で確認可能。（ミラーサイトは隣国を適当に選択する）&lt;/p&gt;

&lt;p&gt;File: &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;/etc/apt/sources.list.d/mariadb.list&lt;/code&gt;&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-bash&quot; data-lang=&quot;bash&quot;&gt;&lt;span class=&quot;c&quot;&gt;# MariaDB 10.5 repository list - created 2021-09-08 00:56 UTC&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;# http://downloads.mariadb.org/mariadb/repositories/&lt;/span&gt;
deb &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;arch&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;amd64,arm64,ppc64el] https://ftp.yz.yamagata-u.ac.jp/pub/dbms/mariadb/repo/10.5/debian bullseye main
deb-src https://ftp.yz.yamagata-u.ac.jp/pub/dbms/mariadb/repo/10.5/debian bullseye main&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;p&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;sources.list&lt;/code&gt; を使用しない方法等については「&lt;a href=&quot;https://downloads.mariadb.org/mariadb/repositories/&quot; title=&quot;Setting up MariaDB Repositories&quot;&gt;こちら&lt;/a&gt;」を参照。&lt;/p&gt;

&lt;h3 id=&quot;2-パッケージリストの更新&quot;&gt;2. パッケージリストの更新&lt;/h3&gt;

&lt;p&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;sources.list&lt;/code&gt; を編集したので、パッケージリストを更新する。&lt;/p&gt;

&lt;div class=&quot;language-text highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# apt -y update
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-text highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;      :
===&amp;lt; 中略 &amp;gt;===
      :

Err:5 https://ftp.yz.yamagata-u.ac.jp/pub/dbms/mariadb/repo/10.5/debian bullseye InRelease
  The following signatures couldn&apos;t be verified because the public key is not available: NO_PUBKEY F1656F24C74CD1D8
Reading package lists... Done
W: GPG error: https://ftp.yz.yamagata-u.ac.jp/pub/dbms/mariadb/repo/10.5/debian bullseye InRelease: The following signatures couldn&apos;t be verified because the public key is not available: NO_PUBKEY F1656F24C74CD1D8
E: The repository &apos;https://ftp.yz.yamagata-u.ac.jp/pub/dbms/mariadb/repo/10.5/debian bullseye InRelease&apos; is not signed.
N: Updating from such a repository can&apos;t be done securely, and is therefore disabled by default.
N: See apt-secure(8) manpage for repository creation and user configuration details.
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;上記のように、 GPG 公開鍵に関するエラーが出力される場合は、以下のようにした後に再試行する。&lt;/p&gt;

&lt;div class=&quot;language-text highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# apt-key adv --keyserver keyserver.ubuntu.com --recv-keys F1656F24C74CD1D8
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;strong&gt;これまで GPG 公開鍵の登録に &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;apt-key&lt;/code&gt; コマンドを使用してきたが、このコマンドは近い将来廃止される予定。（Debian は 12 bookworm で廃止）&lt;br /&gt;
廃止後は GnuPG を使用する方法となるが、今から GnuPG を使用する方法で登録することも可能。&lt;/strong&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;3-依存パッケージのインストール&quot;&gt;3. 依存パッケージのインストール&lt;/h3&gt;

&lt;div class=&quot;language-text highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# apt install -y build-essential bison
# apt build-dep mariadb-server
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;または、「&lt;a href=&quot;https://mariadb.com/kb/en/library/Build_Environment_Setup_for_Linux/&quot; title=&quot;Build Environment Setup for Linux - MariaDB Knowledge Base&quot;&gt;こちら&lt;/a&gt;」を参考に、ビルドに必要なパッケージをインストールしてもよい。（但し、インストール漏れに注意）&lt;/p&gt;

&lt;h3 id=&quot;4-sourceslist-ファイルの削除&quot;&gt;4. sources.list ファイルの削除&lt;/h3&gt;

&lt;p&gt;1 で作成した MariaDB 用 sources.list ファイル &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;/etc/apt/sources.list.d/mariadb.list&lt;/code&gt; はもう不要なので削除しておく。（&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;/etc/apt/sources.list&lt;/code&gt; を直接編集したのなら、 MariaDB に関する記述を削除する）&lt;/p&gt;

&lt;div class=&quot;language-text highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# rm -f /etc/apt/sources.list.d/mariadb.list
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;5-アーカイブの取得&quot;&gt;5. アーカイブの取得&lt;/h3&gt;

&lt;p&gt;「&lt;a href=&quot;https://downloads.mariadb.org/&quot; title=&quot;Downloads - MariaDB&quot;&gt;こちら&lt;/a&gt;」から MariaDB の最新 Stable 版をダウンロードし、適当なディレクトリに配置する。（今回、当方はダウンロードした &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;mariadb-10.5.12.tar.gz&lt;/code&gt; を &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;/usr/local/src&lt;/code&gt; ディレクトリ配下に配置した）&lt;/p&gt;

&lt;p&gt;そして、展開する。&lt;/p&gt;

&lt;div class=&quot;language-text highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# cd /usr/local/src
# tar xvf mariadb-10.5.12.tar.gz
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;6-ソースのビルドインストール&quot;&gt;6. ソースのビルド＆インストール&lt;/h3&gt;

&lt;p&gt;先ほど展開したディレクトリと同じ階層にビルド用のディレクトリを作成し、そのディレクトリ内で cmake する。（以下の各種ビルドオプションは当方の例）&lt;/p&gt;

&lt;div class=&quot;language-text highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# mkdir build-mariadb
# cd build-mariadb
# cmake ../mariadb-10.5.12 -DCMAKE_INSTALL_PREFIX=/usr/local/mysql \
 -DMYSQL_DATADIR=/var/lib/mysql \
 -DMYSQL_UNIX_ADDR=/var/run/mysqld/mysqld.sock \
 -DENABLED_LOCAL_INFILE=1 \
 -DDEFAULT_CHARSET=utf8_mb4 \
 -DDEFAULT_COLLATION=utf8_general_ci \
 -DWITH_EXTRA_CHARSETS=all \
 -DWITH_INNOBASE_STORAGE_ENGINE=1
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;そして、 make 後、インストールする。&lt;/p&gt;

&lt;div class=&quot;language-text highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# make -j$(grep &apos;^processor&apos; /proc/cpuinfo | wc -l)
# make install
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;make&lt;/code&gt; コマンドの &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;-j&lt;/code&gt; はなくても問題ない。（並列ビルド（高速化）しないなら）&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;以下のようなエラーで make が中断した場合、それは swap メモリが不足しているからのようだ。 swap を増やした後、 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;make clean&lt;/code&gt; してから &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;make&lt;/code&gt; し直してみる。（どれくらい swap を増やせべよいのかは不明）&lt;br /&gt;
（参考「&lt;a href=&quot;/2015/10/20/linux-create-swap-area&quot; title=&quot;Linux - スワップ領域の作成！ - mk-mode BLOG&quot;&gt;Linux - スワップ領域の作成！ - mk-mode BLOG&lt;/a&gt;」）&lt;br /&gt;
※もしくは、物理メモリを増設することも検討。（今さら無理なので、今後、サーバ構築する際にでも）&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;[ 61%] Building C object storage/mroonga/vendor/groonga/lib/CMakeFiles/libgroonga.dir/expr.c.o
cc: fatal error: Killed signal terminated program cc1
compilation terminated.
make[2]: *** [storage/mroonga/vendor/groonga/lib/CMakeFiles/libgroonga.dir/build.make:251: storage/mroonga/vendor/groonga/lib/CMakeFiles/libgroonga.dir/expr.c.o] Error 1
make[1]: *** [CMakeFiles/Makefile2:7037: storage/mroonga/vendor/groonga/lib/CMakeFiles/libgroonga.dir/all] Error 2
make: *** [Makefile:182: all] Error 2
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;7-ユーザグループ作成&quot;&gt;7. ユーザ・グループ作成&lt;/h3&gt;

&lt;p&gt;MySQL 用のユーザとグループを作成する。&lt;/p&gt;

&lt;div class=&quot;language-text highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# groupadd mysql
# useradd -r -g mysql mysql
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;8-データディレクトリ作成&quot;&gt;8. データディレクトリ作成&lt;/h3&gt;

&lt;p&gt;データディレクトリが無ければ作成し、所有者・グループを設定しておく。&lt;/p&gt;

&lt;div class=&quot;language-text highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# mkdir /var/lib/mysql
# chown -R mysql. /var/lib/mysql
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;9-ログディレクトリ作成&quot;&gt;9. ログディレクトリ作成&lt;/h3&gt;

&lt;p&gt;ログ用ディレクトリを作成し、所有者・グループを設定しておく。&lt;/p&gt;

&lt;div class=&quot;language-text highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# mkdir /var/log/mysql
# chown -R mysql. /var/log/mysql/
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;10-ソケットpidディレクトリ作成&quot;&gt;10. ソケット・PIDディレクトリ作成&lt;/h3&gt;

&lt;p&gt;ソケット・プロセスID用ディレクトリの所有者・グループを設定する。&lt;/p&gt;

&lt;div class=&quot;language-text highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# mkdir /var/run/mysqld
# chown -R mysql. /var/run/mysqld
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;11-設定ファイルの編集&quot;&gt;11. 設定ファイルの編集&lt;/h3&gt;

&lt;p&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;/etc/mysql&lt;/code&gt; ディレクトリ内の設定ファイルを適宜編集する。&lt;br /&gt;
もしくは、 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;/etc/my.cnf&lt;/code&gt; を別途作成する。&lt;/p&gt;

&lt;p&gt;【注意】&lt;br /&gt;
&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;/etc/my.cnf&lt;/code&gt; より後に &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;/etc/mysql/my.cnf&lt;/code&gt; が読み込まれる（&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;/etc/my.cnf&lt;/code&gt; の内容よりも &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;/etc/mysql/my.cnf&lt;/code&gt; の内容が優先される）ので、 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;/etc/my.cnf&lt;/code&gt; のみを使用したければ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;/etc/mysql/my.cnf&lt;/code&gt; を削除するか、（拡張子が &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;.cnf&lt;/code&gt; で終わらないよう）リネームするなどする。&lt;br /&gt;
&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;/etc/my.cnf&lt;/code&gt; を作成せず、最初から &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;/etc/mysql/my.cnf&lt;/code&gt; を編集する方法でも良いだろう。&lt;/p&gt;

&lt;h3 id=&quot;12-初期-db-の生成&quot;&gt;12. 初期 DB の生成&lt;/h3&gt;

&lt;div class=&quot;language-text highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# cd /usr/local/mysql
# scripts/mysql_install_db --user=mysql --basedir=/usr/local/mysql --datadir=/var/lib/mysql --defaults-file=/etc/my.cnf
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;13-起動スクリプトsysv-systemdの準備&quot;&gt;13. 起動スクリプト(SysV, SystemD)の準備&lt;/h3&gt;

&lt;p&gt;SysV（init スクリプト）でも、 SystemD(&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;systemctl&lt;/code&gt;) でも起動できるようにしている。&lt;br /&gt;
&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;mariadb&lt;/code&gt; の他、 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;mysqld&lt;/code&gt; でも起動できるようシンボリックリンクを張っている。&lt;/p&gt;

&lt;div class=&quot;language-text highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# cp support-files/mysql.server /etc/init.d/mysqld
# chmod +x /etc/init.d/mysqld
# ln -fns /etc/init.d/{mysqld,mariadb}

# cp support-files/systemd/mariadb.service /lib/systemd/system/
# ln -fns /lib/systemd/system/{mariadb,mysqld}.service
# systemctl daemon-reload
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;14-pid-ディレクトリの自動生成&quot;&gt;14. PID ディレクトリの自動生成&lt;/h3&gt;

&lt;p&gt;前項の方法で起動スクリプトを用意した場合、 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;/var/run&lt;/code&gt;(&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;/run&lt;/code&gt;) 配下のディレクトリは自動で生成してくれないので、自動で生成するよう、 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;/usr/lib/tmpfiles.d/var.conf&lt;/code&gt; に以下の1行を追加する。（&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;/var/run&lt;/code&gt;(&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;/run&lt;/code&gt;) ディレクトリは tmpfs を使用しているため、 OS 再起動後には消滅する。通常は、起動スクリプト内で生成するよう設定されていることが多いが、今回使用したスクリプト内では設定されていなかった。）&lt;br /&gt;
（当方ブログ過去記事「&lt;a href=&quot;https://www.mk-mode.com/octopress/2015/12/08/linux-dir-file-automatic-creation-on-boot/&quot; title=&quot;Linux - マシン起動時にディレクトリ・ファイルを自動作成！&quot;&gt;Linux - マシン起動時にディレクトリ・ファイルを自動作成！&lt;/a&gt;」も参照）&lt;/p&gt;

&lt;p&gt;File: &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;/usr/lib/tmpfiles.d/var.conf&lt;/code&gt;&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-bash&quot; data-lang=&quot;bash&quot;&gt;d /var/run/mysqld 0755 mysql mysql -&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;p&gt;もしくは、 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;mysqld_save&lt;/code&gt; コマンド実行直前に以下のような記述を追加してもよいだろう。（当方、未確認）&lt;/p&gt;

&lt;p&gt;File: &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;/etc/init.d/mysqld&lt;/code&gt;&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-bash&quot; data-lang=&quot;bash&quot;&gt;&lt;span class=&quot;nb&quot;&gt;test&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-e&lt;/span&gt; /var/run/mysqld &lt;span class=&quot;o&quot;&gt;||&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;install&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-m&lt;/span&gt; 755 &lt;span class=&quot;nt&quot;&gt;-o&lt;/span&gt; mysql &lt;span class=&quot;nt&quot;&gt;-g&lt;/span&gt; root &lt;span class=&quot;nt&quot;&gt;-d&lt;/span&gt; /var/run/mysqld&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;h3 id=&quot;15-環境変数-path-の設定&quot;&gt;15. 環境変数 PATH の設定&lt;/h3&gt;

&lt;p&gt;mysql コマンドへのパスを設定するために /etc/profile の最終行に以下の記述を追加する。&lt;/p&gt;

&lt;p&gt;File: &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;/etc/profile&lt;/code&gt;&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-bash&quot; data-lang=&quot;bash&quot;&gt;&lt;span class=&quot;nv&quot;&gt;PATH&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;/usr/local/mysql/bin:&lt;span class=&quot;nv&quot;&gt;$PATH&lt;/span&gt;
&lt;span class=&quot;nb&quot;&gt;export &lt;/span&gt;PATH&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;p&gt;そして、即時有効化。（マシン再起動でもよい）&lt;/p&gt;

&lt;div class=&quot;language-text highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# source /etc/profile
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;16-起動再起動ステータス確認停止のテスト&quot;&gt;16. 起動・再起動・ステータス確認・停止のテスト&lt;/h3&gt;

&lt;p&gt;起動・再起動・ステータス確認・停止ができるか確認する。(SystemD)&lt;/p&gt;

&lt;div class=&quot;language-text highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# systemctl start mariadb
# systemctl restart mariadb
# systemctl status mariadb
# systemctl stop mariadb
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;また、 init スクリプトでも起動・再起動・ステータス確認・停止ができるはず。&lt;/p&gt;

&lt;div class=&quot;language-text highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# /etc/init.d/mysqld start
# /etc/init.d/mysqld restart
# /etc/init.d/mysqld status
# /etc/init.d/mysqld stop
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;もちろん、 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;service&lt;/code&gt; コマンドでも起動・再起動・ステータス確認・停止ができるはず。&lt;/p&gt;

&lt;h3 id=&quot;17-セキュリティ設定&quot;&gt;17. セキュリティ設定&lt;/h3&gt;

&lt;p&gt;MariaDB サーバが起動していることを確認し、root のバスワード設定、テストDB削除等を行う。
（Unix socket authentication では &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;n&lt;/code&gt; 応答。 root のパスワードを設定。後はデフォルト（エンター押下）。但し、 root によるリモート接続を行いたければ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Disallow root login remotely?&lt;/code&gt; で &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;n&lt;/code&gt; 応答）&lt;/p&gt;

&lt;div class=&quot;language-text highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# cd /usr/local/mysql/bin
# ./mysql_secure_installation
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;18-動作確認&quot;&gt;18. 動作確認&lt;/h3&gt;

&lt;p&gt;MariaDB サーバにログインしてみる。&lt;/p&gt;

&lt;div class=&quot;language-text highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# mariadb -u root -p
Enter password:
Welcome to the MariaDB monitor.  Commands end with ; or \g.
Your MariaDB connection id is 11
Server version: 10.5.12-MariaDB Source distribution

Copyright (c) 2000, 2018, Oracle, MariaDB Corporation Ab and others.

Type &apos;help;&apos; or &apos;\h&apos; for help. Type &apos;\c&apos; to clear the current input statement.

root@localhost:(none) 16:24:29&amp;gt; show databases;
+--------------------+
| Database           |
+--------------------+
| information_schema |
| mysql              |
| performance_schema |
+--------------------+
3 rows in set (0.096 sec)

root@localhost:(none) 16:24:34&amp;gt; exit
Bye
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;mariadb&lt;/code&gt; コマンドは &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;mysql&lt;/code&gt; でも OK.&lt;/li&gt;
  &lt;li&gt;上記の（やや複雑な）プロンプトは当方の設定によるもの。&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;19-自動起動の設定&quot;&gt;19. 自動起動の設定&lt;/h3&gt;

&lt;p&gt;OS 起動時に自動で起動するように設定するには次のようにする。&lt;/p&gt;

&lt;div class=&quot;language-text highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# systemctl is-enabled mariadb
disabled

# systemctl enable mariadb
Synchronizing state of mariadb.service with SysV service script with /lib/systemd/systemd-sysv-install.
Executing: /lib/systemd/systemd-sysv-install enable mariadb
insserv: script mysqld: service mysql already provided!
insserv: script mysqld: service mysql already provided!
Created symlink /etc/systemd/system/multi-user.target.wants/mariadb.service → /lib/systemd/system/mariadb.service.

# systemctl is-enabled mariadb
enabled
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;20-ファイアウォールufwの設定&quot;&gt;20. ファイアウォール(ufw)の設定&lt;/h3&gt;

&lt;p&gt;リモートで MariaDB サーバにアクセスする場合（GUI ツールを使用する場合等）は、TCP ポート 3306 を開放する必要がある。&lt;/p&gt;

&lt;div class=&quot;language-text highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# ufw allow 3306/tcp
Rule added

# ufw status
    :
3306/tcp                   ALLOW       Anywhere
    :
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;hr /&gt;

&lt;p&gt;以上。&lt;/p&gt;</content><author><name>mk-mode.com</name></author><category term="サーバ構築" /><category term="Linux" /><category term="Debian" /><category term="MariaDB" /><summary type="html">Debian GNU/Linux 11 (bullseye) 上に DB サーバ MariaDB（10.5系）を構築する方法についての記録です。 以前古いバージョンでの作業時に残していた記録を参考に作業を行い、今回更新した作業記録を貼付する形式の内容となっています。 （当然ながら、興味がなければスルーしてください）</summary></entry><entry><title type="html">Debian 11 (bullseye) - 全文検索エンジン Groonga インストール（by Groonga 公式リポジトリ）！</title><link href="https://komasaru.github.io/2022/01/12/debian-11-groonga-installation-by-official-apt/" rel="alternate" type="text/html" title="Debian 11 (bullseye) - 全文検索エンジン Groonga インストール（by Groonga 公式リポジトリ）！" /><published>2022-01-12T00:20:00+09:00</published><updated>2022-01-12T00:20:00+09:00</updated><id>https://komasaru.github.io/2022/01/12/debian-11-groonga-installation-by-official-apt</id><content type="html" xml:base="https://komasaru.github.io/2022/01/12/debian-11-groonga-installation-by-official-apt/">&lt;p&gt;Debian GNU/Linux 11 (bullseye) にカラムストア機能付き全文検索エンジン Groonga を Groonga の公式リポジトリを使用して導入する方法についての記録です。&lt;/p&gt;

&lt;p&gt;以前古いバージョンでの作業時に残していた記録を参考に作業を行い、今回更新した作業記録を貼付する形式の内容となっています。&lt;br /&gt;
（当然ながら、興味がなければスルーしてください）&lt;/p&gt;

&lt;!--more--&gt;

&lt;h3 id=&quot;0-前提条件&quot;&gt;0. 前提条件&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;Debian GNU/Linux 11.0.0 (bullseye; 64bit) での作業を想定。&lt;/li&gt;
  &lt;li&gt;当記事執筆時点で最新の Groonga 11.0.6 をインストールする。&lt;/li&gt;
  &lt;li&gt;トークナイザとして MeCab を使用することを想定。&lt;/li&gt;
  &lt;li&gt;トークンフィルタとして TokenFilterStem を使用することを想定。&lt;/li&gt;
  &lt;li&gt;ノーマライザとして MySQL 互換の groonga-normalizer-mysql を使用することを想定。（将来、 Mroonga を使用することを想定）&lt;/li&gt;
  &lt;li&gt;ここでは、全文検索がどういうものかという説明はしない。&lt;/li&gt;
  &lt;li&gt;root ユーザでの作業を想定。&lt;/li&gt;
  &lt;li&gt;以下の説明内で出力するデータは、可読性を考慮して整形している。&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;1-日本語形態素解析器-mecab-のインストール&quot;&gt;1. 日本語形態素解析器 MeCab のインストール&lt;/h3&gt;

&lt;p&gt;トークナイザとして MeCab を使用する予定なので、インストールしておく。&lt;/p&gt;

&lt;div class=&quot;language-text highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# apt -y install mecab
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;2-インストール&quot;&gt;2. インストール&lt;/h3&gt;

&lt;div class=&quot;language-text highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# apt -y update
# wget https://packages.groonga.org/debian/groonga-apt-source-latest-bullseye.deb
# apt -y -V install ./groonga-apt-source-latest-bullseye.deb
# apt -y update
# apt -y -V install groonga
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;3-トークナイザ-mecab-のインストール&quot;&gt;3. トークナイザ MeCab のインストール&lt;/h3&gt;

&lt;p&gt;（トクーナイザとして MeCab を使用しないのなら、この作業は不要）&lt;/p&gt;

&lt;div class=&quot;language-text highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# apt -y -V install groonga-tokenizer-mecab
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;4-トークンフィルタ-tokefilterstem-のインストール&quot;&gt;4. トークンフィルタ TokeFilterStem のインストール&lt;/h3&gt;

&lt;p&gt;（トークンフィルタとして TokeFilterStem を使用しないのなら、この作業は不要）&lt;/p&gt;

&lt;div class=&quot;language-text highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# apt -y -V install groonga-token-filter-stem
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;5-munin-プラグインのインストール&quot;&gt;5. Munin プラグインのインストール&lt;/h3&gt;

&lt;p&gt;（Munin プラグインを使用しないのなら、この作業は不要）&lt;/p&gt;

&lt;div class=&quot;language-text highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# apt -y -V install groonga-munin-plugins
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;6-mysql-互換ノーマライザのインストール&quot;&gt;6. MySQL 互換ノーマライザのインストール&lt;/h3&gt;

&lt;p&gt;（ノーマライザとして groonga-normalizer-mysql を使用しないのなら、この作業は不要）&lt;/p&gt;

&lt;div class=&quot;language-text highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# apt -y -V install groonga-normalizer-mysql
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;7-インストール確認&quot;&gt;7. インストール確認&lt;/h3&gt;

&lt;div class=&quot;language-text highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ groonga --version
Groonga 11.0.6 [linux-gnu,x86_64,utf8,match-escalation-threshold=0,nfkc,mecab,message-pack,mruby,onigmo,zlib,lz4,zstandard,epoll,rapidjson,apache-arrow]

configure options: &amp;lt;... （ここに configure オプションの一覧） ...&amp;gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;8-動作確認&quot;&gt;8. 動作確認&lt;/h3&gt;

&lt;p&gt;（過去記事「&lt;a href=&quot;/2015/08/09/linux-mint-groonga-installation-by-src/&quot; title=&quot;Linux Mint - Groonga インストール（by ソースビルド）！&quot;&gt;Linux Mint - Groonga インストール（by ソースビルド）！&lt;/a&gt;」を参照）&lt;/p&gt;

&lt;h3 id=&quot;9-参考サイト&quot;&gt;9. 参考サイト&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;https://groonga.org/ja/&quot; title=&quot;Groonga - カラムストア機能付き全文検索エンジン&quot;&gt;Groonga - カラムストア機能付き全文検索エンジン&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;hr /&gt;

&lt;p&gt;以上。&lt;/p&gt;</content><author><name>mk-mode.com</name></author><category term="サーバ構築" /><category term="Debian" /><category term="Linux" /><category term="Groonga" /><summary type="html">Debian GNU/Linux 11 (bullseye) にカラムストア機能付き全文検索エンジン Groonga を Groonga の公式リポジトリを使用して導入する方法についての記録です。 以前古いバージョンでの作業時に残していた記録を参考に作業を行い、今回更新した作業記録を貼付する形式の内容となっています。 （当然ながら、興味がなければスルーしてください）</summary></entry><entry><title type="html">Debian 11 (bullseye) - Postfix ログ解析！</title><link href="https://komasaru.github.io/2022/01/05/debian-11-postfix-log-analysis/" rel="alternate" type="text/html" title="Debian 11 (bullseye) - Postfix ログ解析！" /><published>2022-01-05T00:20:00+09:00</published><updated>2022-01-05T00:20:00+09:00</updated><id>https://komasaru.github.io/2022/01/05/debian-11-postfix-log-analysis</id><content type="html" xml:base="https://komasaru.github.io/2022/01/05/debian-11-postfix-log-analysis/">&lt;p&gt;Debian GNU/Linux 11 (bullseye) に導入した SMTP サーバ Postfix のログを解析する方法についての記録です。&lt;/p&gt;

&lt;p&gt;以前古いバージョンでの作業時に残していた記録を参考に作業を行い、今回更新した作業記録を貼付する形式の内容となっています。&lt;br /&gt;
（当然ながら、興味がなければスルーしてください）&lt;/p&gt;

&lt;!--more--&gt;

&lt;h3 id=&quot;0-前提条件&quot;&gt;0. 前提条件&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;Debian GNU/Linux 11.0.0 (bullseye; 64bit) での作業を想定。&lt;/li&gt;
  &lt;li&gt;接続元のマシンも Debian GNU/Linux 11 (bullseye; 64bit) を想定。&lt;/li&gt;
  &lt;li&gt;SMTP サーバ Postfix を「&lt;a href=&quot;/2021/12/08/debian-11-postfix-installation&quot; title=&quot;Debian 11 (bullseye) - SMTP サーバ Postfix 構築！&quot;&gt;Debian 11 (bullseye) - SMTP サーバ Postfix 構築！&lt;/a&gt;」の方法で導入済み。&lt;/li&gt;
  &lt;li&gt;ログローテート（&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;logrotate&lt;/code&gt;）でメールログがローテーションされていることを想定。（デフォルトでなっているはず）&lt;/li&gt;
  &lt;li&gt;root ユーザでの作業を想定。&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;1-pflogsumm-のインストール&quot;&gt;1. pflogsumm のインストール&lt;/h3&gt;

&lt;p&gt;Postfix のログ解析ツールである pflogsumm を、以下のようにしてインストールする。&lt;/p&gt;

&lt;div class=&quot;language-text highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# apt -y install pflogsumm
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;2-pflogsumm-実行用スクリプトの作成&quot;&gt;2. pflogsumm 実行用スクリプトの作成&lt;/h3&gt;

&lt;p&gt;pflogsumm を実行するスクリプト &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;pflogsumm_report&lt;/code&gt; を以下のように作成する。&lt;br /&gt;
単純に &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;pflogsumm&lt;/code&gt; コマンドを実行するだけでもレポートはできるが、それだとログローテートしている場合に正常に取得できない部分も発生する可能性があるので、それを考慮している。&lt;br /&gt;
また、以下のスクリプトでは前日のメールログを解析し、結果を &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;postmaster&lt;/code&gt; 宛にメール送信している。&lt;/p&gt;

&lt;p&gt;File: &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;pflogsumm_report&lt;/code&gt;&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-bash&quot; data-lang=&quot;bash&quot;&gt;&lt;span class=&quot;c&quot;&gt;#!/bin/bash&lt;/span&gt;

&lt;span class=&quot;nv&quot;&gt;LANG&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;C
&lt;span class=&quot;nv&quot;&gt;MAILLOG&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;&apos;mktemp&apos;&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;for &lt;/span&gt;log &lt;span class=&quot;k&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;sb&quot;&gt;`&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;ls&lt;/span&gt; /var/log/mail.log&lt;span class=&quot;k&quot;&gt;*&lt;/span&gt;|sort &lt;span class=&quot;nt&quot;&gt;-r&lt;/span&gt;&lt;span class=&quot;sb&quot;&gt;`&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;do
    &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;cat&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$log&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$MAILLOG&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;done
&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;REPORT&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;sb&quot;&gt;`&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;mktemp&lt;/span&gt;&lt;span class=&quot;sb&quot;&gt;`&lt;/span&gt;
pflogsumm &lt;span class=&quot;nt&quot;&gt;--problems_first&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;--verbose_msg_detail&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;--mailq&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-d&lt;/span&gt; yesterday &lt;span class=&quot;nv&quot;&gt;$MAILLOG&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$REPORT&lt;/span&gt;
&lt;span class=&quot;nb&quot;&gt;cat&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$REPORT&lt;/span&gt; | mail &lt;span class=&quot;nt&quot;&gt;-s&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;sb&quot;&gt;`&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;head&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-1&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$REPORT&lt;/span&gt;&lt;span class=&quot;sb&quot;&gt;`&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt; in &lt;/span&gt;&lt;span class=&quot;sb&quot;&gt;`&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;uname&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-n&lt;/span&gt;&lt;span class=&quot;sb&quot;&gt;`&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt; postmaster
&lt;span class=&quot;nb&quot;&gt;rm&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-f&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$MAILLOG&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$REPORT&lt;/span&gt;

&lt;span class=&quot;nb&quot;&gt;exit&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;p&gt;スクリプト内のメール送信コマンド &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;mail&lt;/code&gt; が使用できない場合は、&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;mailutils&lt;/code&gt; or &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;heirloom-mailx&lt;/code&gt; or &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;bsd-mailx&lt;/code&gt; 等をインストールする。複数ある場合は、&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;update-alternatives --config mailx&lt;/code&gt; でデフォルト設定をする。&lt;/p&gt;

&lt;p&gt;なお、ログローテートしていない場合は、もっと簡単なスクリプトにすることも可能であるし、&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;pflogsumm&lt;/code&gt; コマンドを直接実行して運用してもよい。&lt;/p&gt;

&lt;h3 id=&quot;3-実行権限の付与&quot;&gt;3. 実行権限の付与&lt;/h3&gt;

&lt;div class=&quot;language-text highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# chmod 700 pflogsumm_report
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;4-スクリプトの実行&quot;&gt;4. スクリプトの実行&lt;/h3&gt;

&lt;p&gt;作成したスクリプトを実行してみる。&lt;br /&gt;
問題がなければ、 postmaster 宛にメールが送信されるはずである。&lt;/p&gt;

&lt;div class=&quot;language-text highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# ./pflogsumm_report
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;5-自動実行の設定&quot;&gt;5. 自動実行の設定&lt;/h3&gt;

&lt;p&gt;毎日自動で実行するように cron 登録する。&lt;/p&gt;

&lt;div class=&quot;language-text highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# mv pflogsumm_report /etc/cron.daily/
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;hr /&gt;

&lt;p&gt;以上。&lt;/p&gt;</content><author><name>mk-mode.com</name></author><category term="サーバ構築" /><category term="Debian" /><category term="Linux" /><category term="Postfix" /><summary type="html">Debian GNU/Linux 11 (bullseye) に導入した SMTP サーバ Postfix のログを解析する方法についての記録です。 以前古いバージョンでの作業時に残していた記録を参考に作業を行い、今回更新した作業記録を貼付する形式の内容となっています。 （当然ながら、興味がなければスルーしてください）</summary></entry><entry><title type="html">2021年 - ツイート集計！</title><link href="https://komasaru.github.io/2022/01/02/tweet-summary-2021/" rel="alternate" type="text/html" title="2021年 - ツイート集計！" /><published>2022-01-02T00:20:00+09:00</published><updated>2022-01-02T00:20:00+09:00</updated><id>https://komasaru.github.io/2022/01/02/tweet-summary-2021</id><content type="html" xml:base="https://komasaru.github.io/2022/01/02/tweet-summary-2021/">&lt;p&gt;改めまして、旧年明けまして、新年おめでとうございます。&lt;/p&gt;

&lt;p&gt;2021年の Twitter でのツイート（私用で主として使用しているアカウントのみ）を Ruby で集計してみました。&lt;/p&gt;

&lt;p&gt;当方は、ツイートは全て自宅サーバ(Debian GNU/Linux)上のデータベース(MariaDB)に保存しています。（実際には Ruby + Twitter API で本家からデータを取得して保存）&lt;/p&gt;

&lt;p&gt;ほとんど SQL で集計可能でしたが、品詞・単語別の集計は形態素解析エンジン MeCab を使用しました。&lt;/p&gt;

&lt;!--more--&gt;

&lt;p&gt;集計内容は以下のとおり。&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;月別ツイート数&lt;/li&gt;
  &lt;li&gt;曜日別ツイート数&lt;/li&gt;
  &lt;li&gt;時間別ツイート数&lt;/li&gt;
  &lt;li&gt;投稿元別ツイート数&lt;/li&gt;
  &lt;li&gt;文字数別ツイート数&lt;/li&gt;
  &lt;li&gt;1日当たりツイート数別集計&lt;/li&gt;
  &lt;li&gt;品詞別出現回数&lt;/li&gt;
  &lt;li&gt;単語別出現回数&lt;/li&gt;
&lt;/ol&gt;

&lt;h3 id=&quot;1-月別ツイート数&quot;&gt;1. 月別ツイート数&lt;/h3&gt;

&lt;div class=&quot;language-text highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;[ 年  月 ]  [件数]  [ 比 率 ]
2021年01月     524  (  7.48%)
2021年02月     442  (  6.31%)
2021年03月     493  (  7.04%)
2021年04月     494  (  7.05%)
2021年05月     522  (  7.45%)
2021年06月     431  (  6.15%)
2021年07月     887  ( 12.66%)
2021年08月     876  ( 12.50%)
2021年09月     567  (  8.09%)
2021年10月     632  (  9.02%)
2021年11月     539  (  7.69%)
2021年12月     599  (  8.55%)
[ 合  計 ]   7,006  (100.00%)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;例年、月 400 〜 700 ツイートだが、2021年は夏季に 800 〜 900 と少し多めだった。&lt;br /&gt;
台風関連のリツイートでしょう。&lt;/p&gt;

&lt;h3 id=&quot;2-曜日別ツイート数&quot;&gt;2. 曜日別ツイート数&lt;/h3&gt;

&lt;div class=&quot;language-text highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;[ 曜  日 ]  [件数]  [ 比 率 ]
  日曜日       862  ( 12.30%)
  月曜日     1,161  ( 16.57%)
  火曜日       956  ( 13.65%)
  水曜日     1,020  ( 14.56%)
  木曜日     1,049  ( 14.97%)
  金曜日     1,052  ( 15.02%)
  土曜日       906  ( 12.93%)
[ 合  計 ]   7,006  (100.00%)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;例年どおり、ほぼ平均的だが、土・日曜日が若干少なめだった。&lt;/p&gt;

&lt;h3 id=&quot;3-時間別ツイート数&quot;&gt;3. 時間別ツイート数&lt;/h3&gt;

&lt;div class=&quot;language-text highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;[ 時  間 ]  [件数]  [ 比 率 ]
  00時台     1,236  ( 17.64%)
  01時台        98  (  1.40%)
  02時台        66  (  0.94%)
  03時台        91  (  1.30%)
  04時台       143  (  2.04%)
  05時台       218  (  3.11%)
  06時台       113  (  1.61%)
  07時台       146  (  2.08%)
  08時台       179  (  2.55%)
  09時台       264  (  3.77%)
  10時台       263  (  3.75%)
  11時台       242  (  3.45%)
  12時台       580  (  8.28%)
  13時台       174  (  2.48%)
  14時台       275  (  3.93%)
  15時台       227  (  3.24%)
  16時台       408  (  5.82%)
  17時台       201  (  2.87%)
  18時台     1,024  ( 14.62%)
  19時台       154  (  2.20%)
  20時台       410  (  5.85%)
  21時台       182  (  2.60%)
  22時台       187  (  2.67%)
  23時台       125  (  1.78%)
[ 合  計 ]   7,006  (100.00%)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;通常のツイートは、自身の生活スタイルの関係で18時台が多い。&lt;br /&gt;
0時台、12時台は Bot によるツイートがほとんど。&lt;/p&gt;

&lt;h3 id=&quot;4-投稿元別ツイート数&quot;&gt;4. 投稿元別ツイート数&lt;/h3&gt;

&lt;div class=&quot;language-text highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;[ 投稿元              ]  [件数]  [ 比 率 ]
  mk-mode BOT             5,986  ( 85.44%)
  TwitVim                   479  (  6.84%)
  TweetDeck                 326  (  4.65%)
  Twitter Web App           141  (  2.01%)
  IFTTT                      53  (  0.76%)
  Twitter for Android        20  (  0.29%)
  Instagram                   1  (  0.01%)
[ 合  計 ]                7,006  (100.00%)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Bot 以外では、生活スタイルの関係でテキストエディタの Vim や TweetDeck からツイートすることが多い。&lt;br /&gt;
この私用アカウントでは、出先（携帯端末等）からツイートすることはほとんどない。&lt;/p&gt;

&lt;h3 id=&quot;5-文字数別ツイート数&quot;&gt;5. 文字数別ツイート数&lt;/h3&gt;

&lt;div class=&quot;language-text highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;[ 文字数 ]  [件数]  [ 比 率 ]
 〜 20文字      10  (  0.14%)
 〜 30文字      19  (  0.27%)
 〜 40文字      51  (  0.73%)
 〜 50文字     104  (  1.48%)
 〜 60文字     214  (  3.05%)
 〜 70文字     303  (  4.32%)
 〜 80文字     725  ( 10.35%)
 〜 90文字     343  (  4.90%)
 〜100文字     443  (  6.32%)
 〜110文字     322  (  4.60%)
 〜120文字   2,062  ( 29.43%)
 〜130文字     287  (  4.10%)
 〜140文字   2,122  ( 30.29%)
 〜180文字       1  (  0.01%)
[ 合  計 ]   7,006  (100.00%)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;文字数の少なすぎるツイートはほとんどなく、40字超のツイートが多い。&lt;br /&gt;
2017年途中から280文字までツイートできる仕様になっている（正確には、全角文字や半角ｶﾀｶﾅ等は1文字を2文字換算）が、 Twitter API でツイートを取得した時点で140文字に切り捨てられているため、多くの140文字超のツイートは全て140文字として集計している。&lt;br /&gt;
それでも140文字を超えるツイートが存在するのは、ツイート時に BitLy 短縮の URL だったのが Twitter API で取得し直すと Twitter 標準の t.co 短縮になり文字数が増えるため、または、その他。&lt;/p&gt;

&lt;h3 id=&quot;6-1日当たりツイート数別集計&quot;&gt;6. 1日当たりツイート数別集計&lt;/h3&gt;

&lt;div class=&quot;language-text highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;[ Tweets ]  [日数]  [ 比 率 ]
     6           2  (  0.55%)
     7           2  (  0.55%)
     8           3  (  0.82%)
     9           6  (  1.64%)
    10          14  (  3.84%)
    11          14  (  3.84%)
    12          23  (  6.30%)
    13          24  (  6.58%)
    14          26  (  7.12%)
    15          29  (  7.95%)
    16          27  (  7.40%)
    17          25  (  6.85%)
    18          21  (  5.75%)
    19          23  (  6.30%)
    20          16  (  4.38%)
    21          18  (  4.93%)
    22          20  (  5.48%)
    23          10  (  2.74%)
    24          10  (  2.74%)
    25           7  (  1.92%)
    26           4  (  1.10%)
    27           7  (  1.92%)
    28           3  (  0.82%)
    29           5  (  1.37%)
    30           3  (  0.82%)
    31           3  (  0.82%)
    32           3  (  0.82%)
    33           1  (  0.27%)
    34           2  (  0.55%)
    36           4  (  1.10%)
    39           2  (  0.55%)
    42           1  (  0.27%)
    44           1  (  0.27%)
    48           1  (  0.27%)
    54           1  (  0.27%)
    59           1  (  0.27%)
   114           1  (  0.27%)
   138           1  (  0.27%)
   143           1  (  0.27%)
[ 合  計 ]     365  (100.00%)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;例年どおり、1日に10〜20回強ツイートすることが多かったようだ。また、Bot による日次ツイートがあるので1回もツイートしなかった日はなかった。&lt;br /&gt;
（ちなみに、1回もツイートしなかった日は、2011年7月7日のアカウント開設以来1日もない）&lt;/p&gt;

&lt;h3 id=&quot;7-品詞別出現回数&quot;&gt;7. 品詞別出現回数&lt;/h3&gt;

&lt;p&gt;形態素解析エンジン MeCab を使用して品詞別に集計してみた。&lt;/p&gt;

&lt;div class=&quot;language-text highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;[ 品詞   ]  [ 出現回数 ]
  名詞         241,372
  記号         186,672
  助詞          23,097
  動詞           7,281
  助動詞         3,810
  接頭詞         2,031
  形容詞         1,943
  副詞             660
  接続詞           424
  連体詞           220
  感動詞            99
[ 合  計 ]     467,609 語
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;当然ながら、名詞や記号が多い。フィラーとは「えーと」、「あのー」のような、文と文の間を埋めるような単語のこと。&lt;br /&gt;
いつもながら、全体的に「こういうものなんだ」と実感する程度。&lt;/p&gt;

&lt;h3 id=&quot;8-単語別出現回数&quot;&gt;8. 単語別出現回数&lt;/h3&gt;

&lt;p&gt;1年間に出現した単語を集計してみた。（100回以上出現した単語を掲載）&lt;/p&gt;

&lt;div class=&quot;language-text highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;[ 単語               ]  [ 品詞   ]  [ 出現回数 ]
  :                       記号          24,205
  /                       記号          22,747
  0                       名詞          21,074
  1                       名詞          16,479
  2                       名詞          14,890
  #                       記号          11,942
  .                       記号          11,350
  3                       名詞          11,275
  8                       名詞           9,264
  t                       記号           7,844
  o                       記号           7,750
  https                   名詞           7,354
  5                       名詞           7,322
  c                       記号           7,199
  （                      記号           6,893
  ）                      記号           6,866
  4                       名詞           6,699
  の                      助詞           6,437
  ：                      記号           5,851
  【                      記号           5,498
  】                      記号           5,498
  7                       名詞           5,351
  松江                    名詞           5,166
  日                      名詞           5,002
  、                      記号           4,824
  6                       名詞           4,667
  R                       記号           4,650
  T                       記号           4,134
  @                       記号           4,066
  消防                    名詞           3,901
  9                       名詞           3,900
  Matsue                  名詞           3,682
  -                       記号           3,152
  災害                    名詞           3,066
  。                      記号           2,980
  ［                      記号           2,953
  ］                      記号           2,953
  市                      名詞           2,790
  に                      助詞           2,671
  [                       記号           2,375
  ]                       記号           2,375
  Japan                   名詞           2,233
  現在                    名詞           2,073
  (                       記号           2,009
  l                       記号           1,964
  は                      助詞           1,964
  Mk                      名詞           1,957
  が                      助詞           1,942
  本部                    名詞           1,934
  CCv                     名詞           1,929
  ?                       記号           1,759
  発生                    名詞           1,729
  )                       記号           1,719
  て                      助詞           1,703
  C                       記号           1,671
  q                       記号           1,611
  f                       記号           1,586
  町                      名詞           1,578
  し                      動詞           1,566
  ※                      記号           1,503
  Shimane                 名詞           1,499
  …                      記号           1,494
  °                      名詞           1,485
  た                      助動詞         1,404
  を                      助詞           1,351
  Wn                      名詞           1,322
  月                      名詞           1,308
  で                      助詞           1,300
  県                      名詞           1,238
  ▼                      記号           1,111
  N                       記号           1,109
  気象庁                  名詞           1,064
  島根                    名詞           1,023
  と                      助詞           1,002
  年                      名詞             992
  ・                      記号             984
  情報                    名詞             984
  yqzbmTADLW              名詞             962
  救急                    名詞             849
  支援                    名詞             848
  備忘録                  名詞             841
  速度                    名詞             800
  大雨                    名詞             800
  高度                    名詞             783
  さ                      名詞             760
  ,                       記号             741
  南中                    名詞             736
  入                      接頭詞           728
  中                      名詞             701
  通過                    名詞             693
  警戒                    名詞             687
  vJRQk                   名詞             607
  ぶり                    名詞             595
  m                       記号             590
  →                      記号             590
  名                      名詞             587
  以来                    名詞             584
  +                       記号             581
  機体                    名詞             576
  便                      名詞             570
  Fr                      名詞             569
  ft                      名詞             568
  S                       記号             567
  に関する                助詞             567
  終了                    名詞             539
  km                      名詞             536
  MODE                    名詞             530
  k                       記号             529
  から                    助詞             526
  ;                       記号             524
  気象                    名詞             521
  警報                    名詞             521
  注意                    名詞             506
  害                      名詞             499
  E                       記号             496
  土砂                    名詞             486
  い                      動詞             478
  まで                    助詞             475
  ください                動詞             464
  気温                    名詞             455
  も                      助詞             443
  方向                    名詞             441
  や                      助詞             438
  位置                    名詞             425
  s                       記号             425
  「                      記号             425
  」                      記号             423
  する                    動詞             417
  BLOG                    名詞             416
  いる                    動詞             414
  ！                      記号             410
  症                      名詞             392
  今日                    名詞             391
  旧暦                    名詞             383
  感染                    名詞             381
  再                      接頭詞           380
  出                      名詞             375
  浸水                    名詞             369
  正午                    名詞             368
  日の出                  名詞             368
  六                      名詞             364
  時                      名詞             364
  曜                      名詞             362
  干支                    名詞             362
  月齢                    名詞             362
  頃                      名詞             362
  な                      助動詞           358
  丁目                    名詞             357
  第                      接頭詞           351
  にかけて                助詞             349
  ない                    助動詞           339
  東部                    名詞             329
  洪水                    名詞             314
  なる                    動詞             313
  避難                    名詞             311
  性                      名詞             305
  xhhy                    名詞             303
  yqzbmTjAJW              名詞             303
  注意報                  名詞             298
  可能                    名詞             295
  等                      名詞             294
  機                      名詞             289
  vDcbbgA                 名詞             287
  A                       記号             285
  です                    助動詞           271
  🔶                      記号             270
  明日                    名詞             269
  台風                    名詞             267
  よう                    名詞             266
  ので                    助詞             265
  突風                    名詞             264
  ﾟ                      名詞             260
  最大                    名詞             260
  地方                    名詞             258
  ➡                      名詞             258
  レベル                  名詞             257
  ℃                      名詞             253
  号                      名詞             250
  zP                      名詞             247
  ℃)                     名詞             245
  こと                    名詞             244
  低                      形容詞           241
  河川                    名詞             241
  さ                      動詞             240
  ISS                     名詞             240
  P                       記号             240
  度                      名詞             236
  確認                    名詞             236
  11月                    名詞             235
  6月                     名詞             235
  9月                     名詞             234
  震度                    名詞             230
  8月                     名詞             228
  5月                     名詞             226
  危険                    名詞             225
  7月                     名詞             225
  について                助詞             221
  中国地方                名詞             221
  角                      名詞             220
  中国                    名詞             219
  発表                    名詞             219
  距離                    名詞             218
  れ                      動詞             217
  ます                    助動詞           213
  落雷                    名詞             213
  震源                    名詞             212
  気圧                    名詞             210
  10月                    名詞             208
  きぼう                  名詞             207
  コロナ                  名詞             206
  方位                    名詞             205
  など                    助詞             205
  ある                    動詞             204
  日時                    名詞             202
  新型                    名詞             201
  仰角                    名詞             201
  直線                    名詞             201
  JA                      名詞             200
  ウイルス                名詞             198
  %                       記号             198
  12月                    名詞             196
  最低                    名詞             195
  Pr                      名詞             192
  3月                     名詞             192
  激しい                  形容詞           189
  患者                    名詞             188
  mm                      名詞             188
  及び                    接続詞           186
  米                      名詞             186
  4月                     名詞             185
  対策                    名詞             183
  救助                    名詞             183
  1月                     名詞             182
  氾濫                    名詞             181
  計算                    名詞             180
  M                       記号             180
  JASDF                   名詞             180
  者                      名詞             179
  B                       記号             178
  yWtoO                   名詞             177
  降水                    名詞             176
  だ                      助動詞           174
  的                      名詞             171
  量                      名詞             171
  内                      名詞             170
  風速                    名詞             170
  雷                      名詞             168
  行動                    名詞             167
  夜                      名詞             165
  増水                    名詞             164
  強い                    形容詞           163
  室                      名詞             162
  ⬇                      名詞             161
  大雪                    名詞             160
  か                      助詞             160
  心構え                  名詞             157
  高める                  動詞             157
  ⬆                      名詞             157
  2月                     名詞             156
  による                  助詞             154
  高い                    形容詞           153
  竜巻                    名詞             153
  *                       記号             151
  個人                    名詞             150
  非常                    名詞             148
  火災                    名詞             146
  通知                    名詞             146
  D                       記号             145
  報                      名詞             145
  人                      名詞             144
  最高                    名詞             142
  期間                    名詞             142
  なっ                    動詞             142
  CC                      名詞             142
  で                      助動詞           140
  ため                    名詞             139
  今後                    名詞             138
  高波                    名詞             137
  降ひょう                名詞             137
  hPa                     名詞             136
  う                      助動詞           135
  美保関                  名詞             133
  の                      名詞             133
  十分                    名詞             132
  JMSDF                   名詞             132
  見込み                  名詞             131
  SQUAWK                  名詞             130
  津波                    名詞             129
  深                      形容詞           129
  規模                    名詞             129
  高                      形容詞           128
  １                      名詞             127
  雨                      名詞             127
  ／                      記号             123
  継続                    名詞             121
  また                    接続詞           119
  瞬間                    名詞             119
  座標                    名詞             119
  東出雲                  名詞             118
  級                      名詞             116
  Debian                  名詞             115
  時間                    名詞             115
  回                      名詞             115
  Vh                      名詞             114
  分                      名詞             114
  水                      名詞             114
  暴風                    名詞             114
  緊急                    名詞             113
  まし                    助動詞           111
  湿度                    名詞             110
  遅く                    形容詞           110
  おそれ                  名詞             109
  その                    連体詞           108
  多                      形容詞           108
  金                      名詞             107
  あり                    動詞             107
  以上                    名詞             106
  土                      名詞             106
  だっ                    助動詞           106
  火                      名詞             105
  木                      名詞             104
  強                      形容詞           104
  ２                      名詞             104
  KCB                     名詞             103
  YGJ                     名詞             103
  W                       記号             102
  和                      名詞             102
  自火                    名詞             101
  鳴動                    名詞             101
  令                      接頭詞           101
  雪                      名詞             100
  :                        :                :
  :                        :                :
  :                        :                :
[ 合  計 ]                             467,609 語
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;例年どおり、半角記号の &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;:&lt;/code&gt;, &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;/&lt;/code&gt;, 半角英数字、全角ひらがなの &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;の&lt;/code&gt; が多かった。&lt;/p&gt;

&lt;hr /&gt;

&lt;p&gt;単純に数を集計するだけではなく、形態素解析を利用して集計するのも面白いものです。&lt;/p&gt;

&lt;p&gt;以上。&lt;/p&gt;</content><author><name>mk-mode.com</name></author><category term="SNS" /><category term="Twitter" /><category term="Ruby" /><category term="MySQL" /><category term="MariaDB" /><category term="MeCab" /><summary type="html">改めまして、旧年明けまして、新年おめでとうございます。 2021年の Twitter でのツイート（私用で主として使用しているアカウントのみ）を Ruby で集計してみました。 当方は、ツイートは全て自宅サーバ(Debian GNU/Linux)上のデータベース(MariaDB)に保存しています。（実際には Ruby + Twitter API で本家からデータを取得して保存） ほとんど SQL で集計可能でしたが、品詞・単語別の集計は形態素解析エンジン MeCab を使用しました。</summary></entry><entry><title type="html">2021年12月 - OS・ブラウザ別アクセス状況！（＆新年のご挨拶）</title><link href="https://komasaru.github.io/2022/01/01/blog-access/" rel="alternate" type="text/html" title="2021年12月 - OS・ブラウザ別アクセス状況！（＆新年のご挨拶）" /><published>2022-01-01T00:20:00+09:00</published><updated>2022-01-01T00:20:00+09:00</updated><id>https://komasaru.github.io/2022/01/01/blog-access</id><content type="html" xml:base="https://komasaru.github.io/2022/01/01/blog-access/">&lt;p&gt;旧年明けまして、新年おめでとうございます。&lt;/p&gt;

&lt;p&gt;旧年中はお世話になりました。 本年もどうぞよろしくお願いします。&lt;/p&gt;

&lt;p&gt;話は変わりまして、先月12月分の当ブログアクセス状況を公開します。（※自分用の記録）&lt;/p&gt;

&lt;!--more--&gt;

&lt;h3 id=&quot;1-アクセスをos別に集計&quot;&gt;1. アクセスをOS別に集計&lt;/h3&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th style=&quot;text-align: left&quot;&gt;OS&lt;/th&gt;
      &lt;th style=&quot;text-align: right&quot;&gt;PageViews&lt;/th&gt;
      &lt;th style=&quot;text-align: right&quot;&gt;比率(%)&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;Windows&lt;/td&gt;
      &lt;td style=&quot;text-align: right&quot;&gt;22,278&lt;/td&gt;
      &lt;td style=&quot;text-align: right&quot;&gt;65.3678&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;Mac OS&lt;/td&gt;
      &lt;td style=&quot;text-align: right&quot;&gt;8,894&lt;/td&gt;
      &lt;td style=&quot;text-align: right&quot;&gt;26.0967&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;Android&lt;/td&gt;
      &lt;td style=&quot;text-align: right&quot;&gt;1,177&lt;/td&gt;
      &lt;td style=&quot;text-align: right&quot;&gt;3.4535&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;Linux&lt;/td&gt;
      &lt;td style=&quot;text-align: right&quot;&gt;1,168&lt;/td&gt;
      &lt;td style=&quot;text-align: right&quot;&gt;3.4271&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;Ubuntu Linux&lt;/td&gt;
      &lt;td style=&quot;text-align: right&quot;&gt;400&lt;/td&gt;
      &lt;td style=&quot;text-align: right&quot;&gt;1.1737&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;unknown&lt;/td&gt;
      &lt;td style=&quot;text-align: right&quot;&gt;129&lt;/td&gt;
      &lt;td style=&quot;text-align: right&quot;&gt;0.3785&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;Fedora Linux&lt;/td&gt;
      &lt;td style=&quot;text-align: right&quot;&gt;21&lt;/td&gt;
      &lt;td style=&quot;text-align: right&quot;&gt;0.0616&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;FreeBSD&lt;/td&gt;
      &lt;td style=&quot;text-align: right&quot;&gt;12&lt;/td&gt;
      &lt;td style=&quot;text-align: right&quot;&gt;0.0352&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;NetBSD&lt;/td&gt;
      &lt;td style=&quot;text-align: right&quot;&gt;1&lt;/td&gt;
      &lt;td style=&quot;text-align: right&quot;&gt;0.0029&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;Debian GNU/Linux&lt;/td&gt;
      &lt;td style=&quot;text-align: right&quot;&gt;1&lt;/td&gt;
      &lt;td style=&quot;text-align: right&quot;&gt;0.0029&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
  &lt;tfoot&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;合　計&lt;/td&gt;
      &lt;td style=&quot;text-align: right&quot;&gt;34,081&lt;/td&gt;
      &lt;td style=&quot;text-align: right&quot;&gt;100.0000&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tfoot&gt;
&lt;/table&gt;

&lt;h3 id=&quot;2-アクセスをosバージョン別に集計&quot;&gt;2. アクセスをOS・バージョン別に集計&lt;/h3&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th style=&quot;text-align: left&quot;&gt;OS&lt;/th&gt;
      &lt;th style=&quot;text-align: left&quot;&gt;Version&lt;/th&gt;
      &lt;th style=&quot;text-align: right&quot;&gt;PageViews&lt;/th&gt;
      &lt;th style=&quot;text-align: right&quot;&gt;比率(%)&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;Windows&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;10&lt;/td&gt;
      &lt;td style=&quot;text-align: right&quot;&gt;17,537&lt;/td&gt;
      &lt;td style=&quot;text-align: right&quot;&gt;51.4568&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;Mac OS&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;X&lt;/td&gt;
      &lt;td style=&quot;text-align: right&quot;&gt;8,894&lt;/td&gt;
      &lt;td style=&quot;text-align: right&quot;&gt;26.0967&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;Windows&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;7&lt;/td&gt;
      &lt;td style=&quot;text-align: right&quot;&gt;4,384&lt;/td&gt;
      &lt;td style=&quot;text-align: right&quot;&gt;12.8635&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;Android&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;unknown&lt;/td&gt;
      &lt;td style=&quot;text-align: right&quot;&gt;1,177&lt;/td&gt;
      &lt;td style=&quot;text-align: right&quot;&gt;3.4535&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;Linux&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;unknown&lt;/td&gt;
      &lt;td style=&quot;text-align: right&quot;&gt;1,168&lt;/td&gt;
      &lt;td style=&quot;text-align: right&quot;&gt;3.4271&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;Ubuntu Linux&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;unknown&lt;/td&gt;
      &lt;td style=&quot;text-align: right&quot;&gt;400&lt;/td&gt;
      &lt;td style=&quot;text-align: right&quot;&gt;1.1737&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;Windows&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;8.1&lt;/td&gt;
      &lt;td style=&quot;text-align: right&quot;&gt;312&lt;/td&gt;
      &lt;td style=&quot;text-align: right&quot;&gt;0.9155&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;unknown&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;unknown&lt;/td&gt;
      &lt;td style=&quot;text-align: right&quot;&gt;129&lt;/td&gt;
      &lt;td style=&quot;text-align: right&quot;&gt;0.3785&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;Windows&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;8&lt;/td&gt;
      &lt;td style=&quot;text-align: right&quot;&gt;31&lt;/td&gt;
      &lt;td style=&quot;text-align: right&quot;&gt;0.0910&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;Fedora Linux&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;unknown&lt;/td&gt;
      &lt;td style=&quot;text-align: right&quot;&gt;21&lt;/td&gt;
      &lt;td style=&quot;text-align: right&quot;&gt;0.0616&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;FreeBSD&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;unknown&lt;/td&gt;
      &lt;td style=&quot;text-align: right&quot;&gt;12&lt;/td&gt;
      &lt;td style=&quot;text-align: right&quot;&gt;0.0352&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;Windows&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;XP&lt;/td&gt;
      &lt;td style=&quot;text-align: right&quot;&gt;9&lt;/td&gt;
      &lt;td style=&quot;text-align: right&quot;&gt;0.0264&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;Windows&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;Vista&lt;/td&gt;
      &lt;td style=&quot;text-align: right&quot;&gt;3&lt;/td&gt;
      &lt;td style=&quot;text-align: right&quot;&gt;0.0088&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;Windows&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;98&lt;/td&gt;
      &lt;td style=&quot;text-align: right&quot;&gt;2&lt;/td&gt;
      &lt;td style=&quot;text-align: right&quot;&gt;0.0059&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;NetBSD&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;unknown&lt;/td&gt;
      &lt;td style=&quot;text-align: right&quot;&gt;1&lt;/td&gt;
      &lt;td style=&quot;text-align: right&quot;&gt;0.0029&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;Debian GNU/Linux&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;unknown&lt;/td&gt;
      &lt;td style=&quot;text-align: right&quot;&gt;1&lt;/td&gt;
      &lt;td style=&quot;text-align: right&quot;&gt;0.0029&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
  &lt;tfoot&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;合　計&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt; &lt;/td&gt;
      &lt;td style=&quot;text-align: right&quot;&gt;34,081&lt;/td&gt;
      &lt;td style=&quot;text-align: right&quot;&gt;100.0000&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tfoot&gt;
&lt;/table&gt;

&lt;h3 id=&quot;3-アクセスをブラウザ別に集計&quot;&gt;3. アクセスをブラウザ別に集計&lt;/h3&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th style=&quot;text-align: left&quot;&gt;ブラウザ&lt;/th&gt;
      &lt;th style=&quot;text-align: right&quot;&gt;PageViews&lt;/th&gt;
      &lt;th style=&quot;text-align: right&quot;&gt;比率(%)&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;Chrome&lt;/td&gt;
      &lt;td style=&quot;text-align: right&quot;&gt;20,499&lt;/td&gt;
      &lt;td style=&quot;text-align: right&quot;&gt;60.1479&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;Safari&lt;/td&gt;
      &lt;td style=&quot;text-align: right&quot;&gt;5,839&lt;/td&gt;
      &lt;td style=&quot;text-align: right&quot;&gt;17.1327&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;Netscape Navigator&lt;/td&gt;
      &lt;td style=&quot;text-align: right&quot;&gt;4,291&lt;/td&gt;
      &lt;td style=&quot;text-align: right&quot;&gt;12.5906&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;Mozilla Firefox&lt;/td&gt;
      &lt;td style=&quot;text-align: right&quot;&gt;2,927&lt;/td&gt;
      &lt;td style=&quot;text-align: right&quot;&gt;8.5884&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;Internet Explorer&lt;/td&gt;
      &lt;td style=&quot;text-align: right&quot;&gt;511&lt;/td&gt;
      &lt;td style=&quot;text-align: right&quot;&gt;1.4994&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;unknown&lt;/td&gt;
      &lt;td style=&quot;text-align: right&quot;&gt;8&lt;/td&gt;
      &lt;td style=&quot;text-align: right&quot;&gt;0.0235&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;Mozilla&lt;/td&gt;
      &lt;td style=&quot;text-align: right&quot;&gt;3&lt;/td&gt;
      &lt;td style=&quot;text-align: right&quot;&gt;0.0088&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;Mozilla SeaMonkey&lt;/td&gt;
      &lt;td style=&quot;text-align: right&quot;&gt;2&lt;/td&gt;
      &lt;td style=&quot;text-align: right&quot;&gt;0.0059&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;Epiphany&lt;/td&gt;
      &lt;td style=&quot;text-align: right&quot;&gt;1&lt;/td&gt;
      &lt;td style=&quot;text-align: right&quot;&gt;0.0029&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
  &lt;tfoot&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;合　計&lt;/td&gt;
      &lt;td style=&quot;text-align: right&quot;&gt;34,081&lt;/td&gt;
      &lt;td style=&quot;text-align: right&quot;&gt;100.0000&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tfoot&gt;
&lt;/table&gt;

&lt;h3 id=&quot;4-アクセスをブラウザバージョン別に集計上位20件&quot;&gt;4. アクセスをブラウザ・バージョン別に集計（上位20件）&lt;/h3&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th style=&quot;text-align: left&quot;&gt;ブラウザ&lt;/th&gt;
      &lt;th style=&quot;text-align: left&quot;&gt;Version&lt;/th&gt;
      &lt;th style=&quot;text-align: right&quot;&gt;PageViews&lt;/th&gt;
      &lt;th style=&quot;text-align: right&quot;&gt;比率(%)&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;Chrome&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;96.0.4664.110&lt;/td&gt;
      &lt;td style=&quot;text-align: right&quot;&gt;7,279&lt;/td&gt;
      &lt;td style=&quot;text-align: right&quot;&gt;21.3579&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;Chrome&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;96.0.4664.45&lt;/td&gt;
      &lt;td style=&quot;text-align: right&quot;&gt;4,297&lt;/td&gt;
      &lt;td style=&quot;text-align: right&quot;&gt;12.6082&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;Netscape Navigator&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;5.0&lt;/td&gt;
      &lt;td style=&quot;text-align: right&quot;&gt;4,291&lt;/td&gt;
      &lt;td style=&quot;text-align: right&quot;&gt;12.5906&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;Chrome&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;96.0.4664.93&lt;/td&gt;
      &lt;td style=&quot;text-align: right&quot;&gt;3,571&lt;/td&gt;
      &lt;td style=&quot;text-align: right&quot;&gt;10.4780&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;Safari&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;9537.53&lt;/td&gt;
      &lt;td style=&quot;text-align: right&quot;&gt;2,668&lt;/td&gt;
      &lt;td style=&quot;text-align: right&quot;&gt;7.8284&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;Chrome&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;96.0.4664.55&lt;/td&gt;
      &lt;td style=&quot;text-align: right&quot;&gt;2,541&lt;/td&gt;
      &lt;td style=&quot;text-align: right&quot;&gt;7.4558&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;Safari&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;604.1&lt;/td&gt;
      &lt;td style=&quot;text-align: right&quot;&gt;2,145&lt;/td&gt;
      &lt;td style=&quot;text-align: right&quot;&gt;6.2938&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;Mozilla Firefox&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;95.0&lt;/td&gt;
      &lt;td style=&quot;text-align: right&quot;&gt;1,291&lt;/td&gt;
      &lt;td style=&quot;text-align: right&quot;&gt;3.7880&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;Safari&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;605.1.15&lt;/td&gt;
      &lt;td style=&quot;text-align: right&quot;&gt;1,003&lt;/td&gt;
      &lt;td style=&quot;text-align: right&quot;&gt;2.9430&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;Mozilla Firefox&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;94.0&lt;/td&gt;
      &lt;td style=&quot;text-align: right&quot;&gt;806&lt;/td&gt;
      &lt;td style=&quot;text-align: right&quot;&gt;2.3650&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;Chrome&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;95.0.4638.69&lt;/td&gt;
      &lt;td style=&quot;text-align: right&quot;&gt;639&lt;/td&gt;
      &lt;td style=&quot;text-align: right&quot;&gt;1.8749&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;Internet Explorer&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;11.0&lt;/td&gt;
      &lt;td style=&quot;text-align: right&quot;&gt;495&lt;/td&gt;
      &lt;td style=&quot;text-align: right&quot;&gt;1.4524&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;Chrome&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;96.0.4664.104&lt;/td&gt;
      &lt;td style=&quot;text-align: right&quot;&gt;422&lt;/td&gt;
      &lt;td style=&quot;text-align: right&quot;&gt;1.2382&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;Mozilla Firefox&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;78.0&lt;/td&gt;
      &lt;td style=&quot;text-align: right&quot;&gt;297&lt;/td&gt;
      &lt;td style=&quot;text-align: right&quot;&gt;0.8715&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;Chrome&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;94.0.4606.81&lt;/td&gt;
      &lt;td style=&quot;text-align: right&quot;&gt;254&lt;/td&gt;
      &lt;td style=&quot;text-align: right&quot;&gt;0.7453&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;Mozilla Firefox&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;91.0&lt;/td&gt;
      &lt;td style=&quot;text-align: right&quot;&gt;239&lt;/td&gt;
      &lt;td style=&quot;text-align: right&quot;&gt;0.7013&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;Chrome&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;96.0.4664.92&lt;/td&gt;
      &lt;td style=&quot;text-align: right&quot;&gt;177&lt;/td&gt;
      &lt;td style=&quot;text-align: right&quot;&gt;0.5194&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;Chrome&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;96.0.4664.113&lt;/td&gt;
      &lt;td style=&quot;text-align: right&quot;&gt;94&lt;/td&gt;
      &lt;td style=&quot;text-align: right&quot;&gt;0.2758&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;Chrome&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;95.0.4638.54&lt;/td&gt;
      &lt;td style=&quot;text-align: right&quot;&gt;89&lt;/td&gt;
      &lt;td style=&quot;text-align: right&quot;&gt;0.2611&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;Chrome&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;90.0.4430.210&lt;/td&gt;
      &lt;td style=&quot;text-align: right&quot;&gt;52&lt;/td&gt;
      &lt;td style=&quot;text-align: right&quot;&gt;0.1526&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;：&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;：&lt;/td&gt;
      &lt;td style=&quot;text-align: right&quot;&gt;：&lt;/td&gt;
      &lt;td style=&quot;text-align: right&quot;&gt;：&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
  &lt;tfoot&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;合　計&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt; &lt;/td&gt;
      &lt;td style=&quot;text-align: right&quot;&gt;34,081&lt;/td&gt;
      &lt;td style=&quot;text-align: right&quot;&gt;100.0000&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tfoot&gt;
&lt;/table&gt;

&lt;hr /&gt;

&lt;p&gt;以上。&lt;/p&gt;</content><author><name>mk-mode.com</name></author><category term="ブログ" /><category term="Jekyll" /><summary type="html">旧年明けまして、新年おめでとうございます。 旧年中はお世話になりました。 本年もどうぞよろしくお願いします。 話は変わりまして、先月12月分の当ブログアクセス状況を公開します。（※自分用の記録）</summary></entry></feed>