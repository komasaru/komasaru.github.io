<!doctype html>
<!--
  Minimal Mistakes Jekyll Theme 4.15.1 by Michael Rose
  Copyright 2013-2019 Michael Rose - mademistakes.com | @mmistakes
  Free for personal and commercial use under the MIT license
  https://github.com/mmistakes/minimal-mistakes/blob/master/LICENSE
-->
<html lang="ja" class="no-js">
  <head>
    <meta charset="utf-8">

<!-- begin _includes/seo.html --><title>Python - 多桁乗算（Toom-Cook 法 (3-way)）！ - mk-mode BLOG</title>
<meta name="description" content="これまで、「標準（筆算）法」や「Karatsuba 法」による多桁同士の乗算アルゴリズムの Python への実装方法を紹介しました。  Python - 多桁乗算（標準（筆算）法）！  Python - 多桁乗算（Karatsuba 法）！今回は、「Karatsuba 法」の上位にある「Toom-Cook 法」アルゴリズムを実装してみました。">



<meta property="og:type" content="article">
<meta property="og:locale" content="ja_JP">
<meta property="og:site_name" content="mk-mode BLOG">
<meta property="og:title" content="Python - 多桁乗算（Toom-Cook 法 (3-way)）！">
<meta property="og:url" content="https://komasaru.github.io/2018/03/22/python-big-digits-multiplication-toom-cook-3/">


  <meta property="og:description" content="これまで、「標準（筆算）法」や「Karatsuba 法」による多桁同士の乗算アルゴリズムの Python への実装方法を紹介しました。  Python - 多桁乗算（標準（筆算）法）！  Python - 多桁乗算（Karatsuba 法）！今回は、「Karatsuba 法」の上位にある「Toom-Cook 法」アルゴリズムを実装してみました。">



  <meta property="og:image" content="https://www.mk-mode.com/blog/assets/images/about_me.png">



  <meta name="twitter:site" content="@rsm_mzk">
  <meta name="twitter:title" content="Python - 多桁乗算（Toom-Cook 法 (3-way)）！">
  <meta name="twitter:description" content="これまで、「標準（筆算）法」や「Karatsuba 法」による多桁同士の乗算アルゴリズムの Python への実装方法を紹介しました。  Python - 多桁乗算（標準（筆算）法）！  Python - 多桁乗算（Karatsuba 法）！今回は、「Karatsuba 法」の上位にある「Toom-Cook 法」アルゴリズムを実装してみました。">
  <meta name="twitter:url" content="https://komasaru.github.io/2018/03/22/python-big-digits-multiplication-toom-cook-3/">

  
    <meta name="twitter:card" content="summary">
    
      <meta name="twitter:image" content="https://www.mk-mode.com/blog/assets/images/about_me.png">
    
  

  



  <meta property="article:published_time" content="2018-03-22T00:20:00+09:00">





  

  


<link rel="canonical" href="https://komasaru.github.io/2018/03/22/python-big-digits-multiplication-toom-cook-3/">





  <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "Organization",
      "url": "https://komasaru.github.io",
      "logo": "https://www.mk-mode.com/blog/assets/images/about_me.png"
    }
  </script>



  <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "Person",
      "name": "mk-mode.com",
      "url": "https://komasaru.github.io",
      "sameAs": null
    }
  </script>



  <meta name="google-site-verification" content="0kSwKhNo71fC7OeEFLllD3S11F8Pa-z_OqsBTSFxXAk" />





<!-- end _includes/seo.html -->


<link href="https://www.mk-mode.com/blog/atom.xml" type="application/atom+xml" rel="alternate" title="mk-mode BLOG Feed">

<!-- https://t.co/dKP3o1e -->
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script>
  document.documentElement.className = document.documentElement.className.replace(/\bno-js\b/g, '') + ' js ';
</script>

<!-- For all browsers -->
<link rel="stylesheet" href="/assets/css/main.css">

<!--[if IE ]>
  <style>
    /* old IE unsupported flexbox fixes */
    .greedy-nav .site-title {
      padding-right: 3em;
    }
    .greedy-nav button {
      position: absolute;
      top: 0;
      right: 0;
      height: 100%;
    }
  </style>
<![endif]-->


  
    
    <script defer src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
  


    <!-- start custom head snippets -->

<meta http-equiv="x-dns-prefetch-control" content="on">
<link rel="dns-prefetch" href="//pagead2.googlesyndication.com" />
<link rel="dns-prefetch" href="//googleads.g.doubleclick.net" />
<link rel="dns-prefetch" href="//tpc.googlesyndication.com" />
<link rel="dns-prefetch" href="//cm.g.doubleclick.net" />
<link rel="dns-prefetch" href="//www.gstatic.com" />
<link rel="dns-prefetch" href="//fonts.gstatic.com" />
<link rel='dns-prefetch' href='//use.fontawesome.com' />
<link rel="dns-prefetch" href="//twitter.com" />
<link rel="dns-prefetch" href="//www.facebook.com" />

<link rel="icon" href="/assets/images/favicon.ico">
<script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-18154748-1']);
  
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>
  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
    (adsbygoogle = window.adsbygoogle || []).push({
      google_ad_client: "ca-pub-7320193476057758",
      enable_page_level_ads: true
    });
  </script>


<!-- end custom head snippets -->

  </head>

  <body class="layout--single wide">

    <!--[if lt IE 9]>
<div class="notice--danger align-center" style="margin: 0;">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience.</div>
<![endif]-->

    

<div class="masthead">
  <div class="masthead__inner-wrap">
    <div class="masthead__menu">
      <nav id="site-nav" class="greedy-nav">
        
        <a class="site-title" href="/">mk-mode BLOG</a>
        <ul class="visible-links"><li class="masthead__menu-item">
              <a href="/year-archive/" >Archives</a>
            </li><li class="masthead__menu-item">
              <a href="/categories/" >Categories</a>
            </li><li class="masthead__menu-item">
              <a href="/tags/" >Tags</a>
            </li><li class="masthead__menu-item">
              <a href="https://www.mk-mode.com/rails/calendar/calendar" >Calendar</a>
            </li><li class="masthead__menu-item">
              <a href="https://www.mk-mode.com/rails/jmaxml" >JMAXML</a>
            </li><li class="masthead__menu-item">
              <a href="/privacy.html" >Privacy Policy</a>
            </li></ul>
        
        <button class="search__toggle" type="button">
          <span class="visually-hidden">Toggle search</span>
          <svg class="icon" width="16" height="16" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 15.99 16">
            <path d="M15.5,13.12L13.19,10.8a1.69,1.69,0,0,0-1.28-.55l-0.06-.06A6.5,6.5,0,0,0,5.77,0,6.5,6.5,0,0,0,2.46,11.59a6.47,6.47,0,0,0,7.74.26l0.05,0.05a1.65,1.65,0,0,0,.5,1.24l2.38,2.38A1.68,1.68,0,0,0,15.5,13.12ZM6.4,2A4.41,4.41,0,1,1,2,6.4,4.43,4.43,0,0,1,6.4,2Z" transform="translate(-.01)"></path>
          </svg>
        </button>
        
        <button class="greedy-nav__toggle hidden" type="button">
          <span class="visually-hidden">Toggle menu</span>
          <div class="navicon"></div>
        </button>
        <ul class="hidden-links hidden"></ul>
      </nav>
    </div>
  </div>
</div>


    <div class="initial-content">
      



<div id="main" role="main">
  
  <div class="sidebar sticky">
  


<div itemscope itemtype="https://schema.org/Person">

  
    <div class="author__avatar">
      

      
        <img src="/assets/images/about_me.png" alt="mk-mode.com" itemprop="image">
      
    </div>
  

  <div class="author__content">
    
      <h3 class="author__name" itemprop="name">mk-mode.com</h3>
    
    
      <p class="author__bio" itemprop="description">
        Linux, Debian, IT, Server, PG, Ruby, Rails, Python, C++, Fortran, PC, MariaDB, math, GIS, etc...
      </p>
    
  </div>

  <div class="author__urls-wrapper">
    <button class="btn btn--inverse">Follow</button>
    <ul class="author__urls social-icons">
      
        <li itemprop="homeLocation" itemscope itemtype="https://schema.org/Place">
          <i class="fas fa-fw fa-map-marker-alt" aria-hidden="true"></i> <span itemprop="name">Ruby City MATSUE</span>
        </li>
      

      
        
          
        
          
            <li><a href="https://www.mk-mode.com" rel="nofollow noopener noreferrer"><i class="fas fa-fw fa-link" aria-hidden="true"></i> mk-mode SITE</a></li>
          
        
          
            <li><a href="https://komasaru.github.io" rel="nofollow noopener noreferrer"><i class="fas fa-fw fa-link" aria-hidden="true"></i> mk-mode BLOG (clone)</a></li>
          
        
          
            <li><a href="https://mk-mode.tumblr.com" rel="nofollow noopener noreferrer"><i class="fas fa-fw fa-link" aria-hidden="true"></i> mk-mode TUMBLR</a></li>
          
        
          
            <li><a href="https://mk-ephemeris.tumblr.com" rel="nofollow noopener noreferrer"><i class="fas fa-fw fa-link" aria-hidden="true"></i> mk-mode EPHEMERIS</a></li>
          
        
          
            <li><a href="https://twitter.com/rsm_mzk" rel="nofollow noopener noreferrer"><i class="fab fa-fw fa-twitter-square" aria-hidden="true"></i> Twitter</a></li>
          
        
          
        
          
            <li><a href="https://github.com/komasaru" rel="nofollow noopener noreferrer"><i class="fab fa-fw fa-github" aria-hidden="true"></i> GitHub</a></li>
          
        
          
        
      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      <!--
  <li>
    <a href="http://link-to-whatever-social-network.com/user/" itemprop="sameAs" rel="nofollow noopener noreferrer">
      <i class="fas fa-fw" aria-hidden="true"></i> Custom Social Profile Link
    </a>
  </li>
-->
    </ul>
  </div>
</div>

  
  </div>


  <article class="page" itemscope itemtype="https://schema.org/CreativeWork">
    <meta itemprop="headline" content="Python - 多桁乗算（Toom-Cook 法 (3-way)）！">
    <meta itemprop="description" content="これまで、「標準（筆算）法」や「Karatsuba 法」による多桁同士の乗算アルゴリズムの Python への実装方法を紹介しました。  Python - 多桁乗算（標準（筆算）法）！  Python - 多桁乗算（Karatsuba 法）！今回は、「Karatsuba 法」の上位にある「Toom-Cook 法」アルゴリズムを実装してみました。">
    <meta itemprop="datePublished" content="March 22, 2018">
    

    <div class="page__inner-wrap">
      
        <header>
          <!-- div id="google-ad-1"></div -->
          <h1 id="page-title" class="page__title" itemprop="headline">Python - 多桁乗算（Toom-Cook 法 (3-way)）！
</h1>
          
          
            
            <p class="page__date"><small><strong><i class="fas fa-fw fa-calendar-alt" aria-hidden="true"></i> Updated:</strong> <time datetime="2018-03-22T00:20:00+09:00">2018-03-22 00:20</time></small></p>
          
        </header>
      
      <div id="google-ad-2"></div>
      <br />

      <section class="page__content" itemprop="text">
        
        <p>これまで、「標準（筆算）法」や「Karatsuba 法」による多桁同士の乗算アルゴリズムの Python への実装方法を紹介しました。</p>

<ul>
  <li><a href="/2018/03/16/python-big-digits-multiplication-normal" title="Python - 多桁乗算（標準（筆算）法）！">Python - 多桁乗算（標準（筆算）法）！</a></li>
  <li><a href="/2018/03/19/python-big-digits-multiplication-karatsuba" title="Python - 多桁乗算（Karatsuba 法）！">Python - 多桁乗算（Karatsuba 法）！</a></li>
</ul>

<p>今回は、「Karatsuba 法」の上位にある「Toom-Cook 法」アルゴリズムを実装してみました。</p>

<!--more-->

<h3 id="0-前提条件">0. 前提条件</h3>

<ul>
  <li>LMDE 2 (Linux Mint Debian Edition 2; 64bit) での作業を想定。</li>
  <li>Python 3.6.4 での作業を想定。</li>
  <li><strong>当方は他のバージョンとの共存環境であり、 <code class="language-plaintext highlighter-rouge">python3.6</code>, <code class="language-plaintext highlighter-rouge">pip3.6</code> で 3.6 系を使用するようにしている。（適宜、置き換えて考えること）</strong></li>
</ul>

<h3 id="1-アルゴリズムについて">1. アルゴリズムについて</h3>

<p>当ブログ過去記事を参照。</p>

<ul>
  <li><a href="/2013/04/29/cpp-big-multiply-toom-cook-3" title="C++ - 多桁乗算（Toom-Cook 法 (3-way)）！">C++ - 多桁乗算（Toom-Cook 法 (3-way)）！</a></li>
  <li><a href="/2013/04/30/ruby-big-multiply-toom-cook-3" title="Ruby - 多桁乗算（Toom-Cook 法 (3-way)）！">Ruby - 多桁乗算（Toom-Cook 法 (3-way)）！</a></li>
</ul>

<h3 id="2-python-スクリプトの作成">2. Python スクリプトの作成</h3>

<ul>
  <li>敢えてオブジェクト指向で作成している。</li>
  <li>Shebang ストリング（1行目）では、フルパスでコマンド指定している。（<a href="/2015/04/30/ruby-script-running-by-shebang/" title="Ruby - Shebang ストリングによるスクリプト実行！">当方の慣習</a>）</li>
  <li>数値計算ライブラリ NumPy を使用しない。（この程度の計算では、逆に2倍程度時間がかかってしまうため）</li>
  <li>必要であれば、スクリプト内の定数を変更する。</li>
</ul>

<p>File: <code class="language-plaintext highlighter-rouge">multiply_toom_cook_3.py</code></p>

<figure class="highlight"><pre><code class="language-python" data-lang="python"><table class="rouge-table"><tbody><tr><td class="gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
153
154
155
156
157
158
159
160
161
162
163
164
165
166
167
168
169
170
171
172
173
174
175
176
177
178
179
180
181
182
183
184
185
186
187
188
189
190
191
192
193
</pre></td><td class="code"><pre><span class="c1">#! /usr/local/bin/python3.6
</span><span class="s">"""
Multiplication of big-digit values with Toom-Cook 3-way method
"""</span>
<span class="kn">import</span> <span class="nn">random</span>
<span class="kn">import</span> <span class="nn">sys</span>
<span class="kn">import</span> <span class="nn">traceback</span>


<span class="k">class</span> <span class="nc">MultiplyToomCook3</span><span class="p">:</span>
    <span class="n">D_MAX</span> <span class="o">=</span> <span class="mi">729</span>  <span class="c1"># Maximum number of digits (power of 3)
</span>    <span class="n">D</span>     <span class="o">=</span> <span class="mi">729</span>  <span class="c1"># Digits of computation (&lt;= D_MAX)
</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="p">.</span><span class="n">a</span> <span class="o">=</span> <span class="p">[</span><span class="n">random</span><span class="p">.</span><span class="n">randrange</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span> <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="p">.</span><span class="n">D</span><span class="p">)]</span>
        <span class="bp">self</span><span class="p">.</span><span class="n">b</span> <span class="o">=</span> <span class="p">[</span><span class="n">random</span><span class="p">.</span><span class="n">randrange</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span> <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="p">.</span><span class="n">D</span><span class="p">)]</span>

    <span class="k">def</span> <span class="nf">compute</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="s">""" Computation of multiplication """</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="p">.</span><span class="n">D_MAX</span> <span class="o">-</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="p">.</span><span class="n">a</span><span class="p">)):</span>
                <span class="bp">self</span><span class="p">.</span><span class="n">a</span><span class="p">.</span><span class="n">append</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="p">.</span><span class="n">D_MAX</span> <span class="o">-</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="p">.</span><span class="n">b</span><span class="p">)):</span>
                <span class="bp">self</span><span class="p">.</span><span class="n">b</span><span class="p">.</span><span class="n">append</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
            <span class="n">z</span> <span class="o">=</span> <span class="bp">self</span><span class="p">.</span><span class="n">__multiply_toom_cook_3</span><span class="p">(</span><span class="bp">self</span><span class="p">.</span><span class="n">a</span><span class="p">,</span> <span class="bp">self</span><span class="p">.</span><span class="n">b</span><span class="p">)</span>
            <span class="n">z</span> <span class="o">=</span> <span class="bp">self</span><span class="p">.</span><span class="n">__do_carry</span><span class="p">(</span><span class="n">z</span><span class="p">)</span>
            <span class="bp">self</span><span class="p">.</span><span class="n">__display</span><span class="p">(</span><span class="bp">self</span><span class="p">.</span><span class="n">a</span><span class="p">,</span> <span class="bp">self</span><span class="p">.</span><span class="n">b</span><span class="p">,</span> <span class="n">z</span><span class="p">)</span>
        <span class="k">except</span> <span class="nb">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">raise</span>

    <span class="k">def</span> <span class="nf">__multiply_normal</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">):</span>
        <span class="s">""" Normal multiplication

        :param  list a
        :param  list b
        :return list z
        """</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">a_len</span><span class="p">,</span> <span class="n">b_len</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">a</span><span class="p">),</span> <span class="nb">len</span><span class="p">(</span><span class="n">b</span><span class="p">)</span>
            <span class="n">z</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span> <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">a_len</span> <span class="o">+</span> <span class="n">b_len</span><span class="p">)]</span>
            <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">b_len</span><span class="p">):</span>
                <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">a_len</span><span class="p">):</span>
                    <span class="n">z</span><span class="p">[</span><span class="n">j</span> <span class="o">+</span> <span class="n">i</span><span class="p">]</span> <span class="o">+=</span> <span class="n">a</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">*</span> <span class="n">b</span><span class="p">[</span><span class="n">j</span><span class="p">]</span>
            <span class="k">return</span> <span class="n">z</span>
        <span class="k">except</span> <span class="nb">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">raise</span>

    <span class="k">def</span> <span class="nf">__multiply_toom_cook_3</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">):</span>
        <span class="s">""" Toom-Cook 3-way multiplication

        :param  list a
        :param  list b
        :return list z
        """</span>
        <span class="n">a_m1</span><span class="p">,</span> <span class="n">a_m2</span><span class="p">,</span> <span class="n">a_0</span><span class="p">,</span> <span class="n">a_1</span><span class="p">,</span> <span class="n">a_inf</span> <span class="o">=</span> <span class="p">[],</span> <span class="p">[],</span> <span class="p">[],</span> <span class="p">[],</span> <span class="p">[]</span>
        <span class="n">b_m1</span><span class="p">,</span> <span class="n">b_m2</span><span class="p">,</span> <span class="n">b_0</span><span class="p">,</span> <span class="n">b_1</span><span class="p">,</span> <span class="n">b_inf</span> <span class="o">=</span> <span class="p">[],</span> <span class="p">[],</span> <span class="p">[],</span> <span class="p">[],</span> <span class="p">[]</span>
        <span class="n">c_m1</span><span class="p">,</span> <span class="n">c_m2</span><span class="p">,</span> <span class="n">c_0</span><span class="p">,</span> <span class="n">c_1</span><span class="p">,</span> <span class="n">c_inf</span> <span class="o">=</span> <span class="p">[],</span> <span class="p">[],</span> <span class="p">[],</span> <span class="p">[],</span> <span class="p">[]</span>
        <span class="n">c0</span><span class="p">,</span> <span class="n">c1</span><span class="p">,</span> <span class="n">c2</span><span class="p">,</span> <span class="n">c3</span><span class="p">,</span> <span class="n">c4</span>          <span class="o">=</span> <span class="p">[],</span> <span class="p">[],</span> <span class="p">[],</span> <span class="p">[],</span> <span class="p">[]</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">t_len</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
            <span class="c1"># ９桁（配列９個）になった場合は標準乗算
</span>            <span class="k">if</span> <span class="n">t_len</span> <span class="o">&lt;=</span> <span class="mi">9</span><span class="p">:</span>
                <span class="k">return</span> <span class="bp">self</span><span class="p">.</span><span class="n">__multiply_normal</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">)</span>
            <span class="n">a0</span> <span class="o">=</span> <span class="n">a</span><span class="p">[:(</span><span class="n">t_len</span> <span class="o">//</span> <span class="mi">3</span><span class="p">)]</span>
            <span class="n">a1</span> <span class="o">=</span> <span class="n">a</span><span class="p">[(</span><span class="n">t_len</span> <span class="o">//</span> <span class="mi">3</span><span class="p">):(</span><span class="n">t_len</span> <span class="o">*</span> <span class="mi">2</span> <span class="o">//</span> <span class="mi">3</span><span class="p">)]</span>
            <span class="n">a2</span> <span class="o">=</span> <span class="n">a</span><span class="p">[(</span><span class="n">t_len</span> <span class="o">*</span> <span class="mi">2</span> <span class="o">//</span> <span class="mi">3</span><span class="p">):]</span>
            <span class="n">b0</span> <span class="o">=</span> <span class="n">b</span><span class="p">[:(</span><span class="n">t_len</span> <span class="o">//</span> <span class="mi">3</span><span class="p">)]</span>
            <span class="n">b1</span> <span class="o">=</span> <span class="n">b</span><span class="p">[(</span><span class="n">t_len</span> <span class="o">//</span> <span class="mi">3</span><span class="p">):(</span><span class="n">t_len</span> <span class="o">*</span> <span class="mi">2</span> <span class="o">//</span> <span class="mi">3</span><span class="p">)]</span>
            <span class="n">b2</span> <span class="o">=</span> <span class="n">b</span><span class="p">[(</span><span class="n">t_len</span> <span class="o">*</span> <span class="mi">2</span> <span class="o">//</span> <span class="mi">3</span><span class="p">):]</span>
            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">t_len</span> <span class="o">//</span> <span class="mi">3</span><span class="p">):</span>
                <span class="n">a_m2</span><span class="p">.</span><span class="n">append</span><span class="p">((</span><span class="n">a2</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">&lt;&lt;</span> <span class="mi">2</span><span class="p">)</span> <span class="o">-</span> <span class="p">(</span><span class="n">a1</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">&lt;&lt;</span> <span class="mi">1</span><span class="p">)</span> <span class="o">+</span> <span class="n">a0</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>
                <span class="n">b_m2</span><span class="p">.</span><span class="n">append</span><span class="p">((</span><span class="n">b2</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">&lt;&lt;</span> <span class="mi">2</span><span class="p">)</span> <span class="o">-</span> <span class="p">(</span><span class="n">b1</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">&lt;&lt;</span> <span class="mi">1</span><span class="p">)</span> <span class="o">+</span> <span class="n">b0</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>
            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">t_len</span> <span class="o">//</span> <span class="mi">3</span><span class="p">):</span>
                <span class="n">a_m1</span><span class="p">.</span><span class="n">append</span><span class="p">(</span><span class="n">a2</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">-</span> <span class="n">a1</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">+</span> <span class="n">a0</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>
                <span class="n">b_m1</span><span class="p">.</span><span class="n">append</span><span class="p">(</span><span class="n">b2</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">-</span> <span class="n">b1</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">+</span> <span class="n">b0</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>
            <span class="n">a_0</span><span class="p">,</span> <span class="n">b_0</span> <span class="o">=</span> <span class="n">a0</span><span class="p">,</span> <span class="n">b0</span>
            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">t_len</span> <span class="o">//</span> <span class="mi">3</span><span class="p">):</span>
                <span class="n">a_1</span><span class="p">.</span><span class="n">append</span><span class="p">(</span><span class="n">a2</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">+</span> <span class="n">a1</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">+</span> <span class="n">a0</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>
                <span class="n">b_1</span><span class="p">.</span><span class="n">append</span><span class="p">(</span><span class="n">b2</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">+</span> <span class="n">b1</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">+</span> <span class="n">b0</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>
            <span class="n">a_inf</span><span class="p">,</span> <span class="n">b_inf</span><span class="o">=</span> <span class="n">a2</span><span class="p">,</span> <span class="n">b2</span>
            <span class="n">c_m2</span>  <span class="o">=</span> <span class="bp">self</span><span class="p">.</span><span class="n">__multiply_toom_cook_3</span><span class="p">(</span><span class="n">a_m2</span><span class="p">,</span> <span class="n">b_m2</span><span class="p">)</span>
            <span class="n">c_m1</span>  <span class="o">=</span> <span class="bp">self</span><span class="p">.</span><span class="n">__multiply_toom_cook_3</span><span class="p">(</span><span class="n">a_m1</span><span class="p">,</span> <span class="n">b_m1</span><span class="p">)</span>
            <span class="n">c_0</span>   <span class="o">=</span> <span class="bp">self</span><span class="p">.</span><span class="n">__multiply_toom_cook_3</span><span class="p">(</span><span class="n">a_0</span><span class="p">,</span> <span class="n">b_0</span><span class="p">)</span>
            <span class="n">c_1</span>   <span class="o">=</span> <span class="bp">self</span><span class="p">.</span><span class="n">__multiply_toom_cook_3</span><span class="p">(</span><span class="n">a_1</span><span class="p">,</span> <span class="n">b_1</span><span class="p">)</span>
            <span class="n">c_inf</span> <span class="o">=</span> <span class="bp">self</span><span class="p">.</span><span class="n">__multiply_toom_cook_3</span><span class="p">(</span><span class="n">a_inf</span><span class="p">,</span> <span class="n">b_inf</span><span class="p">)</span>
            <span class="n">c4</span> <span class="o">=</span> <span class="n">c_inf</span>
            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">((</span><span class="n">t_len</span> <span class="o">//</span> <span class="mi">3</span><span class="p">)</span> <span class="o">*</span> <span class="mi">2</span><span class="p">):</span>
                <span class="n">c</span>  <span class="o">=</span> <span class="o">-</span><span class="n">c_m2</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
                <span class="n">c</span> <span class="o">+=</span> <span class="p">(</span><span class="n">c_m1</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">&lt;&lt;</span> <span class="mi">1</span><span class="p">)</span> <span class="o">+</span> <span class="n">c_m1</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
                <span class="n">c</span> <span class="o">-=</span> <span class="p">(</span><span class="n">c_0</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">&lt;&lt;</span> <span class="mi">1</span><span class="p">)</span> <span class="o">+</span> <span class="n">c_0</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
                <span class="n">c</span> <span class="o">+=</span> <span class="n">c_1</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
                <span class="n">c</span> <span class="o">+=</span> <span class="p">(</span><span class="n">c_inf</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">&lt;&lt;</span> <span class="mi">3</span><span class="p">)</span> <span class="o">+</span> <span class="p">(</span><span class="n">c_inf</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">&lt;&lt;</span> <span class="mi">2</span><span class="p">)</span>
                <span class="n">c</span>  <span class="o">=</span> <span class="n">c</span> <span class="o">//</span> <span class="mi">6</span>
                <span class="n">c3</span><span class="p">.</span><span class="n">append</span><span class="p">(</span><span class="n">c</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">((</span><span class="n">t_len</span> <span class="o">//</span> <span class="mi">3</span><span class="p">)</span> <span class="o">*</span> <span class="mi">2</span><span class="p">):</span>
                <span class="n">c</span>  <span class="o">=</span> <span class="p">(</span><span class="n">c_m1</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">&lt;&lt;</span> <span class="mi">1</span><span class="p">)</span> <span class="o">+</span> <span class="n">c_m1</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
                <span class="n">c</span> <span class="o">-=</span> <span class="p">(</span><span class="n">c_0</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">&lt;&lt;</span> <span class="mi">2</span><span class="p">)</span> <span class="o">+</span> <span class="p">(</span><span class="n">c_0</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">&lt;&lt;</span> <span class="mi">1</span><span class="p">)</span>
                <span class="n">c</span> <span class="o">+=</span> <span class="p">(</span><span class="n">c_1</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">&lt;&lt;</span> <span class="mi">1</span><span class="p">)</span> <span class="o">+</span> <span class="n">c_1</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
                <span class="n">c</span> <span class="o">-=</span> <span class="p">(</span><span class="n">c_inf</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">&lt;&lt;</span> <span class="mi">2</span><span class="p">)</span> <span class="o">+</span> <span class="p">(</span><span class="n">c_inf</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">&lt;&lt;</span> <span class="mi">1</span><span class="p">)</span>
                <span class="n">c</span>  <span class="o">=</span> <span class="n">c</span> <span class="o">//</span> <span class="mi">6</span>
                <span class="n">c2</span><span class="p">.</span><span class="n">append</span><span class="p">(</span><span class="n">c</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">((</span><span class="n">t_len</span> <span class="o">//</span> <span class="mi">3</span><span class="p">)</span> <span class="o">*</span> <span class="mi">2</span><span class="p">):</span>
                <span class="n">c</span>  <span class="o">=</span> <span class="n">c_m2</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
                <span class="n">c</span> <span class="o">-=</span> <span class="p">(</span><span class="n">c_m1</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">&lt;&lt;</span> <span class="mi">2</span><span class="p">)</span> <span class="o">+</span> <span class="p">(</span><span class="n">c_m1</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">&lt;&lt;</span> <span class="mi">1</span><span class="p">)</span>
                <span class="n">c</span> <span class="o">+=</span> <span class="p">(</span><span class="n">c_0</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">&lt;&lt;</span> <span class="mi">1</span><span class="p">)</span> <span class="o">+</span> <span class="n">c_0</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
                <span class="n">c</span> <span class="o">+=</span> <span class="p">(</span><span class="n">c_1</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">&lt;&lt;</span> <span class="mi">1</span><span class="p">)</span>
                <span class="n">c</span> <span class="o">-=</span> <span class="p">(</span><span class="n">c_inf</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">&lt;&lt;</span> <span class="mi">3</span><span class="p">)</span> <span class="o">+</span> <span class="p">(</span><span class="n">c_inf</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">&lt;&lt;</span> <span class="mi">2</span><span class="p">)</span>
                <span class="n">c</span>  <span class="o">=</span> <span class="n">c</span> <span class="o">//</span> <span class="mi">6</span>
                <span class="n">c1</span><span class="p">.</span><span class="n">append</span><span class="p">(</span><span class="n">c</span><span class="p">)</span>
            <span class="n">c0</span> <span class="o">=</span> <span class="n">c_0</span>
            <span class="n">z</span> <span class="o">=</span> <span class="n">c0</span> <span class="o">+</span> <span class="n">c2</span> <span class="o">+</span> <span class="n">c4</span>
            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">((</span><span class="n">t_len</span> <span class="o">//</span> <span class="mi">3</span><span class="p">)</span> <span class="o">*</span> <span class="mi">2</span><span class="p">):</span>
                <span class="n">z</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="nb">int</span><span class="p">(</span><span class="n">t_len</span> <span class="o">/</span> <span class="mi">3</span><span class="p">)]</span> <span class="o">+=</span> <span class="n">c1</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">((</span><span class="n">t_len</span> <span class="o">//</span> <span class="mi">3</span><span class="p">)</span> <span class="o">*</span> <span class="mi">2</span><span class="p">):</span>
                <span class="n">z</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="n">t_len</span><span class="p">]</span> <span class="o">+=</span> <span class="n">c3</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
            <span class="k">return</span> <span class="n">z</span>
        <span class="k">except</span> <span class="nb">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">raise</span>

    <span class="k">def</span> <span class="nf">__do_carry</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">a</span><span class="p">):</span>
        <span class="s">""" Process of carrying

        :param  list a
        :return list a
        """</span>
        <span class="n">cr</span> <span class="o">=</span> <span class="mi">0</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">a</span><span class="p">)):</span>
                <span class="n">a</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">+=</span> <span class="n">cr</span>
                <span class="n">cr</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">a</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">/</span> <span class="mi">10</span><span class="p">)</span>
                <span class="n">a</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">-=</span> <span class="n">cr</span> <span class="o">*</span> <span class="mi">10</span>
            <span class="k">if</span> <span class="n">cr</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
                <span class="k">print</span><span class="p">(</span><span class="s">"[ OVERFLOW!! ] "</span><span class="p">,</span> <span class="n">cr</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">a</span>
        <span class="k">except</span> <span class="nb">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">raise</span>

    <span class="k">def</span> <span class="nf">__display</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">z</span><span class="p">):</span>
        <span class="s">""" Display

        :param list a
        :param list b
        :param list z
        """</span>
        <span class="n">a_len</span> <span class="o">=</span> <span class="bp">self</span><span class="p">.</span><span class="n">D_MAX</span>
        <span class="n">b_len</span> <span class="o">=</span> <span class="bp">self</span><span class="p">.</span><span class="n">D_MAX</span>
        <span class="n">z_len</span> <span class="o">=</span> <span class="bp">self</span><span class="p">.</span><span class="n">D_MAX</span> <span class="o">*</span> <span class="mi">2</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">while</span> <span class="n">a</span><span class="p">[</span><span class="n">a_len</span> <span class="o">-</span> <span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">a</span><span class="p">[</span><span class="n">a_len</span> <span class="o">-</span> <span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                    <span class="n">a_len</span> <span class="o">-=</span> <span class="mi">1</span>
            <span class="k">while</span> <span class="n">b</span><span class="p">[</span><span class="n">b_len</span> <span class="o">-</span> <span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">b</span><span class="p">[</span><span class="n">b_len</span> <span class="o">-</span> <span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                    <span class="n">b_len</span> <span class="o">-=</span> <span class="mi">1</span>
            <span class="k">while</span> <span class="n">z</span><span class="p">[</span><span class="n">z_len</span> <span class="o">-</span> <span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">z</span><span class="p">[</span><span class="n">z_len</span> <span class="o">-</span> <span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                    <span class="n">z_len</span> <span class="o">-=</span> <span class="mi">1</span>
            <span class="k">print</span><span class="p">(</span><span class="s">"a ="</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">reversed</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="n">a_len</span><span class="p">)):</span>
                <span class="k">print</span><span class="p">(</span><span class="n">a</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">end</span><span class="o">=</span><span class="s">""</span><span class="p">)</span>
                <span class="k">if</span> <span class="p">(</span><span class="n">a_len</span> <span class="o">-</span> <span class="n">i</span><span class="p">)</span> <span class="o">%</span> <span class="mi">10</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                    <span class="k">print</span><span class="p">(</span><span class="s">" "</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="s">""</span><span class="p">)</span>
                <span class="k">if</span> <span class="p">(</span><span class="n">a_len</span> <span class="o">-</span> <span class="n">i</span><span class="p">)</span> <span class="o">%</span> <span class="mi">50</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                    <span class="k">print</span><span class="p">()</span>
            <span class="k">print</span><span class="p">()</span>
            <span class="k">print</span><span class="p">(</span><span class="s">"b ="</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">reversed</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="n">b_len</span><span class="p">)):</span>
                <span class="k">print</span><span class="p">(</span><span class="n">b</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">end</span><span class="o">=</span><span class="s">""</span><span class="p">)</span>
                <span class="k">if</span> <span class="p">(</span><span class="n">b_len</span> <span class="o">-</span> <span class="n">i</span><span class="p">)</span> <span class="o">%</span> <span class="mi">10</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                    <span class="k">print</span><span class="p">(</span><span class="s">" "</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="s">""</span><span class="p">)</span>
                <span class="k">if</span> <span class="p">(</span><span class="n">b_len</span> <span class="o">-</span> <span class="n">i</span><span class="p">)</span> <span class="o">%</span> <span class="mi">50</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                    <span class="k">print</span><span class="p">()</span>
            <span class="k">print</span><span class="p">()</span>
            <span class="k">print</span><span class="p">(</span><span class="s">"z ="</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">reversed</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="n">z_len</span><span class="p">)):</span>
                <span class="k">print</span><span class="p">(</span><span class="n">z</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">end</span><span class="o">=</span><span class="s">""</span><span class="p">)</span>
                <span class="k">if</span> <span class="p">(</span><span class="n">z_len</span> <span class="o">-</span> <span class="n">i</span><span class="p">)</span> <span class="o">%</span> <span class="mi">10</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                    <span class="k">print</span><span class="p">(</span><span class="s">" "</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="s">""</span><span class="p">)</span>
                <span class="k">if</span> <span class="p">(</span><span class="n">z_len</span> <span class="o">-</span> <span class="n">i</span><span class="p">)</span> <span class="o">%</span> <span class="mi">50</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                    <span class="k">print</span><span class="p">()</span>
            <span class="k">print</span><span class="p">()</span>
        <span class="k">except</span> <span class="nb">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">raise</span>


<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">'__main__'</span><span class="p">:</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">obj</span> <span class="o">=</span> <span class="n">MultiplyToomCook3</span><span class="p">()</span>
        <span class="n">obj</span><span class="p">.</span><span class="n">compute</span><span class="p">()</span>
    <span class="k">except</span> <span class="nb">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="n">traceback</span><span class="p">.</span><span class="n">print_exc</span><span class="p">()</span>
        <span class="n">sys</span><span class="p">.</span><span class="nb">exit</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
</pre></td></tr></tbody></table></code></pre></figure>

<ul>
  <li><a href="https://gist.github.com/komasaru/c7306412ed3e76442f9ced2bc3090a64" title="Gist - Python script to multiply big-digit values with Toom-Cook 3-way method.">Gist - Python script to multiply big-digit values with Toom-Cook 3-way method.</a></li>
</ul>

<h3 id="3-python-スクリプトの実行">3. Python スクリプトの実行</h3>

<p>まず、実行権限を付与。</p>

<div class="language-text highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ chmod +x multiply_toom_cook_3.py
</code></pre></div></div>

<p>そして、実行。</p>

<div class="language-text highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ ./multiply_toom_cook_3.py
a =
9984175809 3286351933 4524087480 7671484443 2467573618
8875252515 7549251990 8495941435 9005372498 4515519291
0446904427 5108794238 4184112839 1927131190 3419813231
4075514955 6695775392 0207352574 2631461806 1747407391
7335451153 5930192777 9495477057 3313992260 1230537476
4781491650 2329540260 9151232540 5392786710 7267233811
7000564768 8964804879 0174266758 4401494165 1240665980
2428904303 1438341920 3786584056 7680618986 0119710816
4769291295 6736157259 5245811952 0648512236 6008216202
3909556894 7614443397 3525684215 4611073005 8484652142
0171417758 1651360039 5484649217 7457490737 9902481917
3348222394 8418031201 2629251623 8618110019 3185737282
4815478139 8720641170 5269481170 3007034111 9963050044
3051715805 7289330793 8313937207 0500412500 9191994540
9370143544 2396069851 03831965
b =
3360413303 4220719136 6844662485 6383299284 9273757226
3871217726 1206546887 5508967333 6302248385 9664059652
9514749048 4760393035 3871575399 1970836937 5524069097
3274436129 1928518900 0985554755 9179523513 3721068512
3766600160 6594030629 0279608993 0674038863 7620945536
9911200690 8220758407 3007181603 8345168855 3207874164
0213255576 3720989690 8977318517 6330441467 5674210028
1713642147 0579545896 7037707795 3880511803 9466865034
8343606302 6143729905 1655468567 8531997223 4858768944
9785735805 8041045782 0849804380 5999587065 4732948051
5262851758 0751068467 4199821619 9630248416 4873517698
1138555258 0584430068 8190075477 1379429681 9311825696
5266397983 3076795503 9633087032 8747551561 4171608862
1740467122 4046695270 8637644049 3538476350 4448653923
4690650661 4031167447 031735465
z =
3355095721 3372777392 7968734308 9588283000 5541485846
9704143740 7652303835 1780697356 8058373427 2212506668
8695664688 0127756820 8798765375 6392327667 6021297777
1691010913 9388901925 7568580892 0252208886 9447346276
9105853715 2960496690 4034444350 4795704880 0819380895
6106199760 9007022977 3684723156 7395235362 6765638398
0249602139 2857170858 9575539294 4975634730 4902599764
2396723552 4031823674 7000081564 3059728720 8783986161
3475720219 4112730295 3010437050 7994867335 0728425982
0839698883 5566844041 9189206299 5003573250 7400371204
3972532085 9045084253 5107015385 9963204349 5890266628
2281710944 9752876591 6665162666 8029651339 1652234273
7839344357 8190100549 4480385439 3180978778 3453037988
8505626969 7466242276 8897193116 8046401684 1644809122
9333366013 7493904916 1341003743 6987732054 7099230862
3587584087 2524145934 7875118921 3426108148 3187316726
8957652763 5971067309 6144481294 9116437353 3106567154
4086839721 1818998837 0671549358 7627108387 7059961399
3748497292 7663101488 2804514916 6456022366 1183658361
9054407032 6786206023 1229085140 3113384634 8524897936
4178698076 4247028413 7823399728 5890730381 2366408093
8429607513 3084648991 2476519783 1312169321 8428195982
8615575632 2507543326 1163660946 9370404329 7756703778
0049349995 5148158613 6035319015 7736582555 2973595737
7493109082 0095600562 5343019379 8179202658 3061440766
4163263940 5398118104 0493087985 9401392230 0083245711
5379448669 3427246461 9722069908 9124692510 8034118049
7806329355 0228855878 8787012996 6942151287 2453189577
1421672922 5220654945 3176820011 5193619813 5556153569
1138725
</code></pre></div></div>

<hr />

<p>以上</p>


        
      </section>

      <footer class="page__meta">
        
        
  


  
  
  

  <p class="page__taxonomy">
    <strong><i class="fas fa-fw fa-tags" aria-hidden="true"></i> Tags: </strong>
    <span itemprop="keywords">
    
      
      
      <a href="/tags/python" class="page__taxonomy-item" rel="tag">Python</a>
    
    </span>
  </p>




  


  
  
  

  <p class="page__taxonomy">
    <strong><i class="fas fa-fw fa-folder-open" aria-hidden="true"></i> Categories: </strong>
    <span itemprop="keywords">
    
      
      
      <a href="/categories/%E3%83%97%E3%83%AD%E3%82%B0%E3%83%A9%E3%83%9F%E3%83%B3%E3%82%B0" class="page__taxonomy-item" rel="tag">プログラミング</a><span class="sep">, </span>
    
      
      
      <a href="/categories/%E6%95%B0%E5%AD%A6" class="page__taxonomy-item" rel="tag">数学</a>
    
    </span>
  </p>


        
          
          <p class="page__date"><strong><i class="fas fa-fw fa-calendar-alt" aria-hidden="true"></i> Updated:</strong> <time datetime="2018-03-22T00:20:00+09:00">2018-03-22 00:20</time></p>
        
        <br />
      </footer>
      <div id="google-ad-3"></div>
      <br />
      <br />
      <br />
      <br />

      <section class="page__share">
  

  <a href="https://twitter.com/intent/tweet?via=rsm_mzk&text=Python+-+%E5%A4%9A%E6%A1%81%E4%B9%97%E7%AE%97%EF%BC%88Toom-Cook+%E6%B3%95+%283-way%29%EF%BC%89%EF%BC%81%20https%3A%2F%2Fkomasaru.github.io%2F2018%2F03%2F22%2Fpython-big-digits-multiplication-toom-cook-3%2F" class="btn btn--twitter" onclick="window.open(this.href, 'window', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" title="Share on Twitter"><i class="fab fa-fw fa-twitter" aria-hidden="true"></i><span> Twitter</span></a>

  <a href="https://www.facebook.com/sharer/sharer.php?u=https%3A%2F%2Fkomasaru.github.io%2F2018%2F03%2F22%2Fpython-big-digits-multiplication-toom-cook-3%2F" class="btn btn--facebook" onclick="window.open(this.href, 'window', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" title="Share on Facebook"><i class="fab fa-fw fa-facebook" aria-hidden="true"></i><span> Facebook</span></a>

  

  <a href="https://www.tumblr.com/share" class="btn btn--tumblr" onclick="window.open(this.href, 'window', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" title="Share on Tumblr"><i class="fab fa-fw fa-tumblr" aria-hidden="true"></i><span> Tumblr</span></a><script id="tumblr-js" async src="https://assets.tumblr.com/share-button.js"></script>

  <a href="https://www.linkedin.com/shareArticle?mini=true&url=https%3A%2F%2Fkomasaru.github.io%2F2018%2F03%2F22%2Fpython-big-digits-multiplication-toom-cook-3%2F" class="btn btn--linkedin" onclick="window.open(this.href, 'window', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" title="Share on LinkedIn"><i class="fab fa-fw fa-linkedin" aria-hidden="true"></i><span> LinkedIn</span></a>
</section>


      <section>
        &nbsp;
        <h4>Sponsored Link</h4>
        <div id="rakuten-ad"></div>
        <div id="amazon-ad-1"></div>
      </section>
      &nbsp;
      
  <nav class="pagination">
    
      <a href="/2018/03/19/python-big-digits-multiplication-karatsuba/" class="pagination--pager" title="Python - 多桁乗算（Karatsuba 法）！
">Previous</a>
    
    
      <a href="/2018/03/25/python-big-digits-comparison/" class="pagination--pager" title="Python - 多倍長整数の大小比較！
">Next</a>
    
  </nav>

    </div>

    
      <div class="page__comments">
  
  
      <h4 class="page__comments-title">Comments</h4>
      <section id="disqus_thread"></section>
    
</div>

    
  </article>

  
  
    <div class="page__related">
      <div id="google-ad-4"></div>
      <h4 class="page__related-title">You May Also Enjoy</h4>
      <div class="grid__wrapper">
        
          



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
    <h3 class="archive__item-title" itemprop="headline">
      
        <a href="/2021/10/27/debian-11-service-management/" rel="permalink">Debian 11 (bullseye) - サービスの管理！
</a>
        &nbsp;<small>(2021-10-27)</small>
    </h3>
    
    <p class="archive__item-excerpt" itemprop="description">Debian GNU/Linux 11 (bullseye) でのサービスの管理についての記録です。

以前古いバージョンでの作業時に残していた記録を参考に作業を行い、今回更新した作業記録を貼付する形式の内容となっています。
（当然ながら、興味がなければスルーしてください）

</p>
  </article>
</div>

        
          



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
    <h3 class="archive__item-title" itemprop="headline">
      
        <a href="/2021/10/20/debian-11-firewall-setting/" rel="permalink">Debian 11 (bullseye) - ファイアウォール設定！
</a>
        &nbsp;<small>(2021-10-20)</small>
    </h3>
    
    <p class="archive__item-excerpt" itemprop="description">Debian GNU/Linux 11 (bullseye) でファイアウォールを設定する方法についての記録です。

以前古いバージョンでの作業時に残していた記録を参考に作業を行い、今回更新した作業記録を貼付する形式の内容となっています。
（当然ながら、興味がなければスルーしてください）

</p>
  </article>
</div>

        
          



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
    <h3 class="archive__item-title" itemprop="headline">
      
        <a href="/2021/10/13/debian-11-systemd-timesyncd/" rel="permalink">Debian 11 (bullseye) - 時刻同期設定(systemd-timesyncd)！
</a>
        &nbsp;<small>(2021-10-13)</small>
    </h3>
    
    <p class="archive__item-excerpt" itemprop="description">Debian GNU/Linux 11 (bullseye) 上で systemd-timesyncd サービスを使用して時刻同期する設定についての記録です。

以前古いバージョンでの作業時に残していた記録を参考に作業を行い、今回更新した作業記録を貼付する形式の内容となっています。
（当然ながら、興味がなければス...</p>
  </article>
</div>

        
          



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
    <h3 class="archive__item-title" itemprop="headline">
      
        <a href="/2021/10/06/debian-11-anti-virus-installation/" rel="permalink">Debian 11 (bullseye) - アンチウィルスソフト導入！
</a>
        &nbsp;<small>(2021-10-06)</small>
    </h3>
    
    <p class="archive__item-excerpt" itemprop="description">Debian GNU/Linux 11 (bullseye) にウイルス対策ソフト ClamAV をインストールする方法についての記録です。

以前古いバージョンでの作業時に残していた記録を参考に作業を行い、今回更新した作業記録を貼付する形式の内容となっています。
（当然ながら、興味がなければスルーしてください）

</p>
  </article>
</div>

        
      </div>
      <!-- &nbsp;
      <div id="amazon-wd"></div -->
    </div>
  
  
</div>

    </div>

    
      <div class="search-content">
        <div class="search-content__inner-wrap"><form onsubmit="return googleCustomSearchExecute();" id="cse-search-box-form-id">
    <input type="text" id="cse-search-input-box-id" class="search-input" tabindex="-1" placeholder="Enter your search term..." />
    </form>
    <div id="results" class="results">
        <gcse:searchresults-only></gcse:searchresults-only>    
    </div></div>

      </div>
    

    <div class="page__footer">
      <footer>
        <!-- start custom footer snippets -->
<div id="qr"><img src="/assets/images/qr.png" alt="mk-mode BLOG"></div>
<div id="google-ad-5"></div>
<div class="page__footer-etc">
  <strong>ブログ開設日</strong> <tt>2009-01-05</tt><br />
  <strong>サーバ連続稼働時間</strong> <tt id="uptime">Loading...</tt><br />
  <strong>Page View</strong><br />
  &emsp;合計 <tt id="pv-total">Loading...</tt><br />
  &emsp;今日 <tt id="pv-today">Loading...</tt><br />
  &emsp;昨日 <tt id="pv-yesterday">Loading...</tt><br />
  <small>※<a href="/privacy.html" title="「プライバシーポリシー」ページへ">プライバシーポリシー</a></small>
</div>
<p id="page-top">
  <a href="#">
    <i class="fa fa-angle-double-up fa-2x" aria-hidden="true"></i>
  </a>
</p>
<!-- end custom footer snippets -->

        <div class="page__footer-follow">
  <ul class="social-icons">
    

    
      
        
          <li><a href="https://twitter.com/rsm_mzk" rel="nofollow noopener noreferrer"><i class="fab fa-fw fa-twitter-square" aria-hidden="true"></i> Twitter</a></li>
        
      
        
      
        
          <li><a href="https://github.com/komasaru" rel="nofollow noopener noreferrer"><i class="fab fa-fw fa-github" aria-hidden="true"></i> GitHub</a></li>
        
      
        
      
        
      
        
      
    

    <li><a href="https://www.mk-mode.com/blog/atom.xml"><i class="fas fa-fw fa-rss-square" aria-hidden="true"></i> Feed</a></li>
  </ul>
</div>

<div class="page__footer-copyright">&copy; 2021 mk-mode.com. Powered by <a href="https://jekyllrb.com" rel="nofollow">Jekyll</a> &amp; <a href="https://mademistakes.com/work/minimal-mistakes-jekyll-theme/" rel="nofollow">Minimal Mistakes</a>.</div>

      </footer>
    </div>

    
  <script defer src="/assets/js/main.min.js"></script>
  <script defer src="https://use.fontawesome.com/releases/v5.6.0/js/all.js" integrity="sha384-z9ZOvGHHo21RqN5De4rfJMoAxYpaVoiYhuJXPyVmSs8yn20IE3PmBM534CffwSJI" crossorigin="anonymous"></script>
  <script defer src="/assets/js/my_custom.js"></script>


<script>
  (function () {
    var cx = 'partner-pub-7320193476057758:6328726109';
    var gcse = document.createElement('script');
    gcse.type = 'text/javascript';
    gcse.async = true;
    gcse.src = 'https://cse.google.com/cse.js?cx=' + cx;
    var s = document.getElementsByTagName('script')[0];
    s.parentNode.insertBefore(gcse, s);
  })();

  function googleCustomSearchExecute() {
    var input = document.getElementById('cse-search-input-box-id');
    var element = google.search.cse.element.getElement('searchresults-only0');
    if (input.value == '') {
      element.clearAllResults();
    } else {
      element.execute(input.value);
    }
    return false;
  }

  
</script>




  <script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-18154748-1']);
  
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>





    
  <script>
    var disqus_config = function () {
      this.page.url = "https://komasaru.github.io/2018/03/22/python-big-digits-multiplication-toom-cook-3/";  // Replace PAGE_URL with your page's canonical URL variable
      this.page.identifier = "/2018/03/22/python-big-digits-multiplication-toom-cook-3"; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
    };
    (function() { // DON'T EDIT BELOW THIS LINE
      var d = document, s = d.createElement('script');
      s.src = 'https://mkmodeblog.disqus.com/embed.js';
      s.setAttribute('data-timestamp', +new Date());
      (d.head || d.body).appendChild(s);
    })();
  </script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>


  



  </body>
</html>
