<!doctype html>
<!--
  Minimal Mistakes Jekyll Theme 4.15.1 by Michael Rose
  Copyright 2013-2019 Michael Rose - mademistakes.com | @mmistakes
  Free for personal and commercial use under the MIT license
  https://github.com/mmistakes/minimal-mistakes/blob/master/LICENSE
-->
<html lang="ja" class="no-js">
  <head>
    <meta charset="utf-8">

<!-- begin _includes/seo.html --><title>Ruby - 多倍長浮動小数点数の加減算！ - mk-mode BLOG</title>
<meta name="description" content="前回は、C++ による多倍長浮動小数点数同士の加減算について紹介しました。  C++ - 多倍長浮動小数点数の加減算！今回は、同じことを Ruby で試してみました。">



<meta property="og:type" content="article">
<meta property="og:locale" content="ja_JP">
<meta property="og:site_name" content="mk-mode BLOG">
<meta property="og:title" content="Ruby - 多倍長浮動小数点数の加減算！">
<meta property="og:url" content="https://komasaru.github.io/2013/05/06/ruby-add-big-float/">


  <meta property="og:description" content="前回は、C++ による多倍長浮動小数点数同士の加減算について紹介しました。  C++ - 多倍長浮動小数点数の加減算！今回は、同じことを Ruby で試してみました。">



  <meta property="og:image" content="https://www.mk-mode.com/blog/assets/images/about_me.png">



  <meta name="twitter:site" content="@rsm_mzk">
  <meta name="twitter:title" content="Ruby - 多倍長浮動小数点数の加減算！">
  <meta name="twitter:description" content="前回は、C++ による多倍長浮動小数点数同士の加減算について紹介しました。  C++ - 多倍長浮動小数点数の加減算！今回は、同じことを Ruby で試してみました。">
  <meta name="twitter:url" content="https://komasaru.github.io/2013/05/06/ruby-add-big-float/">

  
    <meta name="twitter:card" content="summary">
    
      <meta name="twitter:image" content="https://www.mk-mode.com/blog/assets/images/about_me.png">
    
  

  



  <meta property="article:published_time" content="2013-05-06T00:20:00+09:00">





  

  


<link rel="canonical" href="https://komasaru.github.io/2013/05/06/ruby-add-big-float/">





  <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "Organization",
      "url": "https://komasaru.github.io",
      "logo": "https://www.mk-mode.com/blog/assets/images/about_me.png"
    }
  </script>



  <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "Person",
      "name": "mk-mode.com",
      "url": "https://komasaru.github.io",
      "sameAs": null
    }
  </script>



  <meta name="google-site-verification" content="0kSwKhNo71fC7OeEFLllD3S11F8Pa-z_OqsBTSFxXAk" />





<!-- end _includes/seo.html -->


<link href="https://www.mk-mode.com/blog/atom.xml" type="application/atom+xml" rel="alternate" title="mk-mode BLOG Feed">

<!-- https://t.co/dKP3o1e -->
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script>
  document.documentElement.className = document.documentElement.className.replace(/\bno-js\b/g, '') + ' js ';
</script>

<!-- For all browsers -->
<link rel="stylesheet" href="/assets/css/main.css">

<!--[if IE ]>
  <style>
    /* old IE unsupported flexbox fixes */
    .greedy-nav .site-title {
      padding-right: 3em;
    }
    .greedy-nav button {
      position: absolute;
      top: 0;
      right: 0;
      height: 100%;
    }
  </style>
<![endif]-->


  
    
    <script defer src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
  


    <!-- start custom head snippets -->

<meta http-equiv="x-dns-prefetch-control" content="on">
<link rel="dns-prefetch" href="//pagead2.googlesyndication.com" />
<link rel="dns-prefetch" href="//googleads.g.doubleclick.net" />
<link rel="dns-prefetch" href="//tpc.googlesyndication.com" />
<link rel="dns-prefetch" href="//cm.g.doubleclick.net" />
<link rel="dns-prefetch" href="//www.gstatic.com" />
<link rel="dns-prefetch" href="//fonts.gstatic.com" />
<link rel='dns-prefetch' href='//use.fontawesome.com' />
<link rel="dns-prefetch" href="//twitter.com" />
<link rel="dns-prefetch" href="//www.facebook.com" />

<link rel="icon" href="/assets/images/favicon.ico">
<script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-18154748-1']);
  
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>
  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
    (adsbygoogle = window.adsbygoogle || []).push({
      google_ad_client: "ca-pub-7320193476057758",
      enable_page_level_ads: true
    });
  </script>


<!-- end custom head snippets -->

  </head>

  <body class="layout--single wide">

    <!--[if lt IE 9]>
<div class="notice--danger align-center" style="margin: 0;">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience.</div>
<![endif]-->

    

<div class="masthead">
  <div class="masthead__inner-wrap">
    <div class="masthead__menu">
      <nav id="site-nav" class="greedy-nav">
        
        <a class="site-title" href="/">mk-mode BLOG</a>
        <ul class="visible-links"><li class="masthead__menu-item">
              <a href="/year-archive/" >Archives</a>
            </li><li class="masthead__menu-item">
              <a href="/categories/" >Categories</a>
            </li><li class="masthead__menu-item">
              <a href="/tags/" >Tags</a>
            </li><li class="masthead__menu-item">
              <a href="https://www.mk-mode.com/rails/calendar/calendar" >Calendar</a>
            </li><li class="masthead__menu-item">
              <a href="https://www.mk-mode.com/rails/jmaxml" >JMAXML</a>
            </li><li class="masthead__menu-item">
              <a href="/privacy.html" >Privacy Policy</a>
            </li></ul>
        
        <button class="search__toggle" type="button">
          <span class="visually-hidden">Toggle search</span>
          <svg class="icon" width="16" height="16" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 15.99 16">
            <path d="M15.5,13.12L13.19,10.8a1.69,1.69,0,0,0-1.28-.55l-0.06-.06A6.5,6.5,0,0,0,5.77,0,6.5,6.5,0,0,0,2.46,11.59a6.47,6.47,0,0,0,7.74.26l0.05,0.05a1.65,1.65,0,0,0,.5,1.24l2.38,2.38A1.68,1.68,0,0,0,15.5,13.12ZM6.4,2A4.41,4.41,0,1,1,2,6.4,4.43,4.43,0,0,1,6.4,2Z" transform="translate(-.01)"></path>
          </svg>
        </button>
        
        <button class="greedy-nav__toggle hidden" type="button">
          <span class="visually-hidden">Toggle menu</span>
          <div class="navicon"></div>
        </button>
        <ul class="hidden-links hidden"></ul>
      </nav>
    </div>
  </div>
</div>


    <div class="initial-content">
      



<div id="main" role="main">
  
  <div class="sidebar sticky">
  


<div itemscope itemtype="https://schema.org/Person">

  
    <div class="author__avatar">
      

      
        <img src="/assets/images/about_me.png" alt="mk-mode.com" itemprop="image">
      
    </div>
  

  <div class="author__content">
    
      <h3 class="author__name" itemprop="name">mk-mode.com</h3>
    
    
      <p class="author__bio" itemprop="description">
        Linux, Debian, IT, Server, PG, Ruby, Rails, Python, C++, Fortran, PC, MariaDB, math, GIS, etc...
      </p>
    
  </div>

  <div class="author__urls-wrapper">
    <button class="btn btn--inverse">Follow</button>
    <ul class="author__urls social-icons">
      
        <li itemprop="homeLocation" itemscope itemtype="https://schema.org/Place">
          <i class="fas fa-fw fa-map-marker-alt" aria-hidden="true"></i> <span itemprop="name">Ruby City MATSUE</span>
        </li>
      

      
        
          
        
          
            <li><a href="https://www.mk-mode.com" rel="nofollow noopener noreferrer"><i class="fas fa-fw fa-link" aria-hidden="true"></i> mk-mode SITE</a></li>
          
        
          
            <li><a href="https://komasaru.github.io" rel="nofollow noopener noreferrer"><i class="fas fa-fw fa-link" aria-hidden="true"></i> mk-mode BLOG (clone)</a></li>
          
        
          
            <li><a href="https://mk-mode.tumblr.com" rel="nofollow noopener noreferrer"><i class="fas fa-fw fa-link" aria-hidden="true"></i> mk-mode TUMBLR</a></li>
          
        
          
            <li><a href="https://mk-ephemeris.tumblr.com" rel="nofollow noopener noreferrer"><i class="fas fa-fw fa-link" aria-hidden="true"></i> mk-mode EPHEMERIS</a></li>
          
        
          
            <li><a href="https://twitter.com/rsm_mzk" rel="nofollow noopener noreferrer"><i class="fab fa-fw fa-twitter-square" aria-hidden="true"></i> Twitter</a></li>
          
        
          
        
          
            <li><a href="https://github.com/komasaru" rel="nofollow noopener noreferrer"><i class="fab fa-fw fa-github" aria-hidden="true"></i> GitHub</a></li>
          
        
          
        
      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      <!--
  <li>
    <a href="http://link-to-whatever-social-network.com/user/" itemprop="sameAs" rel="nofollow noopener noreferrer">
      <i class="fas fa-fw" aria-hidden="true"></i> Custom Social Profile Link
    </a>
  </li>
-->
    </ul>
  </div>
</div>

  
  </div>


  <article class="page" itemscope itemtype="https://schema.org/CreativeWork">
    <meta itemprop="headline" content="Ruby - 多倍長浮動小数点数の加減算！">
    <meta itemprop="description" content="前回は、C++ による多倍長浮動小数点数同士の加減算について紹介しました。  C++ - 多倍長浮動小数点数の加減算！今回は、同じことを Ruby で試してみました。">
    <meta itemprop="datePublished" content="May 06, 2013">
    

    <div class="page__inner-wrap">
      
        <header>
          <!-- div id="google-ad-1"></div -->
          <h1 id="page-title" class="page__title" itemprop="headline">Ruby - 多倍長浮動小数点数の加減算！
</h1>
          
          
            
            <p class="page__date"><small><strong><i class="fas fa-fw fa-calendar-alt" aria-hidden="true"></i> Updated:</strong> <time datetime="2013-05-06T00:20:00+09:00">2013-05-06 00:20</time></small></p>
          
        </header>
      
      <div id="google-ad-2"></div>
      <br />

      <section class="page__content" itemprop="text">
        
        <p>前回は、C++ による多倍長浮動小数点数同士の加減算について紹介しました。</p>

<ul>
  <li><a href="/2013/05/05/cpp-add-big-float/" title="C++ - 多倍長浮動小数点数の加減算！">C++ - 多倍長浮動小数点数の加減算！</a></li>
</ul>

<p>今回は、同じことを Ruby で試してみました。</p>

<!--more-->

<h3 id="0-前提条件">0. 前提条件</h3>

<ul>
  <li>Linux Mint 14 Nadia (64bit) での作業を想定。</li>
  <li>Ruby 2.0.0-p0 を使用。</li>
</ul>

<h3 id="1-考え方">1. 考え方</h3>

<p>考え方は C++ 版と同じなので、「<a href="/2013/05/05/cpp-add-big-float/" title="C++ - 多倍長浮動小数点数の加減算！">C++ - 多倍長浮動小数点数の加減算！</a>」を参照のこと。</p>

<h3 id="2-ruby-スクリプト作成">2. Ruby スクリプト作成</h3>

<ul>
  <li>今回、 A - C &lt; 0 (A &lt; C) になることは想定していない。</li>
</ul>

<p>File: <code class="language-plaintext highlighter-rouge">add_big_float.rb</code></p>

<figure class="highlight"><pre><code class="language-ruby" data-lang="ruby"><table class="rouge-table"><tbody><tr><td class="gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
153
154
155
156
157
158
159
160
161
162
163
164
165
166
167
168
169
170
171
172
173
174
175
176
177
178
179
180
181
182
183
184
185
186
187
188
189
190
191
192
193
194
195
196
197
198
199
200
201
202
203
204
205
206
207
208
209
210
211
</pre></td><td class="code"><pre><span class="c1">#! /usr/local/bin/ruby</span>
<span class="c1">#*********************************************</span>
<span class="c1"># 浮動小数点数加減算</span>
<span class="c1">#*********************************************</span>
<span class="c1">#</span>
<span class="k">class</span> <span class="nc">AddBigFloat</span>
  <span class="no">D_MAX</span> <span class="o">=</span> <span class="mi">1001</span>  <span class="c1"># 有効桁数(小数点以下＋べき指数)</span>

  <span class="k">def</span> <span class="nf">initialize</span>
    <span class="c1"># 使用する被加減数・加減数を設定（テストなので適当な乱数を使用）</span>
    <span class="c1">#   ( A + B, A - C で A &gt; C となることが条件だが</span>
    <span class="c1">#     稀に条件に合致しない値が生成されるかもしれない )</span>
    <span class="vi">@a</span><span class="p">,</span> <span class="vi">@b</span><span class="p">,</span> <span class="vi">@c</span> <span class="o">=</span> <span class="no">Array</span><span class="p">.</span><span class="nf">new</span><span class="p">,</span> <span class="no">Array</span><span class="p">.</span><span class="nf">new</span><span class="p">,</span> <span class="no">Array</span><span class="p">.</span><span class="nf">new</span>
    <span class="vi">@a</span> <span class="o">&lt;&lt;</span> <span class="nb">rand</span><span class="p">(</span><span class="no">D_MAX</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span>      <span class="c1"># Aのべき指数部</span>
    <span class="vi">@b</span> <span class="o">&lt;&lt;</span> <span class="nb">rand</span><span class="p">(</span><span class="no">D_MAX</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span>      <span class="c1"># Bのべき指数部</span>
    <span class="vi">@c</span> <span class="o">&lt;&lt;</span> <span class="vi">@a</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="nb">rand</span><span class="p">(</span><span class="vi">@a</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">-</span> <span class="mi">1</span>  <span class="c1"># Cのべき指数部</span>
    <span class="p">(</span><span class="no">D_MAX</span> <span class="o">-</span> <span class="mi">1</span><span class="p">).</span><span class="nf">times</span> <span class="k">do</span> <span class="o">|</span><span class="n">_</span><span class="o">|</span>
      <span class="vi">@a</span> <span class="o">&lt;&lt;</span> <span class="nb">rand</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>               <span class="c1"># Aの小数部</span>
      <span class="vi">@b</span> <span class="o">&lt;&lt;</span> <span class="nb">rand</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>               <span class="c1"># Bの小数部</span>
      <span class="vi">@c</span> <span class="o">&lt;&lt;</span> <span class="nb">rand</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>               <span class="c1"># Cの小数部</span>
    <span class="k">end</span>
  <span class="k">end</span>

  <span class="c1"># 計算</span>
  <span class="k">def</span> <span class="nf">calc</span>
    <span class="c1"># 計算する被加減数・加数・減数を出力</span>
    <span class="nb">puts</span> <span class="s2">"A ="</span><span class="p">;</span> <span class="n">fdisp</span><span class="p">(</span><span class="vi">@a</span><span class="p">)</span>
    <span class="nb">puts</span> <span class="s2">"B ="</span><span class="p">;</span> <span class="n">fdisp</span><span class="p">(</span><span class="vi">@b</span><span class="p">)</span>
    <span class="nb">puts</span> <span class="s2">"C ="</span><span class="p">;</span> <span class="n">fdisp</span><span class="p">(</span><span class="vi">@c</span><span class="p">)</span>
    <span class="c1"># 計算(Z = A + B) ・結果出力</span>
    <span class="nb">puts</span> <span class="s2">"A + B ="</span>
    <span class="n">fdisp</span><span class="p">(</span><span class="n">fadd</span><span class="p">(</span><span class="vi">@a</span><span class="p">,</span> <span class="vi">@b</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span>
    <span class="c1"># 計算(Z = A - C) ・結果出力</span>
    <span class="nb">puts</span> <span class="s2">"A - C ="</span>
    <span class="n">fdisp</span><span class="p">(</span><span class="n">fadd</span><span class="p">(</span><span class="vi">@a</span><span class="p">,</span> <span class="vi">@c</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">))</span>
  <span class="k">rescue</span> <span class="o">=&gt;</span> <span class="n">e</span>
    <span class="k">raise</span>
  <span class="k">end</span>

  <span class="kp">private</span>

  <span class="c1"># ========================================================</span>
  <span class="c1"># 加減算</span>
  <span class="c1"># ( 固定長整数同士の加減算, 正規化含む )</span>
  <span class="c1">#</span>
  <span class="c1">#   [引数]   a   : 被加減数配列</span>
  <span class="c1">#            b   : 加減数配列</span>
  <span class="c1">#            id  : 1: 加算(A + B(, -1: 減算(A - B)</span>
  <span class="c1">#   [返り値] z   : 計算結果配列</span>
  <span class="c1"># ========================================================</span>
  <span class="k">def</span> <span class="nf">add</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="nb">id</span><span class="p">)</span>
    <span class="n">z</span> <span class="o">=</span> <span class="no">Array</span><span class="p">.</span><span class="nf">new</span>  <span class="c1"># 結果格納配列</span>

    <span class="k">begin</span>
      <span class="c1"># 計算</span>
      <span class="k">if</span> <span class="nb">id</span> <span class="o">&gt;=</span> <span class="mi">0</span>  <span class="c1"># 加算</span>
        <span class="n">a</span><span class="p">.</span><span class="nf">size</span><span class="p">.</span><span class="nf">times</span> <span class="p">{</span> <span class="o">|</span><span class="n">i</span><span class="o">|</span> <span class="n">z</span> <span class="o">&lt;&lt;</span> <span class="n">a</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">+</span> <span class="n">b</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="p">}</span>
      <span class="k">else</span>        <span class="c1"># 減算</span>
        <span class="n">a</span><span class="p">.</span><span class="nf">size</span><span class="p">.</span><span class="nf">times</span> <span class="p">{</span> <span class="o">|</span><span class="n">i</span><span class="o">|</span> <span class="n">z</span> <span class="o">&lt;&lt;</span> <span class="n">a</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">-</span> <span class="n">b</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="p">}</span>
      <span class="k">end</span>
      <span class="c1"># 正規化</span>
      <span class="n">z</span> <span class="o">=</span> <span class="n">norm</span><span class="p">(</span><span class="n">z</span><span class="p">)</span>
      <span class="k">return</span> <span class="n">z</span>
    <span class="k">rescue</span> <span class="o">=&gt;</span> <span class="n">e</span>
      <span class="k">raise</span>
    <span class="k">end</span>
  <span class="k">end</span>

  <span class="c1"># ========================================================</span>
  <span class="c1"># 加減算</span>
  <span class="c1"># ( 浮動小数点数同士の加減算, 正規化含む )</span>
  <span class="c1">#</span>
  <span class="c1">#   [引数]   a  : 被加減数配列</span>
  <span class="c1">#            b  : 加減数配列</span>
  <span class="c1">#            id : 1: 加算(A + B), -1: 減算(A - B)</span>
  <span class="c1">#   [返り値] z  : 出力データ配列(Z = A + B or Z = A - B)</span>
  <span class="c1"># ========================================================</span>
  <span class="k">def</span> <span class="nf">fadd</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="nb">id</span><span class="p">)</span>
    <span class="n">z</span> <span class="o">=</span> <span class="no">Array</span><span class="p">.</span><span class="nf">new</span>  <span class="c1"># 結果格納配列</span>

    <span class="k">begin</span>
      <span class="c1"># 計算</span>
      <span class="k">if</span> <span class="n">a</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">&gt;=</span> <span class="n">b</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>  <span class="c1"># A のべき指数 &gt;= B のべき指数</span>
        <span class="n">k</span> <span class="o">=</span> <span class="n">a</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="n">b</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">z</span> <span class="o">=</span> <span class="n">a</span><span class="p">[</span><span class="mi">0</span><span class="o">...</span><span class="p">(</span><span class="n">k</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)]</span>
        <span class="n">z</span> <span class="o">+=</span> <span class="n">add</span><span class="p">(</span><span class="n">a</span><span class="p">[(</span><span class="n">k</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span><span class="o">..-</span><span class="mi">1</span><span class="p">],</span> <span class="n">b</span><span class="p">[</span><span class="mi">1</span><span class="o">..</span><span class="p">(</span><span class="n">a</span><span class="p">.</span><span class="nf">size</span> <span class="o">-</span> <span class="mi">1</span> <span class="o">+</span> <span class="n">k</span><span class="p">)],</span> <span class="nb">id</span><span class="p">)</span>
      <span class="k">else</span>             <span class="c1"># A のべき指数 &lt;  B のべき指数</span>
        <span class="n">z</span> <span class="o">&lt;&lt;</span> <span class="n">b</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">k</span> <span class="o">=</span> <span class="n">b</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="n">a</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="c1"># 位の異なる部分</span>
        <span class="k">if</span> <span class="nb">id</span> <span class="o">&gt;=</span> <span class="mi">0</span>  <span class="c1"># 加算</span>
          <span class="n">z</span> <span class="o">+=</span> <span class="n">b</span><span class="p">[</span><span class="mi">1</span><span class="o">..</span><span class="n">k</span><span class="p">]</span>
        <span class="k">else</span>        <span class="c1"># 減算</span>
          <span class="mi">1</span><span class="p">.</span><span class="nf">upto</span><span class="p">(</span><span class="n">k</span><span class="p">)</span> <span class="p">{</span> <span class="o">|</span><span class="n">i</span><span class="o">|</span> <span class="n">z</span> <span class="o">&lt;&lt;</span> <span class="o">-</span><span class="n">b</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="p">}</span>
        <span class="k">end</span>
        <span class="c1"># 位の同じ部分の加減算</span>
        <span class="n">z</span> <span class="o">+=</span> <span class="n">add</span><span class="p">(</span><span class="n">a</span><span class="p">[</span><span class="mi">1</span><span class="o">..</span><span class="p">(</span><span class="o">-</span><span class="n">k</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)],</span> <span class="n">b</span><span class="p">[(</span><span class="n">k</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span><span class="o">..-</span><span class="mi">1</span><span class="p">],</span> <span class="nb">id</span><span class="p">)</span>
      <span class="k">end</span>
      <span class="c1"># 正規化</span>
      <span class="n">z</span> <span class="o">=</span> <span class="p">[</span><span class="n">z</span><span class="p">[</span><span class="mi">0</span><span class="p">]]</span> <span class="o">+</span> <span class="n">norm</span><span class="p">(</span><span class="n">z</span><span class="p">[</span><span class="mi">1</span><span class="o">..-</span><span class="mi">1</span><span class="p">])</span>  <span class="c1"># 固定長整数</span>
      <span class="n">z</span> <span class="o">=</span> <span class="n">fnorm</span><span class="p">(</span><span class="n">z</span><span class="p">)</span>                 <span class="c1"># 浮動小数点数</span>
      <span class="k">return</span> <span class="n">z</span>
    <span class="k">rescue</span> <span class="o">=&gt;</span> <span class="n">e</span>
      <span class="k">raise</span>
    <span class="k">end</span>
  <span class="k">end</span>

  <span class="c1"># ========================================================</span>
  <span class="c1"># 正規化</span>
  <span class="c1"># ( Fixed Normalize(A) by Base-Value )</span>
  <span class="c1">#</span>
  <span class="c1">#   [引数]   a : 正規化前データ配列</span>
  <span class="c1">#   [返り値] a : 正規化後データ配列</span>
  <span class="c1"># ========================================================</span>
  <span class="k">def</span> <span class="nf">norm</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
    <span class="n">cr</span> <span class="o">=</span> <span class="mi">0</span>         <span class="c1"># 繰り上がり</span>

    <span class="k">begin</span>
      <span class="p">(</span><span class="n">a</span><span class="p">.</span><span class="nf">size</span> <span class="o">-</span> <span class="mi">1</span><span class="p">).</span><span class="nf">downto</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="k">do</span> <span class="o">|</span><span class="n">i</span><span class="o">|</span>
        <span class="n">cr</span>        <span class="o">=</span> <span class="n">a</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">/</span> <span class="mi">10</span>
        <span class="n">a</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>     <span class="o">-=</span> <span class="n">cr</span> <span class="o">*</span> <span class="mi">10</span>
        <span class="n">a</span><span class="p">[</span><span class="n">i</span> <span class="o">-</span> <span class="mi">1</span><span class="p">]</span> <span class="o">+=</span> <span class="n">cr</span>
      <span class="k">end</span>
      <span class="p">(</span><span class="n">a</span><span class="p">.</span><span class="nf">size</span> <span class="o">-</span> <span class="mi">1</span><span class="p">).</span><span class="nf">downto</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="k">do</span> <span class="o">|</span><span class="n">i</span><span class="o">|</span>
        <span class="k">if</span> <span class="n">a</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">&lt;</span> <span class="mi">0</span>
          <span class="n">a</span><span class="p">[</span><span class="n">i</span> <span class="o">-</span> <span class="mi">1</span><span class="p">]</span> <span class="o">-=</span> <span class="mi">1</span>
          <span class="n">a</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>     <span class="o">+=</span> <span class="mi">10</span>
        <span class="k">end</span>
      <span class="k">end</span>
      <span class="k">return</span> <span class="n">a</span>
    <span class="k">rescue</span> <span class="o">=&gt;</span> <span class="n">e</span>
      <span class="k">raise</span>
    <span class="k">end</span>
  <span class="k">end</span>

  <span class="c1"># ========================================================</span>
  <span class="c1"># 正規化</span>
  <span class="c1"># ( Floating Normalize(A) )</span>
  <span class="c1">#</span>
  <span class="c1">#   [引数]   a : 正規化前データ配列</span>
  <span class="c1">#   [返り値] a : 正規化後データ配列</span>
  <span class="c1"># ========================================================</span>
  <span class="k">def</span> <span class="nf">fnorm</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
    <span class="n">k</span> <span class="o">=</span> <span class="mi">0</span>  <span class="c1"># 上位の 0 の個数</span>

    <span class="k">begin</span>
      <span class="c1"># 小数点以下第１位が桁あふれする場合、右に１桁シフト＆べき指数加算</span>
      <span class="k">if</span> <span class="n">a</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">&gt;=</span> <span class="mi">10</span>
        <span class="p">(</span><span class="n">a</span><span class="p">.</span><span class="nf">size</span> <span class="o">-</span> <span class="mi">2</span><span class="p">).</span><span class="nf">downto</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span> <span class="p">{</span> <span class="o">|</span><span class="n">i</span><span class="o">|</span> <span class="n">a</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">a</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="p">}</span>
        <span class="n">a</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="n">a</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">%</span> <span class="mi">10</span>
        <span class="n">a</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">a</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">/</span> <span class="mi">10</span>
        <span class="n">a</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span>
      <span class="k">end</span>
      <span class="c1"># 正規化前のべき指数を退避</span>
      <span class="n">exp</span> <span class="o">=</span> <span class="n">a</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
      <span class="c1"># 上位の 0 の個数をカウント</span>
      <span class="mi">1</span><span class="p">.</span><span class="nf">upto</span><span class="p">(</span><span class="n">a</span><span class="p">.</span><span class="nf">size</span><span class="p">)</span> <span class="k">do</span> <span class="o">|</span><span class="n">i</span><span class="o">|</span>
        <span class="k">unless</span> <span class="n">a</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">==</span> <span class="mi">0</span>
          <span class="n">k</span> <span class="o">=</span> <span class="n">i</span> <span class="o">-</span> <span class="mi">1</span>
          <span class="k">break</span>
        <span class="k">end</span>
      <span class="k">end</span>
      <span class="c1"># 上位の 0 の部分に以降の数字をシフト</span>
      <span class="mi">1</span><span class="p">.</span><span class="nf">upto</span><span class="p">(</span><span class="n">a</span><span class="p">.</span><span class="nf">size</span> <span class="o">-</span> <span class="n">k</span><span class="p">)</span> <span class="p">{</span> <span class="o">|</span><span class="n">i</span><span class="o">|</span> <span class="n">a</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">a</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="n">k</span><span class="p">]</span> <span class="p">}</span>
      <span class="c1"># シフト後の下位に 0 をセット</span>
      <span class="p">(</span><span class="n">a</span><span class="p">.</span><span class="nf">size</span> <span class="o">-</span> <span class="n">k</span><span class="p">).</span><span class="nf">upto</span><span class="p">(</span><span class="n">a</span><span class="p">.</span><span class="nf">size</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span> <span class="p">{</span> <span class="o">|</span><span class="n">i</span><span class="o">|</span> <span class="n">a</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span> <span class="p">}</span>
      <span class="c1"># べき指数セット</span>
      <span class="n">a</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">exp</span> <span class="o">-</span> <span class="n">k</span>
      <span class="k">return</span> <span class="n">a</span>
    <span class="k">rescue</span> <span class="o">=&gt;</span> <span class="n">e</span>
      <span class="k">raise</span>
    <span class="k">end</span>
  <span class="k">end</span>

  <span class="c1"># ========================================================</span>
  <span class="c1"># 結果出力 (指数表示)</span>
  <span class="c1">#</span>
  <span class="c1">#   [引数]   s    : 結果出力データ配列</span>
  <span class="c1">#   [返り値] なし</span>
  <span class="c1"># ========================================================</span>
  <span class="k">def</span> <span class="nf">fdisp</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">s</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">&lt;</span> <span class="mi">0</span>
      <span class="nb">puts</span> <span class="s2">"ANS. &lt; 0</span><span class="se">\n</span><span class="s2">Please retry!"</span>
      <span class="nb">exit</span>
    <span class="k">end</span>
    <span class="nb">print</span> <span class="s2">"0."</span>
    <span class="c1"># 1行に50桁出力</span>
    <span class="mi">1</span><span class="p">.</span><span class="nf">upto</span><span class="p">(</span><span class="n">s</span><span class="p">.</span><span class="nf">size</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span> <span class="k">do</span> <span class="o">|</span><span class="n">i</span><span class="o">|</span>
      <span class="nb">print</span> <span class="n">s</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
      <span class="nb">print</span> <span class="s2">" "</span>    <span class="k">if</span> <span class="n">i</span> <span class="o">%</span> <span class="mi">10</span> <span class="o">==</span> <span class="mi">0</span>
      <span class="nb">print</span> <span class="s2">"</span><span class="se">\n</span><span class="s2">  "</span> <span class="k">if</span> <span class="n">i</span> <span class="o">%</span> <span class="mi">50</span> <span class="o">==</span> <span class="mi">0</span>
    <span class="k">end</span>
    <span class="c1"># べき指数</span>
    <span class="nb">puts</span> <span class="n">s</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="p">?</span> <span class="s2">" * 10^(</span><span class="si">#{</span><span class="n">s</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="si">}</span><span class="s2">)"</span> <span class="p">:</span> <span class="s2">" * 10^</span><span class="si">#{</span><span class="n">s</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="si">}</span><span class="s2">"</span>
    <span class="nb">puts</span>
  <span class="k">rescue</span> <span class="o">=&gt;</span> <span class="n">e</span>
    <span class="k">raise</span>
  <span class="k">end</span>
<span class="k">end</span>

<span class="k">if</span> <span class="kp">__FILE__</span> <span class="o">==</span> <span class="vg">$0</span>
  <span class="k">begin</span>
    <span class="c1"># 計算クラスインスタンス化</span>
    <span class="n">obj</span> <span class="o">=</span> <span class="no">AddBigFloat</span><span class="p">.</span><span class="nf">new</span>
    <span class="c1"># 計算</span>
    <span class="n">obj</span><span class="p">.</span><span class="nf">calc</span>
  <span class="k">rescue</span> <span class="o">=&gt;</span> <span class="n">e</span>
    <span class="vg">$stderr</span><span class="p">.</span><span class="nf">puts</span> <span class="s2">"[</span><span class="si">#{</span><span class="n">e</span><span class="p">.</span><span class="nf">class</span><span class="si">}</span><span class="s2">] </span><span class="si">#{</span><span class="n">e</span><span class="p">.</span><span class="nf">message</span><span class="si">}</span><span class="s2">"</span>
    <span class="n">e</span><span class="p">.</span><span class="nf">backtrace</span><span class="p">.</span><span class="nf">each</span><span class="p">{</span> <span class="o">|</span><span class="n">tr</span><span class="o">|</span> <span class="vg">$stderr</span><span class="p">.</span><span class="nf">puts</span> <span class="s2">"</span><span class="se">\t</span><span class="si">#{</span><span class="n">tr</span><span class="si">}</span><span class="s2">"</span> <span class="p">}</span>
  <span class="k">end</span>
<span class="k">end</span>
</pre></td></tr></tbody></table></code></pre></figure>

<ul>
  <li><a href="https://gist.github.com/komasaru/5442441" title="Gist - Ruby script to compute big-digit floats.">Gist - Ruby script to compute big-digit floats.</a></li>
</ul>

<h3 id="3-実行">3. 実行</h3>

<p>まず、実行権限を付与。</p>

<div class="language-text highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ chmod +x add_big_float.rb
</code></pre></div></div>

<p>そして、実行。</p>

<div class="language-text highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ ./add_big_float.rb
A =
0.2783737238 1303344608 9347169684 3282329196 5307669513 
  7488984027 9152724850 2953114516 5239024752 8881375559 
  4776030762 3200933909 2347805946 9027550863 4980016846 
  6437587376 3724863387 8289052079 2546386916 9463209606 
  9430104727 1417817305 6061340308 5886569658 3934807534 
  9022223169 9237629594 8589623932 8572577452 2995044468 
  1434355236 5967148315 0728551183 9326565879 0903552919 
  7193617021 7185307099 3793766010 3818257051 2043669198 
  7660839436 6124646218 0098359769 6767128550 1117072199 
  4079639090 8053259429 4657834539 9199989746 9142523390 
  0927673070 1972138156 9454265642 0547769513 2273878983 
  5658314613 3225502634 8727654863 4352393649 2731691913 
  2857300925 7959917752 5874362423 1196284003 9762780233 
  7490294640 8727767922 5976319116 4839032889 7603116162 
  9036273941 1385721188 1044449806 1580096886 0196620642 
  0616850330 5270598331 7963643161 0714343433 0403405273 
  4531243862 8516049185 0402843189 1629731926 2095630644 
  3475105637 9206505869 5169996557 5174741190 6613444696 
  4361713529 1213966077 1722382995 0672113765 2961341066 
  4279110855 7882795131 3033069262 8216293523 9587644749 
   * 10^473

B =
0.0022590812 3710169960 1089793981 3064983884 8976399063 
  0174741110 7085151138 3069839274 5570373653 4920990302 
  1324232041 2352590657 5877070452 1072953500 2407669857 
  6132879125 2529649102 6269263549 9717346260 0662788373 
  1945326059 4405971259 6353011882 7202514913 1548805895 
  5874073241 7889888186 6570490556 1949198176 0614375744 
  8623094975 0675069190 3405049410 1785796064 3289120677 
  3095849091 2012628735 6174677007 9165521273 3298469487 
  1592269693 2551540460 8420790624 5236765502 2036639189 
  8255945043 2041013035 9744058240 4809179002 9289582357 
  8719417926 8618216275 8595304962 6226968526 4466104488 
  7167567081 5603149454 0633372385 3552837529 8976482766 
  0420057267 1270892710 4581766110 4824554239 7046866365 
  5911003836 6570217932 5684673486 0072372723 3905035754 
  8771140381 0586414934 2960402420 2668236561 2089882061 
  6747293260 9461701944 1168686412 8630504241 5542791687 
  4284354351 7828275583 6839070337 5711975924 4086873321 
  2040262977 9734719019 5731178504 8276668426 2971662580 
  5066388788 2366427242 1882430337 6182753573 8337974385 
  8914788122 5122202068 9952880775 7626255357 6530388836 
   * 10^349

C =
0.0223515925 3368391270 4463511258 6838833759 5344753262 
  9298194326 6849626597 4092467072 1883731160 2936293254 
  9591015466 2862138558 7921550146 9830278274 7052198091 
  3162472250 5165091329 3265422066 8905699592 7889242878 
  1589146326 4595601809 5825637063 8874329409 5548438178 
  7824023837 6842833089 0563265810 5163775672 4359175871 
  7523234617 0939926181 4347155887 0876924642 6704926060 
  4752210118 4714967153 2454327713 5988714622 6605249346 
  9447198350 6644704623 1670956736 6329244574 4852326315 
  1782508575 2386060636 4910666220 6204822996 5681950263 
  0784586598 4507427723 1537926607 8576097458 7197469594 
  4129706598 5813054378 3653792810 3124948815 8397367015 
  3030694408 6362597428 1053575333 6750544320 4213368161 
  0932897812 6921253272 7919690724 6679955380 2214087007 
  7801741483 1836299808 9203585085 2352469586 0418839310 
  4977156521 7471613380 8878610577 3104178078 3844178350 
  8862935375 6050332904 3349661461 0753487181 5552636745 
  6878809641 7832467427 3930317837 8647324176 7295023847 
  8564697338 5348993215 3433521128 8695055944 3107985729 
  3300541411 4102409842 5813750909 6607397015 7712412612 
   * 10^448

A + B =
0.2783737238 1303344608 9347169684 3282329196 5307669513 
  7488984027 9152724850 2953114516 5239024752 8881375559 
  4776030762 3200933909 2347808205 9839921880 4940125826 
  0418893874 7609761027 7352069553 3657095432 0601516590 
  8704661764 5071309404 6363472731 7927804917 4592395241 
  9474330465 2737870361 8447237220 7697830417 2097671394 
  4984326971 2227214593 9101745716 5386006476 2163188220 
  9076337273 2098461979 9689353417 7060046040 0230326247 
  8217034356 4300707655 5843222079 1742196057 0307412704 
  3489817670 4117588341 5335144124 8291191009 7878140857 
  7935589622 3245468003 8941424869 0241024667 2734721062 
  6282838289 8727706298 7917480457 9395597750 5767666319 
  1097781843 6962846710 8232234364 9123145825 6038639764 
  2452917337 7254214533 0465035873 1920593204 7057179500 
  1421629224 8915618836 3810491811 8847223975 2907078818 
  6727332785 9510303018 4329234261 4551000454 8335973740 
  8017251100 1239439688 6157720303 2010790567 7029926684 
  5895372461 5767714857 7231671286 8435687360 8557561565 
  0774576579 5455520356 3409811430 5023896592 8545024973 
  4616682053 3807203818 6354273289 1194266995 8607217866 
   * 10^473

A - C =
0.2783737238 1303344608 9347167449 1689795512 6180624878 
  6363115639 5776771402 7626821534 5806356256 6221634634 
  8068811925 0084904546 3022310036 7480922242 1124137631 
  1422889073 5897392865 8479920454 5321335266 0330276952 
  7223415670 1458538413 1773524417 1253923702 3753849278 
  5315834426 6296674110 4771745692 6188809023 9686138835 
  4853303598 8399904723 3141375951 5864856479 8285409448 
  1604908252 4721040050 1187718488 2806409901 5328344655 
  4889479549 4662380165 5163665297 6932062103 0654755489 
  8405975798 3595810906 2026316714 8342465886 3078874283 
  4305611021 9672481337 4427957796 1887924438 9501563604 
  2997528852 3479630660 1768213566 3692535518 7293855375 
  3576269676 3078333778 9172832116 1755420378 0019969697 
  9956927135 4295725788 9160209787 5057763677 2275836965 
  9963807141 5847699047 2343671788 7431778523 0215728606 
  2108326805 8311994143 4032593389 5062168716 9065316487 
  3473512821 0708210743 2567754559 8092171422 8805197147 
  7328998103 0488350343 1495427769 4210562865 9870705393 
  2577927055 8796293126 9337597348 0938260275 3639806731 
  2166223905 2288364051 4460136257 4075152499 8603386612 
   * 10^473
</code></pre></div></div>

<p>桁を合わせて加減算してみると、結果が合っていることが分かる。</p>

<hr />

<p>簡単な内容ですが、多倍長演算を行う際に必要になることもあるでしょう。</p>

<p>以上。</p>


        
      </section>

      <footer class="page__meta">
        
        
  


  
  
  

  <p class="page__taxonomy">
    <strong><i class="fas fa-fw fa-tags" aria-hidden="true"></i> Tags: </strong>
    <span itemprop="keywords">
    
      
      
      <a href="/tags/ruby" class="page__taxonomy-item" rel="tag">Ruby</a>
    
    </span>
  </p>




  


  
  
  

  <p class="page__taxonomy">
    <strong><i class="fas fa-fw fa-folder-open" aria-hidden="true"></i> Categories: </strong>
    <span itemprop="keywords">
    
      
      
      <a href="/categories/%E3%83%97%E3%83%AD%E3%82%B0%E3%83%A9%E3%83%9F%E3%83%B3%E3%82%B0" class="page__taxonomy-item" rel="tag">プログラミング</a><span class="sep">, </span>
    
      
      
      <a href="/categories/%E6%95%B0%E5%AD%A6" class="page__taxonomy-item" rel="tag">数学</a>
    
    </span>
  </p>


        
          
          <p class="page__date"><strong><i class="fas fa-fw fa-calendar-alt" aria-hidden="true"></i> Updated:</strong> <time datetime="2013-05-06T00:20:00+09:00">2013-05-06 00:20</time></p>
        
        <br />
      </footer>
      <div id="google-ad-3"></div>
      <br />
      <br />
      <br />
      <br />

      <section class="page__share">
  

  <a href="https://twitter.com/intent/tweet?via=rsm_mzk&text=Ruby+-+%E5%A4%9A%E5%80%8D%E9%95%B7%E6%B5%AE%E5%8B%95%E5%B0%8F%E6%95%B0%E7%82%B9%E6%95%B0%E3%81%AE%E5%8A%A0%E6%B8%9B%E7%AE%97%EF%BC%81%20https%3A%2F%2Fkomasaru.github.io%2F2013%2F05%2F06%2Fruby-add-big-float%2F" class="btn btn--twitter" onclick="window.open(this.href, 'window', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" title="Share on Twitter"><i class="fab fa-fw fa-twitter" aria-hidden="true"></i><span> Twitter</span></a>

  <a href="https://www.facebook.com/sharer/sharer.php?u=https%3A%2F%2Fkomasaru.github.io%2F2013%2F05%2F06%2Fruby-add-big-float%2F" class="btn btn--facebook" onclick="window.open(this.href, 'window', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" title="Share on Facebook"><i class="fab fa-fw fa-facebook" aria-hidden="true"></i><span> Facebook</span></a>

  

  <a href="https://www.tumblr.com/share" class="btn btn--tumblr" onclick="window.open(this.href, 'window', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" title="Share on Tumblr"><i class="fab fa-fw fa-tumblr" aria-hidden="true"></i><span> Tumblr</span></a><script id="tumblr-js" async src="https://assets.tumblr.com/share-button.js"></script>

  <a href="https://www.linkedin.com/shareArticle?mini=true&url=https%3A%2F%2Fkomasaru.github.io%2F2013%2F05%2F06%2Fruby-add-big-float%2F" class="btn btn--linkedin" onclick="window.open(this.href, 'window', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" title="Share on LinkedIn"><i class="fab fa-fw fa-linkedin" aria-hidden="true"></i><span> LinkedIn</span></a>
</section>


      <section>
        &nbsp;
        <h4>Sponsored Link</h4>
        <div id="rakuten-ad"></div>
        <div id="amazon-ad-1"></div>
      </section>
      &nbsp;
      
  <nav class="pagination">
    
      <a href="/2013/05/05/cpp-add-big-float/" class="pagination--pager" title="C++ - 多倍長浮動小数点数の加減算！
">Previous</a>
    
    
      <a href="/2013/05/09/linux-cron-play-chime/" class="pagination--pager" title="Linux - cron で時報を鳴らす！
">Next</a>
    
  </nav>

    </div>

    
      <div class="page__comments">
  
  
      <h4 class="page__comments-title">Comments</h4>
      <section id="disqus_thread"></section>
    
</div>

    
  </article>

  
  
    <div class="page__related">
      <div id="google-ad-4"></div>
      <h4 class="page__related-title">You May Also Enjoy</h4>
      <div class="grid__wrapper">
        
          



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
    <h3 class="archive__item-title" itemprop="headline">
      
        <a href="/2021/11/24/debian-11-nfs-installation/" rel="permalink">Debian 11 (bullseye) - NFS サーバ構築！
</a>
        &nbsp;<small>(2021-11-24)</small>
    </h3>
    
    <p class="archive__item-excerpt" itemprop="description">Debian GNU/Linux 11 (bullseye) に NFS サーバを構築する方法についての記録です。

以前古いバージョンでの作業時に残していた記録を参考に作業を行い、今回更新した作業記録を貼付する形式の内容となっています。
（当然ながら、興味がなければスルーしてください）

</p>
  </article>
</div>

        
          



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
    <h3 class="archive__item-title" itemprop="headline">
      
        <a href="/2021/11/17/debian-11-ftp-installation/" rel="permalink">Debian 11 (bullseye) - FTP サーバ構築！
</a>
        &nbsp;<small>(2021-11-17)</small>
    </h3>
    
    <p class="archive__item-excerpt" itemprop="description">Debian GNU/Linux 11 (bullseye) に FTP サーバを構築する方法についての記録です。

以前古いバージョンでの作業時に残していた記録を参考に作業を行い、今回更新した作業記録を貼付する形式の内容となっています。
（当然ながら、興味がなければスルーしてください）

</p>
  </article>
</div>

        
          



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
    <h3 class="archive__item-title" itemprop="headline">
      
        <a href="/2021/11/10/debian-11-bind-chroot/" rel="permalink">Debian 11 (bullseye) - DNS サーバ BIND9 の chroot 化！
</a>
        &nbsp;<small>(2021-11-10)</small>
    </h3>
    
    <p class="archive__item-excerpt" itemprop="description">Debian GNU/Linux 11 (bullseye) に構築した DNS サーバを chroot 化する方法についての記録です。

以前古いバージョンでの作業時に残していた記録を参考に作業を行い、今回更新した作業記録を貼付する形式の内容となっています。
（当然ながら、興味がなければスルーしてください）

</p>
  </article>
</div>

        
          



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
    <h3 class="archive__item-title" itemprop="headline">
      
        <a href="/2021/11/03/debian-11-bind-installation/" rel="permalink">Debian 11 (bullseye) - DNS サーバ BIND9 構築！
</a>
        &nbsp;<small>(2021-11-03)</small>
    </h3>
    
    <p class="archive__item-excerpt" itemprop="description">Debian GNU/Linux 11 (bullseye) に DNS サーバを構築する方法についての記録です。

以前古いバージョンでの作業時に残していた記録を参考に作業を行い、今回更新した作業記録を貼付する形式の内容となっています。
（当然ながら、興味がなければスルーしてください）

</p>
  </article>
</div>

        
      </div>
      <!-- &nbsp;
      <div id="amazon-wd"></div -->
    </div>
  
  
</div>

    </div>

    
      <div class="search-content">
        <div class="search-content__inner-wrap"><form onsubmit="return googleCustomSearchExecute();" id="cse-search-box-form-id">
    <input type="text" id="cse-search-input-box-id" class="search-input" tabindex="-1" placeholder="Enter your search term..." />
    </form>
    <div id="results" class="results">
        <gcse:searchresults-only></gcse:searchresults-only>    
    </div></div>

      </div>
    

    <div class="page__footer">
      <footer>
        <!-- start custom footer snippets -->
<div id="qr"><img src="/assets/images/qr.png" alt="mk-mode BLOG"></div>
<div id="google-ad-5"></div>
<div class="page__footer-etc">
  <strong>ブログ開設日</strong> <tt>2009-01-05</tt><br />
  <strong>サーバ連続稼働時間</strong> <tt id="uptime">Loading...</tt><br />
  <strong>Page View</strong><br />
  &emsp;合計 <tt id="pv-total">Loading...</tt><br />
  &emsp;今日 <tt id="pv-today">Loading...</tt><br />
  &emsp;昨日 <tt id="pv-yesterday">Loading...</tt><br />
  <small>※<a href="/privacy.html" title="「プライバシーポリシー」ページへ">プライバシーポリシー</a></small>
</div>
<p id="page-top">
  <a href="#">
    <i class="fa fa-angle-double-up fa-2x" aria-hidden="true"></i>
  </a>
</p>
<!-- end custom footer snippets -->

        <div class="page__footer-follow">
  <ul class="social-icons">
    

    
      
        
          <li><a href="https://twitter.com/rsm_mzk" rel="nofollow noopener noreferrer"><i class="fab fa-fw fa-twitter-square" aria-hidden="true"></i> Twitter</a></li>
        
      
        
      
        
          <li><a href="https://github.com/komasaru" rel="nofollow noopener noreferrer"><i class="fab fa-fw fa-github" aria-hidden="true"></i> GitHub</a></li>
        
      
        
      
        
      
        
      
    

    <li><a href="https://www.mk-mode.com/blog/atom.xml"><i class="fas fa-fw fa-rss-square" aria-hidden="true"></i> Feed</a></li>
  </ul>
</div>

<div class="page__footer-copyright">&copy; 2021 mk-mode.com. Powered by <a href="https://jekyllrb.com" rel="nofollow">Jekyll</a> &amp; <a href="https://mademistakes.com/work/minimal-mistakes-jekyll-theme/" rel="nofollow">Minimal Mistakes</a>.</div>

      </footer>
    </div>

    
  <script defer src="/assets/js/main.min.js"></script>
  <script defer src="https://use.fontawesome.com/releases/v5.6.0/js/all.js" integrity="sha384-z9ZOvGHHo21RqN5De4rfJMoAxYpaVoiYhuJXPyVmSs8yn20IE3PmBM534CffwSJI" crossorigin="anonymous"></script>
  <script defer src="/assets/js/my_custom.js"></script>


<script>
  (function () {
    var cx = 'partner-pub-7320193476057758:6328726109';
    var gcse = document.createElement('script');
    gcse.type = 'text/javascript';
    gcse.async = true;
    gcse.src = 'https://cse.google.com/cse.js?cx=' + cx;
    var s = document.getElementsByTagName('script')[0];
    s.parentNode.insertBefore(gcse, s);
  })();

  function googleCustomSearchExecute() {
    var input = document.getElementById('cse-search-input-box-id');
    var element = google.search.cse.element.getElement('searchresults-only0');
    if (input.value == '') {
      element.clearAllResults();
    } else {
      element.execute(input.value);
    }
    return false;
  }

  
</script>




  <script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-18154748-1']);
  
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>





    
  <script>
    var disqus_config = function () {
      this.page.url = "https://komasaru.github.io/2013/05/06/ruby-add-big-float/";  // Replace PAGE_URL with your page's canonical URL variable
      this.page.identifier = "/2013/05/06/ruby-add-big-float"; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
    };
    (function() { // DON'T EDIT BELOW THIS LINE
      var d = document, s = d.createElement('script');
      s.src = 'https://mkmodeblog.disqus.com/embed.js';
      s.setAttribute('data-timestamp', +new Date());
      (d.head || d.body).appendChild(s);
    })();
  </script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>


  



  </body>
</html>
