<!doctype html>
<!--
  Minimal Mistakes Jekyll Theme 4.15.1 by Michael Rose
  Copyright 2013-2019 Michael Rose - mademistakes.com | @mmistakes
  Free for personal and commercial use under the MIT license
  https://github.com/mmistakes/minimal-mistakes/blob/master/LICENSE
-->
<html lang="ja" class="no-js">
  <head>
    <meta charset="utf-8">

<!-- begin _includes/seo.html --><title>Ruby - 多桁乗算（Toom-Cook 法 (3-way)）！ - mk-mode BLOG</title>
<meta name="description" content="前回は、C++ による「多桁乗算（Toom-Cook 法 (3-way)）」のアルゴリズムを紹介しました。  C++ - 多桁乗算（Toom-Cook 法 (3-way)）！今日は、同じアルゴリズムを Ruby で実現してみました。Ruby では桁数（整数型の範囲）をあまり気にしなくても、メモリの許される限り計算できますが、それでも多桁同士の乗算では不都合になることもあるでしょう。アルゴリズムについては、上記リンクの過去記事等を参照してください。">



<meta property="og:type" content="article">
<meta property="og:locale" content="ja_JP">
<meta property="og:site_name" content="mk-mode BLOG">
<meta property="og:title" content="Ruby - 多桁乗算（Toom-Cook 法 (3-way)）！">
<meta property="og:url" content="https://komasaru.github.io/2013/04/30/ruby-big-multiply-toom-cook-3/">


  <meta property="og:description" content="前回は、C++ による「多桁乗算（Toom-Cook 法 (3-way)）」のアルゴリズムを紹介しました。  C++ - 多桁乗算（Toom-Cook 法 (3-way)）！今日は、同じアルゴリズムを Ruby で実現してみました。Ruby では桁数（整数型の範囲）をあまり気にしなくても、メモリの許される限り計算できますが、それでも多桁同士の乗算では不都合になることもあるでしょう。アルゴリズムについては、上記リンクの過去記事等を参照してください。">



  <meta property="og:image" content="https://www.mk-mode.com/blog/assets/images/about_me.png">



  <meta name="twitter:site" content="@rsm_mzk">
  <meta name="twitter:title" content="Ruby - 多桁乗算（Toom-Cook 法 (3-way)）！">
  <meta name="twitter:description" content="前回は、C++ による「多桁乗算（Toom-Cook 法 (3-way)）」のアルゴリズムを紹介しました。  C++ - 多桁乗算（Toom-Cook 法 (3-way)）！今日は、同じアルゴリズムを Ruby で実現してみました。Ruby では桁数（整数型の範囲）をあまり気にしなくても、メモリの許される限り計算できますが、それでも多桁同士の乗算では不都合になることもあるでしょう。アルゴリズムについては、上記リンクの過去記事等を参照してください。">
  <meta name="twitter:url" content="https://komasaru.github.io/2013/04/30/ruby-big-multiply-toom-cook-3/">

  
    <meta name="twitter:card" content="summary">
    
      <meta name="twitter:image" content="https://www.mk-mode.com/blog/assets/images/about_me.png">
    
  

  



  <meta property="article:published_time" content="2013-04-30T00:20:00+09:00">





  

  


<link rel="canonical" href="https://komasaru.github.io/2013/04/30/ruby-big-multiply-toom-cook-3/">





  <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "Organization",
      "url": "https://komasaru.github.io",
      "logo": "https://www.mk-mode.com/blog/assets/images/about_me.png"
    }
  </script>



  <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "Person",
      "name": "mk-mode.com",
      "url": "https://komasaru.github.io",
      "sameAs": null
    }
  </script>



  <meta name="google-site-verification" content="0kSwKhNo71fC7OeEFLllD3S11F8Pa-z_OqsBTSFxXAk" />





<!-- end _includes/seo.html -->


<link href="https://www.mk-mode.com/blog/atom.xml" type="application/atom+xml" rel="alternate" title="mk-mode BLOG Feed">

<!-- https://t.co/dKP3o1e -->
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script>
  document.documentElement.className = document.documentElement.className.replace(/\bno-js\b/g, '') + ' js ';
</script>

<!-- For all browsers -->
<link rel="stylesheet" href="/assets/css/main.css">

<!--[if IE ]>
  <style>
    /* old IE unsupported flexbox fixes */
    .greedy-nav .site-title {
      padding-right: 3em;
    }
    .greedy-nav button {
      position: absolute;
      top: 0;
      right: 0;
      height: 100%;
    }
  </style>
<![endif]-->


  
    
    <script defer src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
  


    <!-- start custom head snippets -->

<meta http-equiv="x-dns-prefetch-control" content="on">
<link rel="dns-prefetch" href="//pagead2.googlesyndication.com" />
<link rel="dns-prefetch" href="//googleads.g.doubleclick.net" />
<link rel="dns-prefetch" href="//tpc.googlesyndication.com" />
<link rel="dns-prefetch" href="//cm.g.doubleclick.net" />
<link rel="dns-prefetch" href="//www.gstatic.com" />
<link rel="dns-prefetch" href="//fonts.gstatic.com" />
<link rel='dns-prefetch' href='//use.fontawesome.com' />
<link rel="dns-prefetch" href="//twitter.com" />
<link rel="dns-prefetch" href="//www.facebook.com" />

<link rel="icon" href="/assets/images/favicon.ico">
<script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-18154748-1']);
  
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>
  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
    (adsbygoogle = window.adsbygoogle || []).push({
      google_ad_client: "ca-pub-7320193476057758",
      enable_page_level_ads: true
    });
  </script>


<!-- end custom head snippets -->

  </head>

  <body class="layout--single wide">

    <!--[if lt IE 9]>
<div class="notice--danger align-center" style="margin: 0;">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience.</div>
<![endif]-->

    

<div class="masthead">
  <div class="masthead__inner-wrap">
    <div class="masthead__menu">
      <nav id="site-nav" class="greedy-nav">
        
        <a class="site-title" href="/">mk-mode BLOG</a>
        <ul class="visible-links"><li class="masthead__menu-item">
              <a href="/year-archive/" >Archives</a>
            </li><li class="masthead__menu-item">
              <a href="/categories/" >Categories</a>
            </li><li class="masthead__menu-item">
              <a href="/tags/" >Tags</a>
            </li><li class="masthead__menu-item">
              <a href="https://www.mk-mode.com/rails/calendar/calendar" >Calendar</a>
            </li><li class="masthead__menu-item">
              <a href="https://www.mk-mode.com/rails/jmaxml" >JMAXML</a>
            </li><li class="masthead__menu-item">
              <a href="/privacy.html" >Privacy Policy</a>
            </li></ul>
        
        <button class="search__toggle" type="button">
          <span class="visually-hidden">Toggle search</span>
          <svg class="icon" width="16" height="16" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 15.99 16">
            <path d="M15.5,13.12L13.19,10.8a1.69,1.69,0,0,0-1.28-.55l-0.06-.06A6.5,6.5,0,0,0,5.77,0,6.5,6.5,0,0,0,2.46,11.59a6.47,6.47,0,0,0,7.74.26l0.05,0.05a1.65,1.65,0,0,0,.5,1.24l2.38,2.38A1.68,1.68,0,0,0,15.5,13.12ZM6.4,2A4.41,4.41,0,1,1,2,6.4,4.43,4.43,0,0,1,6.4,2Z" transform="translate(-.01)"></path>
          </svg>
        </button>
        
        <button class="greedy-nav__toggle hidden" type="button">
          <span class="visually-hidden">Toggle menu</span>
          <div class="navicon"></div>
        </button>
        <ul class="hidden-links hidden"></ul>
      </nav>
    </div>
  </div>
</div>


    <div class="initial-content">
      



<div id="main" role="main">
  
  <div class="sidebar sticky">
  


<div itemscope itemtype="https://schema.org/Person">

  
    <div class="author__avatar">
      

      
        <img src="/assets/images/about_me.png" alt="mk-mode.com" itemprop="image">
      
    </div>
  

  <div class="author__content">
    
      <h3 class="author__name" itemprop="name">mk-mode.com</h3>
    
    
      <p class="author__bio" itemprop="description">
        Linux, Debian, IT, Server, PG, Ruby, Rails, Python, C++, Fortran, PC, MariaDB, math, GIS, etc...
      </p>
    
  </div>

  <div class="author__urls-wrapper">
    <button class="btn btn--inverse">Follow</button>
    <ul class="author__urls social-icons">
      
        <li itemprop="homeLocation" itemscope itemtype="https://schema.org/Place">
          <i class="fas fa-fw fa-map-marker-alt" aria-hidden="true"></i> <span itemprop="name">Ruby City MATSUE</span>
        </li>
      

      
        
          
        
          
            <li><a href="https://www.mk-mode.com" rel="nofollow noopener noreferrer"><i class="fas fa-fw fa-link" aria-hidden="true"></i> mk-mode SITE</a></li>
          
        
          
            <li><a href="https://komasaru.github.io" rel="nofollow noopener noreferrer"><i class="fas fa-fw fa-link" aria-hidden="true"></i> mk-mode BLOG (clone)</a></li>
          
        
          
            <li><a href="https://mk-mode.tumblr.com" rel="nofollow noopener noreferrer"><i class="fas fa-fw fa-link" aria-hidden="true"></i> mk-mode TUMBLR</a></li>
          
        
          
            <li><a href="https://mk-ephemeris.tumblr.com" rel="nofollow noopener noreferrer"><i class="fas fa-fw fa-link" aria-hidden="true"></i> mk-mode EPHEMERIS</a></li>
          
        
          
            <li><a href="https://twitter.com/rsm_mzk" rel="nofollow noopener noreferrer"><i class="fab fa-fw fa-twitter-square" aria-hidden="true"></i> Twitter</a></li>
          
        
          
        
          
            <li><a href="https://github.com/komasaru" rel="nofollow noopener noreferrer"><i class="fab fa-fw fa-github" aria-hidden="true"></i> GitHub</a></li>
          
        
          
        
      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      <!--
  <li>
    <a href="http://link-to-whatever-social-network.com/user/" itemprop="sameAs" rel="nofollow noopener noreferrer">
      <i class="fas fa-fw" aria-hidden="true"></i> Custom Social Profile Link
    </a>
  </li>
-->
    </ul>
  </div>
</div>

  
  </div>


  <article class="page" itemscope itemtype="https://schema.org/CreativeWork">
    <meta itemprop="headline" content="Ruby - 多桁乗算（Toom-Cook 法 (3-way)）！">
    <meta itemprop="description" content="前回は、C++ による「多桁乗算（Toom-Cook 法 (3-way)）」のアルゴリズムを紹介しました。  C++ - 多桁乗算（Toom-Cook 法 (3-way)）！今日は、同じアルゴリズムを Ruby で実現してみました。Ruby では桁数（整数型の範囲）をあまり気にしなくても、メモリの許される限り計算できますが、それでも多桁同士の乗算では不都合になることもあるでしょう。アルゴリズムについては、上記リンクの過去記事等を参照してください。">
    <meta itemprop="datePublished" content="April 30, 2013">
    

    <div class="page__inner-wrap">
      
        <header>
          <!-- div id="google-ad-1"></div -->
          <h1 id="page-title" class="page__title" itemprop="headline">Ruby - 多桁乗算（Toom-Cook 法 (3-way)）！
</h1>
          
          
            
            <p class="page__date"><small><strong><i class="fas fa-fw fa-calendar-alt" aria-hidden="true"></i> Updated:</strong> <time datetime="2013-04-30T00:20:00+09:00">2013-04-30 00:20</time></small></p>
          
        </header>
      
      <div id="google-ad-2"></div>
      <br />

      <section class="page__content" itemprop="text">
        
        <p>前回は、C++ による「多桁乗算（Toom-Cook 法 (3-way)）」のアルゴリズムを紹介しました。</p>

<ul>
  <li><a href="/2013/04/29/cpp-big-multiply-toom-cook-3/" title="C++ - 多桁乗算（Toom-Cook 法 (3-way)）！">C++ - 多桁乗算（Toom-Cook 法 (3-way)）！</a></li>
</ul>

<p>今日は、同じアルゴリズムを Ruby で実現してみました。<br />
Ruby では桁数（整数型の範囲）をあまり気にしなくても、メモリの許される限り計算できますが、それでも多桁同士の乗算では不都合になることもあるでしょう。
アルゴリズムについては、上記リンクの過去記事等を参照してください。</p>

<!--more-->

<p>実際、ほとんど同じです。</p>

<p>以下、Ruby によるサンプルスクリプトです。</p>

<h3 id="0-前提条件">0. 前提条件</h3>

<ul>
  <li>Linux Mint 14 Nadia (64bit) での作業を想定。</li>
  <li>Ruby 2.0.0-p0 を使用。</li>
</ul>

<h3 id="1-ruby-スクリプト作成">1. Ruby スクリプト作成</h3>

<p>スクリプト中の随所にあるテスト用コメントを解除すると、１ループあたりの乗算回数をカウントしたり、100 ループした場合の処理時間を計測するようになっている。<br />
また、計算可能な最大桁数の設定を 3 のべき乗桁にしている。</p>

<p>File: <code class="language-plaintext highlighter-rouge">multiply_toom_cook_3.rb</code></p>

<figure class="highlight"><pre><code class="language-ruby" data-lang="ruby"><table class="rouge-table"><tbody><tr><td class="gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
153
154
155
156
157
158
159
160
161
162
163
164
165
166
167
168
169
170
171
172
173
174
175
176
177
178
179
180
181
182
183
184
185
186
187
188
189
190
191
192
193
194
195
196
197
198
199
200
201
202
203
204
205
206
207
208
209
210
211
212
213
214
215
216
217
218
219
220
221
222
223
224
225
226
227
228
229
230
231
232
233
234
235
236
237
238
239
240
241
242
243
244
245
246
247
248
249
250
</pre></td><td class="code"><pre><span class="c1">#! /usr/local/bin/ruby</span>
<span class="c1">#*********************************************</span>
<span class="c1"># 多倍長乗算 ( by Toom-Cook 法 (3-way) )</span>
<span class="c1">#   - 多倍長 * 多倍長</span>
<span class="c1">#   - 最下位の桁を配列の先頭とする考え方</span>
<span class="c1">#*********************************************</span>
<span class="c1">#</span>
<span class="k">class</span> <span class="nc">MultiplyToomCook3</span>
  <span class="no">D_MAX</span> <span class="o">=</span> <span class="mi">729</span>  <span class="c1"># 計算可能な最大桁数 ( 3 のべき乗 )</span>
  <span class="no">D</span>     <span class="o">=</span> <span class="mi">729</span>  <span class="c1"># 実際に計算する桁数 ( D_MAX 以下 )</span>

  <span class="k">def</span> <span class="nf">initialize</span>
    <span class="c1"># ====================================== #</span>
    <span class="c1"># テストなので、被乗数・乗数は乱数を使用 #</span>
    <span class="c1"># ====================================== #</span>
    <span class="vi">@a</span><span class="p">,</span> <span class="vi">@b</span> <span class="o">=</span> <span class="no">Array</span><span class="p">.</span><span class="nf">new</span><span class="p">,</span> <span class="no">Array</span><span class="p">.</span><span class="nf">new</span>
    <span class="n">rnd_a</span><span class="p">,</span> <span class="n">rnd_b</span> <span class="o">=</span> <span class="no">Random</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span> <span class="no">Random</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
    <span class="c1"># 被乗数・乗数設定</span>
    <span class="mi">0</span><span class="p">.</span><span class="nf">upto</span><span class="p">(</span><span class="no">D</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span> <span class="k">do</span> <span class="o">|</span><span class="n">i</span><span class="o">|</span>
      <span class="vi">@a</span> <span class="o">&lt;&lt;</span> <span class="n">rnd_a</span><span class="p">.</span><span class="nf">rand</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
      <span class="vi">@b</span> <span class="o">&lt;&lt;</span> <span class="n">rnd_b</span><span class="p">.</span><span class="nf">rand</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
    <span class="k">end</span>
  <span class="k">end</span>

  <span class="c1"># 計算 ( Toom-Cook 法 )</span>
  <span class="k">def</span> <span class="nf">calc_toom_cook</span>
    <span class="c1"># 配列初期設定 ( コンストラクタで生成した配列を使用 )</span>
    <span class="n">a</span><span class="p">,</span> <span class="n">b</span> <span class="o">=</span> <span class="vi">@a</span><span class="p">,</span> <span class="vi">@b</span>  <span class="c1"># 被乗数配列、乗数配列</span>
    <span class="n">z</span> <span class="o">=</span> <span class="no">Array</span><span class="p">.</span><span class="nf">new</span>  <span class="c1"># 計算結果用配列</span>

    <span class="k">begin</span>
      <span class="c1"># 最大桁に満たない部分は 0 を設定</span>
      <span class="p">(</span><span class="no">D_MAX</span> <span class="o">-</span> <span class="n">a</span><span class="p">.</span><span class="nf">size</span><span class="p">).</span><span class="nf">times</span> <span class="p">{</span> <span class="o">|</span><span class="n">i</span><span class="o">|</span> <span class="n">a</span> <span class="o">&lt;&lt;</span> <span class="mi">0</span> <span class="p">}</span>
      <span class="p">(</span><span class="no">D_MAX</span> <span class="o">-</span> <span class="n">b</span><span class="p">.</span><span class="nf">size</span><span class="p">).</span><span class="nf">times</span> <span class="p">{</span> <span class="o">|</span><span class="n">i</span><span class="o">|</span> <span class="n">b</span> <span class="o">&lt;&lt;</span> <span class="mi">0</span> <span class="p">}</span>
      <span class="c1"># ====[ TEST ]===&gt;</span>
      <span class="c1"># t1 = Time.now      # 計算開始時刻</span>
      <span class="c1"># 100.times do |l|  # 100 回 LOOP</span>
      <span class="c1"># @cnt_mul = 0       # 乗算回数リセット</span>
      <span class="c1"># &lt;===[ TEST ]====</span>
      <span class="c1"># 乗算 ( Toom-Cook 法 (3-way) )</span>
      <span class="n">z</span> <span class="o">=</span> <span class="n">multiply_toom_cook_3</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">)</span>
      <span class="c1"># ====[ TEST ]===&gt;</span>
      <span class="c1"># end</span>
      <span class="c1"># t2 = Time.now      # 計算終了時刻</span>
      <span class="c1"># @tt = t2 - t1      # 計算時間</span>
      <span class="c1"># &lt;===[ TEST ]====</span>
      <span class="c1"># 繰り上がり処理</span>
      <span class="n">z</span> <span class="o">=</span> <span class="n">do_carry</span><span class="p">(</span><span class="n">z</span><span class="p">)</span>
      <span class="c1"># 結果出力</span>
      <span class="nb">display</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">z</span><span class="p">)</span>
    <span class="k">rescue</span> <span class="o">=&gt;</span> <span class="n">e</span>
      <span class="k">raise</span>
    <span class="k">end</span>
  <span class="k">end</span>

  <span class="kp">private</span>

  <span class="c1"># 乗算 ( 標準(筆算)法 )</span>
  <span class="k">def</span> <span class="nf">multiply_normal</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">)</span>
    <span class="c1"># 配列サイズ取得</span>
    <span class="n">a_len</span><span class="p">,</span> <span class="n">b_len</span> <span class="o">=</span> <span class="n">a</span><span class="p">.</span><span class="nf">size</span><span class="p">,</span> <span class="n">b</span><span class="p">.</span><span class="nf">size</span>
    <span class="c1"># 計算結果初期化</span>
    <span class="n">z</span> <span class="o">=</span> <span class="no">Array</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="n">a_len</span> <span class="o">+</span> <span class="n">b_len</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
    <span class="c1"># 各配列を各桁とみなして乗算</span>
    <span class="n">b_len</span><span class="p">.</span><span class="nf">times</span> <span class="k">do</span> <span class="o">|</span><span class="n">j</span><span class="o">|</span>
      <span class="n">a_len</span><span class="p">.</span><span class="nf">times</span> <span class="k">do</span> <span class="o">|</span><span class="n">i</span><span class="o">|</span>
        <span class="n">z</span><span class="p">[</span><span class="n">j</span> <span class="o">+</span> <span class="n">i</span><span class="p">]</span> <span class="o">+=</span> <span class="n">a</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">*</span> <span class="n">b</span><span class="p">[</span><span class="n">j</span><span class="p">]</span>
        <span class="c1"># ====[ TEST ]===&gt;</span>
        <span class="c1"># @cnt_mul += 1  # 乗算カウント</span>
        <span class="c1"># &lt;===[ TEST ]====</span>
      <span class="k">end</span>
    <span class="k">end</span>
    <span class="k">return</span> <span class="n">z</span>
  <span class="k">rescue</span> <span class="o">=&gt;</span> <span class="n">e</span>
    <span class="k">raise</span>
  <span class="k">end</span>

  <span class="c1"># 乗算 ( Toom-Cook 法 (3-way) )</span>
  <span class="c1">#   結果用配列は以下のように配置し、</span>
  <span class="c1">#     +----+----+----+----+----+----+----+----+----+----+</span>
  <span class="c1">#     |   c0    |   c2    |   c4    |   c1    |   c3    |</span>
  <span class="c1">#     +----+----+----+----+----+----+----+----+----+----+</span>
  <span class="c1">#   最後に、c1, c3 を所定の位置に加算する。</span>
  <span class="c1">#     +----+----+----+----+----+----+</span>
  <span class="c1">#     |   c0    |   c2    |   c4    |</span>
  <span class="c1">#     +----+----+----+----+----+----+</span>
  <span class="c1">#          +----+----+----+----+</span>
  <span class="c1">#          |   c1    |   c3    |</span>
  <span class="c1">#          +----+----+----+----+</span>
  <span class="k">def</span> <span class="nf">multiply_toom_cook_3</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">)</span>
    <span class="c1"># 各種宣言</span>
    <span class="n">a_m1</span><span class="p">,</span> <span class="n">a_m2</span>      <span class="o">=</span> <span class="no">Array</span><span class="p">.</span><span class="nf">new</span><span class="p">,</span> <span class="no">Array</span><span class="p">.</span><span class="nf">new</span>
    <span class="n">a_0</span><span class="p">,</span> <span class="n">a_1</span><span class="p">,</span> <span class="n">a_inf</span> <span class="o">=</span> <span class="no">Array</span><span class="p">.</span><span class="nf">new</span><span class="p">,</span> <span class="no">Array</span><span class="p">.</span><span class="nf">new</span><span class="p">,</span> <span class="no">Array</span><span class="p">.</span><span class="nf">new</span>
    <span class="n">b_m1</span><span class="p">,</span> <span class="n">b_m2</span>      <span class="o">=</span> <span class="no">Array</span><span class="p">.</span><span class="nf">new</span><span class="p">,</span> <span class="no">Array</span><span class="p">.</span><span class="nf">new</span>
    <span class="n">b_0</span><span class="p">,</span> <span class="n">b_1</span><span class="p">,</span> <span class="n">b_inf</span> <span class="o">=</span> <span class="no">Array</span><span class="p">.</span><span class="nf">new</span><span class="p">,</span> <span class="no">Array</span><span class="p">.</span><span class="nf">new</span><span class="p">,</span> <span class="no">Array</span><span class="p">.</span><span class="nf">new</span>
    <span class="n">c_m1</span><span class="p">,</span> <span class="n">c_m2</span>      <span class="o">=</span> <span class="no">Array</span><span class="p">.</span><span class="nf">new</span><span class="p">,</span> <span class="no">Array</span><span class="p">.</span><span class="nf">new</span>
    <span class="n">c_0</span><span class="p">,</span> <span class="n">c_1</span><span class="p">,</span> <span class="n">c_inf</span> <span class="o">=</span> <span class="no">Array</span><span class="p">.</span><span class="nf">new</span><span class="p">,</span> <span class="no">Array</span><span class="p">.</span><span class="nf">new</span><span class="p">,</span> <span class="no">Array</span><span class="p">.</span><span class="nf">new</span>
    <span class="n">c0</span><span class="p">,</span> <span class="n">c1</span><span class="p">,</span> <span class="n">c2</span>      <span class="o">=</span> <span class="no">Array</span><span class="p">.</span><span class="nf">new</span><span class="p">,</span> <span class="no">Array</span><span class="p">.</span><span class="nf">new</span><span class="p">,</span> <span class="no">Array</span><span class="p">.</span><span class="nf">new</span>
    <span class="n">c3</span><span class="p">,</span> <span class="n">c4</span>          <span class="o">=</span> <span class="no">Array</span><span class="p">.</span><span class="nf">new</span><span class="p">,</span> <span class="no">Array</span><span class="p">.</span><span class="nf">new</span>

    <span class="k">begin</span>
      <span class="c1"># 配列サイズ取得</span>
      <span class="n">t_len</span> <span class="o">=</span> <span class="n">a</span><span class="p">.</span><span class="nf">size</span>
      <span class="c1"># ９桁（配列９個）になった場合は標準乗算</span>
      <span class="k">return</span> <span class="n">multiply_normal</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">)</span> <span class="k">if</span> <span class="n">t_len</span> <span class="o">&lt;=</span> <span class="mi">9</span>
      <span class="c1"># 配列分割</span>
      <span class="n">a2</span> <span class="o">=</span> <span class="n">a</span><span class="p">[(</span><span class="n">t_len</span> <span class="o">*</span> <span class="mi">2</span> <span class="o">/</span> <span class="mi">3</span><span class="p">)</span><span class="o">..-</span><span class="mi">1</span><span class="p">]</span>
      <span class="n">a1</span> <span class="o">=</span> <span class="n">a</span><span class="p">[(</span><span class="n">t_len</span> <span class="o">/</span> <span class="mi">3</span><span class="p">)</span><span class="o">..</span><span class="p">(</span><span class="n">t_len</span> <span class="o">*</span> <span class="mi">2</span> <span class="o">/</span> <span class="mi">3</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)]</span>
      <span class="n">a0</span> <span class="o">=</span> <span class="n">a</span><span class="p">[</span><span class="mi">0</span><span class="o">..</span><span class="p">(</span><span class="n">t_len</span> <span class="o">/</span> <span class="mi">3</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)]</span>
      <span class="n">b2</span> <span class="o">=</span> <span class="n">b</span><span class="p">[(</span><span class="n">t_len</span> <span class="o">*</span> <span class="mi">2</span> <span class="o">/</span> <span class="mi">3</span><span class="p">)</span><span class="o">..-</span><span class="mi">1</span><span class="p">]</span>
      <span class="n">b1</span> <span class="o">=</span> <span class="n">b</span><span class="p">[(</span><span class="n">t_len</span> <span class="o">/</span> <span class="mi">3</span><span class="p">)</span><span class="o">..</span><span class="p">(</span><span class="n">t_len</span> <span class="o">*</span> <span class="mi">2</span> <span class="o">/</span> <span class="mi">3</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)]</span>
      <span class="n">b0</span> <span class="o">=</span> <span class="n">b</span><span class="p">[</span><span class="mi">0</span><span class="o">..</span><span class="p">(</span><span class="n">t_len</span> <span class="o">/</span> <span class="mi">3</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)]</span>
      <span class="c1"># a(-2) = 4 * a2 - 2 * a1 + a0, b(1) = 4 * b2 - 2 * b1 + b0 (by シフト演算)</span>
      <span class="p">(</span><span class="n">t_len</span> <span class="o">/</span> <span class="mi">3</span><span class="p">).</span><span class="nf">times</span> <span class="k">do</span> <span class="o">|</span><span class="n">i</span><span class="o">|</span>
        <span class="n">a_m2</span> <span class="o">&lt;&lt;</span> <span class="p">(</span><span class="n">a2</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">&lt;&lt;</span> <span class="mi">2</span><span class="p">)</span> <span class="o">-</span> <span class="p">(</span><span class="n">a1</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">&lt;&lt;</span> <span class="mi">1</span><span class="p">)</span> <span class="o">+</span> <span class="n">a0</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
        <span class="n">b_m2</span> <span class="o">&lt;&lt;</span> <span class="p">(</span><span class="n">b2</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">&lt;&lt;</span> <span class="mi">2</span><span class="p">)</span> <span class="o">-</span> <span class="p">(</span><span class="n">b1</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">&lt;&lt;</span> <span class="mi">1</span><span class="p">)</span> <span class="o">+</span> <span class="n">b0</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
      <span class="k">end</span>
      <span class="c1"># a(-1) = a2 - a1 + a0, b(1) = b2 - b1 + b0</span>
      <span class="p">(</span><span class="n">t_len</span> <span class="o">/</span> <span class="mi">3</span><span class="p">).</span><span class="nf">times</span> <span class="k">do</span> <span class="o">|</span><span class="n">i</span><span class="o">|</span>
        <span class="n">a_m1</span> <span class="o">&lt;&lt;</span> <span class="n">a2</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">-</span> <span class="n">a1</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">+</span> <span class="n">a0</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
        <span class="n">b_m1</span> <span class="o">&lt;&lt;</span> <span class="n">b2</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">-</span> <span class="n">b1</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">+</span> <span class="n">b0</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
      <span class="k">end</span>
      <span class="c1"># a(0) = a0, b(0) = b0</span>
      <span class="n">a_0</span><span class="p">,</span> <span class="n">b_0</span> <span class="o">=</span> <span class="n">a0</span><span class="p">,</span> <span class="n">b0</span>
      <span class="c1"># a(1) = a2 + a1 + a0, b(1) = b2 + b1 + b0</span>
      <span class="p">(</span><span class="n">t_len</span> <span class="o">/</span> <span class="mi">3</span><span class="p">).</span><span class="nf">times</span> <span class="k">do</span> <span class="o">|</span><span class="n">i</span><span class="o">|</span>
        <span class="n">a_1</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">a2</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">+</span> <span class="n">a1</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">+</span> <span class="n">a0</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
        <span class="n">b_1</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">b2</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">+</span> <span class="n">b1</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">+</span> <span class="n">b0</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
      <span class="k">end</span>
      <span class="c1"># a(inf) = a2, b(inf) = b2</span>
      <span class="n">a_inf</span><span class="p">,</span> <span class="n">b_inf</span><span class="o">=</span> <span class="n">a2</span><span class="p">,</span> <span class="n">b2</span>
      <span class="c1"># c(-2) = a(-2) * b(-2)</span>
      <span class="n">c_m2</span> <span class="o">=</span> <span class="n">multiply_toom_cook_3</span><span class="p">(</span><span class="n">a_m2</span><span class="p">,</span> <span class="n">b_m2</span><span class="p">)</span>
      <span class="c1"># c(-1) = a(-1) * b(-1)</span>
      <span class="n">c_m1</span> <span class="o">=</span> <span class="n">multiply_toom_cook_3</span><span class="p">(</span><span class="n">a_m1</span><span class="p">,</span> <span class="n">b_m1</span><span class="p">)</span>
      <span class="c1"># c(0) = a(0) * b(0)</span>
      <span class="n">c_0</span> <span class="o">=</span> <span class="n">multiply_toom_cook_3</span><span class="p">(</span><span class="n">a_0</span><span class="p">,</span> <span class="n">b_0</span><span class="p">)</span>
      <span class="c1"># c(1) = a(1) * b(1)</span>
      <span class="n">c_1</span> <span class="o">=</span> <span class="n">multiply_toom_cook_3</span><span class="p">(</span><span class="n">a_1</span><span class="p">,</span> <span class="n">b_1</span><span class="p">)</span>
      <span class="c1"># c(inf) = a(inf) * b(inf)</span>
      <span class="n">c_inf</span> <span class="o">=</span> <span class="n">multiply_toom_cook_3</span><span class="p">(</span><span class="n">a_inf</span><span class="p">,</span> <span class="n">b_inf</span><span class="p">)</span>
      <span class="c1"># c4 = 6 * c(inf) / 6</span>
      <span class="n">c4</span> <span class="o">=</span> <span class="n">c_inf</span>
      <span class="c1"># c3 = -c(-2) + 3 * c(-1) - 3 * c(0) + c(1) + 12 * c(inf) / 6</span>
      <span class="p">((</span><span class="n">t_len</span> <span class="o">/</span> <span class="mi">3</span><span class="p">)</span> <span class="o">*</span> <span class="mi">2</span><span class="p">).</span><span class="nf">times</span> <span class="k">do</span> <span class="o">|</span><span class="n">i</span><span class="o">|</span>
        <span class="n">c3</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>  <span class="o">=</span> <span class="o">-</span><span class="n">c_m2</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
        <span class="n">c3</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">+=</span> <span class="p">(</span><span class="n">c_m1</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">&lt;&lt;</span> <span class="mi">1</span><span class="p">)</span> <span class="o">+</span> <span class="n">c_m1</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
        <span class="n">c3</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">-=</span> <span class="p">(</span><span class="n">c_0</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">&lt;&lt;</span> <span class="mi">1</span><span class="p">)</span> <span class="o">+</span> <span class="n">c_0</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
        <span class="n">c3</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">+=</span> <span class="n">c_1</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
        <span class="n">c3</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">+=</span> <span class="p">(</span><span class="n">c_inf</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">&lt;&lt;</span> <span class="mi">3</span><span class="p">)</span> <span class="o">+</span> <span class="p">(</span><span class="n">c_inf</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">&lt;&lt;</span> <span class="mi">2</span><span class="p">)</span>
        <span class="n">c3</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">/=</span> <span class="mi">6</span>
      <span class="k">end</span>
      <span class="c1"># c2 = 3 * c(-1) - 6 * c(0) + 3 * c(1) - 6 * c(inf) / 6</span>
      <span class="p">((</span><span class="n">t_len</span> <span class="o">/</span> <span class="mi">3</span><span class="p">)</span> <span class="o">*</span> <span class="mi">2</span><span class="p">).</span><span class="nf">times</span> <span class="k">do</span> <span class="o">|</span><span class="n">i</span><span class="o">|</span>
        <span class="n">c2</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>  <span class="o">=</span> <span class="p">(</span><span class="n">c_m1</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">&lt;&lt;</span> <span class="mi">1</span><span class="p">)</span> <span class="o">+</span> <span class="n">c_m1</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
        <span class="n">c2</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">-=</span> <span class="p">(</span><span class="n">c_0</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">&lt;&lt;</span> <span class="mi">2</span><span class="p">)</span> <span class="o">+</span> <span class="p">(</span><span class="n">c_0</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">&lt;&lt;</span> <span class="mi">1</span><span class="p">)</span>
        <span class="n">c2</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">+=</span> <span class="p">(</span><span class="n">c_1</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">&lt;&lt;</span> <span class="mi">1</span><span class="p">)</span> <span class="o">+</span> <span class="n">c_1</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
        <span class="n">c2</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">-=</span> <span class="p">(</span><span class="n">c_inf</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">&lt;&lt;</span> <span class="mi">2</span><span class="p">)</span> <span class="o">+</span> <span class="p">(</span><span class="n">c_inf</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">&lt;&lt;</span> <span class="mi">1</span><span class="p">)</span>
        <span class="n">c2</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">/=</span> <span class="mi">6</span>
      <span class="k">end</span>
      <span class="c1"># c1 = c(-2) - 6 * c(-1) + 3 * c(0) + 2 * c(1) - 12 * c(inf) / 6</span>
      <span class="p">((</span><span class="n">t_len</span> <span class="o">/</span> <span class="mi">3</span><span class="p">)</span> <span class="o">*</span> <span class="mi">2</span><span class="p">).</span><span class="nf">times</span> <span class="k">do</span> <span class="o">|</span><span class="n">i</span><span class="o">|</span>
        <span class="n">c1</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>  <span class="o">=</span> <span class="n">c_m2</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
        <span class="n">c1</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">-=</span> <span class="p">(</span><span class="n">c_m1</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">&lt;&lt;</span> <span class="mi">2</span><span class="p">)</span> <span class="o">+</span> <span class="p">(</span><span class="n">c_m1</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">&lt;&lt;</span> <span class="mi">1</span><span class="p">)</span>
        <span class="n">c1</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">+=</span> <span class="p">(</span><span class="n">c_0</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">&lt;&lt;</span> <span class="mi">1</span><span class="p">)</span> <span class="o">+</span> <span class="n">c_0</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
        <span class="n">c1</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">+=</span> <span class="p">(</span><span class="n">c_1</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">&lt;&lt;</span> <span class="mi">1</span><span class="p">)</span>
        <span class="n">c1</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">-=</span> <span class="p">(</span><span class="n">c_inf</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">&lt;&lt;</span> <span class="mi">3</span><span class="p">)</span> <span class="o">+</span> <span class="p">(</span><span class="n">c_inf</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">&lt;&lt;</span> <span class="mi">2</span><span class="p">)</span>
        <span class="n">c1</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">/=</span> <span class="mi">6</span>
      <span class="k">end</span>
      <span class="c1"># c0 = 6 * c(0) / 6</span>
      <span class="n">c0</span> <span class="o">=</span> <span class="n">c_0</span>
      <span class="c1">#  z = c4 * x^4 + c3 * x^3 + c2 * x^2 + c1 * x + c0</span>
      <span class="n">z</span> <span class="o">=</span> <span class="n">c0</span> <span class="o">+</span> <span class="n">c2</span> <span class="o">+</span> <span class="n">c4</span>
      <span class="p">((</span><span class="n">t_len</span> <span class="o">/</span> <span class="mi">3</span><span class="p">)</span> <span class="o">*</span> <span class="mi">2</span><span class="p">).</span><span class="nf">times</span> <span class="p">{</span> <span class="o">|</span><span class="n">i</span><span class="o">|</span> <span class="n">z</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="n">t_len</span> <span class="o">/</span> <span class="mi">3</span><span class="p">]</span> <span class="o">+=</span> <span class="n">c1</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="p">}</span>
      <span class="p">((</span><span class="n">t_len</span> <span class="o">/</span> <span class="mi">3</span><span class="p">)</span> <span class="o">*</span> <span class="mi">2</span><span class="p">).</span><span class="nf">times</span> <span class="p">{</span> <span class="o">|</span><span class="n">i</span><span class="o">|</span> <span class="n">z</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="n">t_len</span>    <span class="p">]</span> <span class="o">+=</span> <span class="n">c3</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="p">}</span>
      <span class="k">return</span> <span class="n">z</span>
    <span class="k">rescue</span> <span class="o">=&gt;</span> <span class="n">e</span>
      <span class="k">raise</span>
    <span class="k">end</span>
  <span class="k">end</span>

  <span class="c1"># 繰り上がり処理</span>
  <span class="k">def</span> <span class="nf">do_carry</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
    <span class="n">cr</span> <span class="o">=</span> <span class="mi">0</span>  <span class="c1"># 繰り上がり</span>

    <span class="k">begin</span>
      <span class="n">a</span><span class="p">.</span><span class="nf">size</span><span class="p">.</span><span class="nf">times</span> <span class="k">do</span> <span class="o">|</span><span class="n">i</span><span class="o">|</span>
        <span class="n">a</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">+=</span> <span class="n">cr</span>
        <span class="n">cr</span> <span class="o">=</span> <span class="n">a</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">/</span> <span class="mi">10</span>
        <span class="n">a</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">-=</span> <span class="n">cr</span> <span class="o">*</span> <span class="mi">10</span>
      <span class="k">end</span>
      <span class="c1"># オーバーフロー時</span>
      <span class="nb">puts</span> <span class="s2">"[ OVERFLOW!! ] </span><span class="si">#{</span><span class="n">cr</span><span class="si">}</span><span class="s2">"</span> <span class="k">unless</span> <span class="n">cr</span> <span class="o">==</span> <span class="mi">0</span>
      <span class="k">return</span> <span class="n">a</span>
    <span class="k">rescue</span> <span class="o">=&gt;</span> <span class="n">e</span>
      <span class="k">raise</span>
    <span class="k">end</span>
  <span class="k">end</span>

  <span class="c1"># 結果出力</span>
  <span class="k">def</span> <span class="nf">display</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">z</span><span class="p">)</span>
    <span class="c1"># 上位桁の不要な 0 を削除するために、配列サイズを取得</span>
    <span class="n">len_a</span><span class="p">,</span> <span class="n">len_b</span><span class="p">,</span> <span class="n">len_z</span> <span class="o">=</span> <span class="no">D_MAX</span><span class="p">,</span> <span class="no">D_MAX</span><span class="p">,</span> <span class="no">D_MAX</span> <span class="o">*</span> <span class="mi">2</span>
    <span class="k">while</span> <span class="n">a</span><span class="p">[</span><span class="n">len_a</span> <span class="o">-</span> <span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="mi">0</span> <span class="k">do</span> <span class="n">len_a</span> <span class="o">-=</span> <span class="mi">1</span> <span class="k">if</span> <span class="n">a</span><span class="p">[</span><span class="n">len_a</span> <span class="o">-</span> <span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="mi">0</span> <span class="k">end</span>
    <span class="k">while</span> <span class="n">b</span><span class="p">[</span><span class="n">len_b</span> <span class="o">-</span> <span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="mi">0</span> <span class="k">do</span> <span class="n">len_b</span> <span class="o">-=</span> <span class="mi">1</span> <span class="k">if</span> <span class="n">b</span><span class="p">[</span><span class="n">len_b</span> <span class="o">-</span> <span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="mi">0</span> <span class="k">end</span>
    <span class="k">while</span> <span class="n">z</span><span class="p">[</span><span class="n">len_z</span> <span class="o">-</span> <span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="mi">0</span> <span class="k">do</span> <span class="n">len_z</span> <span class="o">-=</span> <span class="mi">1</span> <span class="k">if</span> <span class="n">z</span><span class="p">[</span><span class="n">len_z</span> <span class="o">-</span> <span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="mi">0</span> <span class="k">end</span>
    <span class="c1"># a 値</span>
    <span class="nb">puts</span> <span class="s2">"a ="</span>
    <span class="p">(</span><span class="n">len_a</span> <span class="o">-</span> <span class="mi">1</span><span class="p">).</span><span class="nf">downto</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span> <span class="k">do</span> <span class="o">|</span><span class="n">i</span><span class="o">|</span>
      <span class="nb">print</span> <span class="n">a</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
      <span class="nb">print</span> <span class="s2">" "</span> <span class="k">if</span> <span class="p">(</span><span class="n">len_a</span> <span class="o">-</span> <span class="n">i</span><span class="p">)</span> <span class="o">%</span> <span class="mi">10</span> <span class="o">==</span> <span class="mi">0</span>
      <span class="nb">puts</span> <span class="k">if</span> <span class="p">(</span><span class="n">len_a</span> <span class="o">-</span> <span class="n">i</span><span class="p">)</span> <span class="o">%</span> <span class="mi">50</span> <span class="o">==</span> <span class="mi">0</span>
    <span class="k">end</span>
    <span class="nb">puts</span>
    <span class="c1"># b 値</span>
    <span class="nb">puts</span> <span class="s2">"b ="</span>
    <span class="p">(</span><span class="n">len_b</span> <span class="o">-</span> <span class="mi">1</span><span class="p">).</span><span class="nf">downto</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span> <span class="k">do</span> <span class="o">|</span><span class="n">i</span><span class="o">|</span>
      <span class="nb">print</span> <span class="n">b</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
      <span class="nb">print</span> <span class="s2">" "</span> <span class="k">if</span> <span class="p">(</span><span class="n">len_b</span> <span class="o">-</span> <span class="n">i</span><span class="p">)</span> <span class="o">%</span> <span class="mi">10</span> <span class="o">==</span> <span class="mi">0</span>
      <span class="nb">puts</span> <span class="k">if</span> <span class="p">(</span><span class="n">len_b</span> <span class="o">-</span> <span class="n">i</span><span class="p">)</span> <span class="o">%</span> <span class="mi">50</span> <span class="o">==</span> <span class="mi">0</span>
    <span class="k">end</span>
    <span class="nb">puts</span>
    <span class="c1"># z 値</span>
    <span class="nb">puts</span> <span class="s2">"z ="</span>
    <span class="p">(</span><span class="n">len_z</span> <span class="o">-</span> <span class="mi">1</span><span class="p">).</span><span class="nf">downto</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span> <span class="k">do</span> <span class="o">|</span><span class="n">i</span><span class="o">|</span>
      <span class="nb">print</span> <span class="n">z</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
      <span class="nb">print</span> <span class="s2">" "</span> <span class="k">if</span> <span class="p">(</span><span class="n">len_z</span> <span class="o">-</span> <span class="n">i</span><span class="p">)</span> <span class="o">%</span> <span class="mi">10</span> <span class="o">==</span> <span class="mi">0</span>
      <span class="nb">puts</span> <span class="k">if</span> <span class="p">(</span><span class="n">len_z</span> <span class="o">-</span> <span class="n">i</span><span class="p">)</span> <span class="o">%</span> <span class="mi">50</span> <span class="o">==</span> <span class="mi">0</span>
    <span class="k">end</span>
    <span class="nb">puts</span><span class="p">;</span> <span class="nb">puts</span>
    <span class="c1"># ====[ TEST ]====</span>
    <span class="c1"># puts "Counts of multiply / 1 loop = #{@cnt_mul}"     # 乗算回数</span>
    <span class="c1"># puts "Total time of all loops     = #{@tt} seconds"  # 処理時間</span>
    <span class="c1"># ====[ TEST ]====</span>
  <span class="k">rescue</span> <span class="o">=&gt;</span> <span class="n">e</span>
    <span class="k">raise</span>
  <span class="k">end</span>
<span class="k">end</span>

<span class="k">if</span> <span class="kp">__FILE__</span> <span class="o">==</span> <span class="vg">$0</span>
  <span class="k">begin</span>
    <span class="c1"># 計算クラスインスタンス化</span>
    <span class="n">obj</span> <span class="o">=</span> <span class="no">MultiplyToomCook3</span><span class="p">.</span><span class="nf">new</span>
    <span class="c1"># 乗算 ( Toom-Cook 法 )</span>
    <span class="n">obj</span><span class="p">.</span><span class="nf">calc_toom_cook</span>
  <span class="k">rescue</span> <span class="o">=&gt;</span> <span class="n">e</span>
    <span class="vg">$stderr</span><span class="p">.</span><span class="nf">puts</span> <span class="s2">"[</span><span class="si">#{</span><span class="n">e</span><span class="p">.</span><span class="nf">class</span><span class="si">}</span><span class="s2">] </span><span class="si">#{</span><span class="n">e</span><span class="p">.</span><span class="nf">message</span><span class="si">}</span><span class="s2">"</span>
    <span class="n">e</span><span class="p">.</span><span class="nf">backtrace</span><span class="p">.</span><span class="nf">each</span><span class="p">{</span> <span class="o">|</span><span class="n">tr</span><span class="o">|</span> <span class="vg">$stderr</span><span class="p">.</span><span class="nf">puts</span> <span class="s2">"</span><span class="se">\t</span><span class="si">#{</span><span class="n">tr</span><span class="si">}</span><span class="s2">"</span> <span class="p">}</span>
  <span class="k">end</span>
<span class="k">end</span>
</pre></td></tr></tbody></table></code></pre></figure>

<ul>
  <li><a href="https://gist.github.com/komasaru/5418386" title="Gist - Ruby script to multiply big-digit values with Toom-Cook 3-way method.">Gist - Ruby script  to multiply big-digit values with Toom-Cook 3-way method.</a></li>
</ul>

<h3 id="2-実行">2. 実行</h3>

<p>まず、実行権限を付与。</p>

<div class="language-text highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ chmod +x multiply_toom_cook_3.rb
</code></pre></div></div>

<p>そして、実行。</p>

<div class="language-text highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ ./multiply_toom_cook_3.rb
a =
4345367000 0015558046 5992851545 8392322526 6661657161 
2940646222 3693630633 2878928428 2931075189 4459942962 
0472047143 1713204503 7429609429 7320661140 5711218714 
8538514523 9923578665 1579065598 3315649556 2636468353 
2850188038 2090122465 2291725695 6708063266 7932721494 
7942319492 9163030723 9638085573 9503746353 7468715593 
8041892365 3487011431 2123396480 0444130541 4830691976 
6375317951 4967144872 8029471638 9868078876 6991300561 
7275325293 3147458058 7336424609 4074817783 0788334840 
6091902995 9132761677 5255524121 1237390448 8301180552 
0485182215 7793237999 7335435793 2856480756 3632388619 
6682988756 9408135690 9580896340 3482838802 3288833606 
0032864192 1432332927 2095702302 4210503951 0557348443 
4464495302 7639971189 4148655400 2723740991 0733318320 
5303498951 8776188674 253973305
b =
7501324065 2738206911 5039490164 4021680779 1593935265 
4517107481 1563095300 4247865767 6579175671 6550946828 
8849310928 2032373166 1809936890 4395890008 8505100323 
3262151146 5641179972 5027654271 6778904491 2603452658 
0104477210 0681082763 6231568633 0763932142 2664695603 
6038377177 6784204672 5050316333 9319575588 5651066222 
3741358300 5240023426 8409350815 7894695159 1170270888 
7057292645 2461606103 7406689505 8225079836 1284499328 
0452193943 0049246899 9592674603 6763426074 0219495812 
5062777866 5259459760 8835743093 0760692006 9696613714 
0412820715 7653833044 2353763341 8309248038 2706034215 
3024307811 8585455729 8864419390 7598704512 1560641560 
7726629062 7213289104 8971702094 7744875265 4680311778 
0379772086 3954773968 9772940293 0418439156 3789388101 
9679960719 7742425429 671005985
z =
3259600604 9558376990 1785049682 6721702532 5044456662 
7821751560 5036432472 4374806508 0089563122 9955094382 
1333781499 2055893283 6740957683 1430717530 3027924720 
6720795606 4453432868 2206490351 5092735143 8650604451 
9077876082 7869878408 8411792866 7296210361 5290067315 
3875194716 5716569026 5501861714 0787645952 9360021510 
7591546225 7321872079 8588558834 8221039668 1905946789 
5755898057 2475290889 3925276026 1115682662 2595034942 
1989465979 9459641436 1822383391 4701051731 6723842532 
9085112016 0805208659 7380301971 0575139883 5276329813 
9051257188 5386696747 9476206813 2405000008 5014000385 
2228602411 7170667435 4071623256 2250293920 8872537198 
9011614093 1973290891 6383126505 4534641138 9553720898 
2096240322 2778414222 8348650739 7672465365 8649120844 
4683221619 8595677967 5204218518 2006601879 7132768680 
9939113203 3472472733 7952464367 0925045889 8276313966 
4012354898 8510115703 2912673298 1529033667 5058577540 
7142956305 7507040532 3467386175 8890359078 9911328777 
6785349324 6971158815 4968664190 8788296990 4226330624 
8768393813 4049426571 5426114747 1205478779 0601988669 
8632035327 0009838500 9172310931 7743393092 6846552160 
2161967107 5702127657 0750291819 1733614937 3394110123 
6021198173 0409567089 7387534596 6112485570 8480721294 
2320621217 6853778480 9999266165 8428469221 5392120811 
5298716572 9275964985 1149125056 3067787170 4139504582 
2131626469 1343571643 5438670288 6985060164 1273634363 
7550116727 3486556597 9439666434 5684036730 1379710374 
4199031303 4300325496 4186410270 3714149988 1526135971 
2877396833 4115425352 6249841425 3502915946 8328043426 
85230425
</code></pre></div></div>

<p>「標準（筆算）法」や「Karatsuba 法」で計算した結果と一致した。</p>

<h3 id="3-検証">3. 検証</h3>

<p>上記のコードを利用して、乗算回数が何回になるか、計算(100回ループ)にどれくらい時間がかかるかを検証してみた。<br />
参考のため「Karatsuba 法」での乗算テスト結果も掲載している。計算桁数が異なるため単純には比較できないが、1万桁を超えると乗算回数は「Karatsuba 法」より微減し、計算に要する時間も少しずつ短くなっているのが分かる。<br />
だが、やはり C++ 版による計算より莫大に時間がかかっている。<br />
<strong>ちなみに、C++ 版では 1000 回ループの時間を計測したが、Ruby 版では時間がかかりすぎるため 100 回ループの時間を計測した。</strong></p>

<p><img src="/images/2013/04/30/MULTIPLY_TOOMCOOK_RUBY.png" alt="MULTIPLY_TOOMCOOK_RUBY" title="MULTIPLY_TOOMCOOK_RUBY" /></p>

<hr />

<p>今のところ「Karatsuba 法」や「Toom-Cook 法」を使用する局面はありませんが、理解しておいて損にはならないでしょう。</p>

<p>以上。</p>


        
      </section>

      <footer class="page__meta">
        
        
  


  
  
  

  <p class="page__taxonomy">
    <strong><i class="fas fa-fw fa-tags" aria-hidden="true"></i> Tags: </strong>
    <span itemprop="keywords">
    
      
      
      <a href="/tags/ruby" class="page__taxonomy-item" rel="tag">Ruby</a>
    
    </span>
  </p>




  


  
  
  

  <p class="page__taxonomy">
    <strong><i class="fas fa-fw fa-folder-open" aria-hidden="true"></i> Categories: </strong>
    <span itemprop="keywords">
    
      
      
      <a href="/categories/%E3%83%97%E3%83%AD%E3%82%B0%E3%83%A9%E3%83%9F%E3%83%B3%E3%82%B0" class="page__taxonomy-item" rel="tag">プログラミング</a><span class="sep">, </span>
    
      
      
      <a href="/categories/%E6%95%B0%E5%AD%A6" class="page__taxonomy-item" rel="tag">数学</a>
    
    </span>
  </p>


        
          
          <p class="page__date"><strong><i class="fas fa-fw fa-calendar-alt" aria-hidden="true"></i> Updated:</strong> <time datetime="2013-04-30T00:20:00+09:00">2013-04-30 00:20</time></p>
        
        <br />
      </footer>
      <div id="google-ad-3"></div>
      <br />
      <br />
      <br />
      <br />

      <section class="page__share">
  

  <a href="https://twitter.com/intent/tweet?via=rsm_mzk&text=Ruby+-+%E5%A4%9A%E6%A1%81%E4%B9%97%E7%AE%97%EF%BC%88Toom-Cook+%E6%B3%95+%283-way%29%EF%BC%89%EF%BC%81%20https%3A%2F%2Fkomasaru.github.io%2F2013%2F04%2F30%2Fruby-big-multiply-toom-cook-3%2F" class="btn btn--twitter" onclick="window.open(this.href, 'window', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" title="Share on Twitter"><i class="fab fa-fw fa-twitter" aria-hidden="true"></i><span> Twitter</span></a>

  <a href="https://www.facebook.com/sharer/sharer.php?u=https%3A%2F%2Fkomasaru.github.io%2F2013%2F04%2F30%2Fruby-big-multiply-toom-cook-3%2F" class="btn btn--facebook" onclick="window.open(this.href, 'window', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" title="Share on Facebook"><i class="fab fa-fw fa-facebook" aria-hidden="true"></i><span> Facebook</span></a>

  

  <a href="https://www.tumblr.com/share" class="btn btn--tumblr" onclick="window.open(this.href, 'window', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" title="Share on Tumblr"><i class="fab fa-fw fa-tumblr" aria-hidden="true"></i><span> Tumblr</span></a><script id="tumblr-js" async src="https://assets.tumblr.com/share-button.js"></script>

  <a href="https://www.linkedin.com/shareArticle?mini=true&url=https%3A%2F%2Fkomasaru.github.io%2F2013%2F04%2F30%2Fruby-big-multiply-toom-cook-3%2F" class="btn btn--linkedin" onclick="window.open(this.href, 'window', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" title="Share on LinkedIn"><i class="fab fa-fw fa-linkedin" aria-hidden="true"></i><span> LinkedIn</span></a>
</section>


      <section>
        &nbsp;
        <h4>Sponsored Link</h4>
        <div id="rakuten-ad"></div>
        <div id="amazon-ad-1"></div>
      </section>
      &nbsp;
      
  <nav class="pagination">
    
      <a href="/2013/04/29/cpp-big-multiply-toom-cook-3/" class="pagination--pager" title="C++ - 多桁乗算（Toom-Cook 法 (3-way)）！
">Previous</a>
    
    
      <a href="/2013/05/01/blog-access/" class="pagination--pager" title="2013年4月 - OS・ブラウザ別アクセス状況！【自動集計】
">Next</a>
    
  </nav>

    </div>

    
      <div class="page__comments">
  
  
      <h4 class="page__comments-title">Comments</h4>
      <section id="disqus_thread"></section>
    
</div>

    
  </article>

  
  
    <div class="page__related">
      <div id="google-ad-4"></div>
      <h4 class="page__related-title">You May Also Enjoy</h4>
      <div class="grid__wrapper">
        
          



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
    <h3 class="archive__item-title" itemprop="headline">
      
        <a href="/2021/12/22/debian-11-mail-ssl-setting/" rel="permalink">Debian 11 (bullseye) - メールサーバ SSL 設定！
</a>
        &nbsp;<small>(2021-12-22)</small>
    </h3>
    
    <p class="archive__item-excerpt" itemprop="description">Debian GNU/Linux 11 (bullseye) に導入したメールサーバを SSL 設定する方法についての記録です。

以前古いバージョンでの作業時に残していた記録を参考に作業を行い、今回更新した作業記録を貼付する形式の内容となっています。
（当然ながら、興味がなければスルーしてください）

</p>
  </article>
</div>

        
          



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
    <h3 class="archive__item-title" itemprop="headline">
      
        <a href="/2021/12/15/debian-11-dovecot-installation/" rel="permalink">Debian 11 (bullseye) - POP/IMAP サーバ Dovecot 構築！
</a>
        &nbsp;<small>(2021-12-15)</small>
    </h3>
    
    <p class="archive__item-excerpt" itemprop="description">Debian GNU/Linux 11 (bullseye) に POP/IMAP サーバ Dovecot を構築する方法についての記録です。

以前古いバージョンでの作業時に残していた記録を参考に作業を行い、今回更新した作業記録を貼付する形式の内容となっています。
（当然ながら、興味がなければスルーしてください）

</p>
  </article>
</div>

        
          



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
    <h3 class="archive__item-title" itemprop="headline">
      
        <a href="/2021/12/08/debian-11-postfix-installation/" rel="permalink">Debian 11 (bullseye) - SMTP サーバ Postfix 構築！
</a>
        &nbsp;<small>(2021-12-08)</small>
    </h3>
    
    <p class="archive__item-excerpt" itemprop="description">Debian GNU/Linux 11 (bullseye) に SMTP サーバ Postfix を構築する方法についての記録です。

以前古いバージョンでの作業時に残していた記録を参考に作業を行い、今回更新した作業記録を貼付する形式の内容となっています。
（当然ながら、興味がなければスルーしてください）

</p>
  </article>
</div>

        
          



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
    <h3 class="archive__item-title" itemprop="headline">
      
        <a href="/2021/12/02/debian-11-nfs-port-fixing/" rel="permalink">Debian 11 (bullseye) - NFS サーバのポート固定！
</a>
        &nbsp;<small>(2021-12-02)</small>
    </h3>
    
    <p class="archive__item-excerpt" itemprop="description">Debian GNU/Linux 11 (bullseye) に NFS サーバで使用するポートを固定化する方法についての記録です。

以前古いバージョンでの作業時に残していた記録を参考に作業を行い、今回更新した作業記録を貼付する形式の内容となっています。
（当然ながら、興味がなければスルーしてください）

</p>
  </article>
</div>

        
      </div>
      <!-- &nbsp;
      <div id="amazon-wd"></div -->
    </div>
  
  
</div>

    </div>

    
      <div class="search-content">
        <div class="search-content__inner-wrap"><form onsubmit="return googleCustomSearchExecute();" id="cse-search-box-form-id">
    <input type="text" id="cse-search-input-box-id" class="search-input" tabindex="-1" placeholder="Enter your search term..." />
    </form>
    <div id="results" class="results">
        <gcse:searchresults-only></gcse:searchresults-only>    
    </div></div>

      </div>
    

    <div class="page__footer">
      <footer>
        <!-- start custom footer snippets -->
<div id="qr"><img src="/assets/images/qr.png" alt="mk-mode BLOG"></div>
<div id="google-ad-5"></div>
<div class="page__footer-etc">
  <strong>ブログ開設日</strong> <tt>2009-01-05</tt><br />
  <strong>サーバ連続稼働時間</strong> <tt id="uptime">Loading...</tt><br />
  <strong>Page View</strong><br />
  &emsp;合計 <tt id="pv-total">Loading...</tt><br />
  &emsp;今日 <tt id="pv-today">Loading...</tt><br />
  &emsp;昨日 <tt id="pv-yesterday">Loading...</tt><br />
  <small>※<a href="/privacy.html" title="「プライバシーポリシー」ページへ">プライバシーポリシー</a></small>
</div>
<p id="page-top">
  <a href="#">
    <i class="fa fa-angle-double-up fa-2x" aria-hidden="true"></i>
  </a>
</p>
<!-- end custom footer snippets -->

        <div class="page__footer-follow">
  <ul class="social-icons">
    

    
      
        
          <li><a href="https://twitter.com/rsm_mzk" rel="nofollow noopener noreferrer"><i class="fab fa-fw fa-twitter-square" aria-hidden="true"></i> Twitter</a></li>
        
      
        
      
        
          <li><a href="https://github.com/komasaru" rel="nofollow noopener noreferrer"><i class="fab fa-fw fa-github" aria-hidden="true"></i> GitHub</a></li>
        
      
        
      
        
      
        
      
    

    <li><a href="https://www.mk-mode.com/blog/atom.xml"><i class="fas fa-fw fa-rss-square" aria-hidden="true"></i> Feed</a></li>
  </ul>
</div>

<div class="page__footer-copyright">&copy; 2021 mk-mode.com. Powered by <a href="https://jekyllrb.com" rel="nofollow">Jekyll</a> &amp; <a href="https://mademistakes.com/work/minimal-mistakes-jekyll-theme/" rel="nofollow">Minimal Mistakes</a>.</div>

      </footer>
    </div>

    
  <script defer src="/assets/js/main.min.js"></script>
  <script defer src="https://use.fontawesome.com/releases/v5.6.0/js/all.js" integrity="sha384-z9ZOvGHHo21RqN5De4rfJMoAxYpaVoiYhuJXPyVmSs8yn20IE3PmBM534CffwSJI" crossorigin="anonymous"></script>
  <script defer src="/assets/js/my_custom.js"></script>


<script>
  (function () {
    var cx = 'partner-pub-7320193476057758:6328726109';
    var gcse = document.createElement('script');
    gcse.type = 'text/javascript';
    gcse.async = true;
    gcse.src = 'https://cse.google.com/cse.js?cx=' + cx;
    var s = document.getElementsByTagName('script')[0];
    s.parentNode.insertBefore(gcse, s);
  })();

  function googleCustomSearchExecute() {
    var input = document.getElementById('cse-search-input-box-id');
    var element = google.search.cse.element.getElement('searchresults-only0');
    if (input.value == '') {
      element.clearAllResults();
    } else {
      element.execute(input.value);
    }
    return false;
  }

  
</script>




  <script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-18154748-1']);
  
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>





    
  <script>
    var disqus_config = function () {
      this.page.url = "https://komasaru.github.io/2013/04/30/ruby-big-multiply-toom-cook-3/";  // Replace PAGE_URL with your page's canonical URL variable
      this.page.identifier = "/2013/04/30/ruby-big-multiply-toom-cook-3"; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
    };
    (function() { // DON'T EDIT BELOW THIS LINE
      var d = document, s = d.createElement('script');
      s.src = 'https://mkmodeblog.disqus.com/embed.js';
      s.setAttribute('data-timestamp', +new Date());
      (d.head || d.body).appendChild(s);
    })();
  </script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>


  



  </body>
</html>
