<!doctype html>
<!--
  Minimal Mistakes Jekyll Theme 4.15.1 by Michael Rose
  Copyright 2013-2019 Michael Rose - mademistakes.com | @mmistakes
  Free for personal and commercial use under the MIT license
  https://github.com/mmistakes/minimal-mistakes/blob/master/LICENSE
-->
<html lang="ja" class="no-js">
  <head>
    <meta charset="utf-8">

<!-- begin _includes/seo.html --><title>Debian 7 Wheezy - Web サーバ Nginx をインストール（ソースビルド）！ - mk-mode BLOG</title>
<meta name="description" content="Debian GNU/Linux 7 Wheezy サーバに Web サーバ Nginx をソースをビルドしてインストールする方法についての記録です。ちなみに以前、Linux Mint にソースビルドでインストールする方法を紹介しています。（当然、似たような内容となっています）  Nginx - Linux Mint にインストール（ソースビルド）！">



<meta property="og:type" content="article">
<meta property="og:locale" content="ja_JP">
<meta property="og:site_name" content="mk-mode BLOG">
<meta property="og:title" content="Debian 7 Wheezy - Web サーバ Nginx をインストール（ソースビルド）！">
<meta property="og:url" content="https://komasaru.github.io/2013/10/28/debian-7-install-nginx-by-src/">


  <meta property="og:description" content="Debian GNU/Linux 7 Wheezy サーバに Web サーバ Nginx をソースをビルドしてインストールする方法についての記録です。ちなみに以前、Linux Mint にソースビルドでインストールする方法を紹介しています。（当然、似たような内容となっています）  Nginx - Linux Mint にインストール（ソースビルド）！">



  <meta property="og:image" content="https://www.mk-mode.com/blog/assets/images/about_me.png">



  <meta name="twitter:site" content="@rsm_mzk">
  <meta name="twitter:title" content="Debian 7 Wheezy - Web サーバ Nginx をインストール（ソースビルド）！">
  <meta name="twitter:description" content="Debian GNU/Linux 7 Wheezy サーバに Web サーバ Nginx をソースをビルドしてインストールする方法についての記録です。ちなみに以前、Linux Mint にソースビルドでインストールする方法を紹介しています。（当然、似たような内容となっています）  Nginx - Linux Mint にインストール（ソースビルド）！">
  <meta name="twitter:url" content="https://komasaru.github.io/2013/10/28/debian-7-install-nginx-by-src/">

  
    <meta name="twitter:card" content="summary">
    
      <meta name="twitter:image" content="https://www.mk-mode.com/blog/assets/images/about_me.png">
    
  

  



  <meta property="article:published_time" content="2013-10-28T00:20:00+09:00">





  

  


<link rel="canonical" href="https://komasaru.github.io/2013/10/28/debian-7-install-nginx-by-src/">





  <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "Organization",
      "url": "https://komasaru.github.io",
      "logo": "https://www.mk-mode.com/blog/assets/images/about_me.png"
    }
  </script>



  <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "Person",
      "name": "mk-mode.com",
      "url": "https://komasaru.github.io",
      "sameAs": null
    }
  </script>



  <meta name="google-site-verification" content="0kSwKhNo71fC7OeEFLllD3S11F8Pa-z_OqsBTSFxXAk" />





<!-- end _includes/seo.html -->


<link href="https://www.mk-mode.com/blog/atom.xml" type="application/atom+xml" rel="alternate" title="mk-mode BLOG Feed">

<!-- https://t.co/dKP3o1e -->
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script>
  document.documentElement.className = document.documentElement.className.replace(/\bno-js\b/g, '') + ' js ';
</script>

<!-- For all browsers -->
<link rel="stylesheet" href="/assets/css/main.css">

<!--[if IE ]>
  <style>
    /* old IE unsupported flexbox fixes */
    .greedy-nav .site-title {
      padding-right: 3em;
    }
    .greedy-nav button {
      position: absolute;
      top: 0;
      right: 0;
      height: 100%;
    }
  </style>
<![endif]-->


  
    
    <script defer src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
  


    <!-- start custom head snippets -->

<meta http-equiv="x-dns-prefetch-control" content="on">
<link rel="dns-prefetch" href="//pagead2.googlesyndication.com" />
<link rel="dns-prefetch" href="//googleads.g.doubleclick.net" />
<link rel="dns-prefetch" href="//tpc.googlesyndication.com" />
<link rel="dns-prefetch" href="//cm.g.doubleclick.net" />
<link rel="dns-prefetch" href="//www.gstatic.com" />
<link rel="dns-prefetch" href="//fonts.gstatic.com" />
<link rel='dns-prefetch' href='//use.fontawesome.com' />
<link rel="dns-prefetch" href="//twitter.com" />
<link rel="dns-prefetch" href="//www.facebook.com" />

<link rel="icon" href="/assets/images/favicon.ico">
<script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-18154748-1']);
  
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>
  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
    (adsbygoogle = window.adsbygoogle || []).push({
      google_ad_client: "ca-pub-7320193476057758",
      enable_page_level_ads: true
    });
  </script>


<!-- end custom head snippets -->

  </head>

  <body class="layout--single wide">

    <!--[if lt IE 9]>
<div class="notice--danger align-center" style="margin: 0;">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience.</div>
<![endif]-->

    

<div class="masthead">
  <div class="masthead__inner-wrap">
    <div class="masthead__menu">
      <nav id="site-nav" class="greedy-nav">
        
        <a class="site-title" href="/">mk-mode BLOG</a>
        <ul class="visible-links"><li class="masthead__menu-item">
              <a href="/year-archive/" >Archives</a>
            </li><li class="masthead__menu-item">
              <a href="/categories/" >Categories</a>
            </li><li class="masthead__menu-item">
              <a href="/tags/" >Tags</a>
            </li><li class="masthead__menu-item">
              <a href="https://www.mk-mode.com/rails/calendar/calendar" >Calendar</a>
            </li><li class="masthead__menu-item">
              <a href="https://www.mk-mode.com/rails/jmaxml" >JMAXML</a>
            </li><li class="masthead__menu-item">
              <a href="/privacy.html" >Privacy Policy</a>
            </li></ul>
        
        <button class="search__toggle" type="button">
          <span class="visually-hidden">Toggle search</span>
          <svg class="icon" width="16" height="16" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 15.99 16">
            <path d="M15.5,13.12L13.19,10.8a1.69,1.69,0,0,0-1.28-.55l-0.06-.06A6.5,6.5,0,0,0,5.77,0,6.5,6.5,0,0,0,2.46,11.59a6.47,6.47,0,0,0,7.74.26l0.05,0.05a1.65,1.65,0,0,0,.5,1.24l2.38,2.38A1.68,1.68,0,0,0,15.5,13.12ZM6.4,2A4.41,4.41,0,1,1,2,6.4,4.43,4.43,0,0,1,6.4,2Z" transform="translate(-.01)"></path>
          </svg>
        </button>
        
        <button class="greedy-nav__toggle hidden" type="button">
          <span class="visually-hidden">Toggle menu</span>
          <div class="navicon"></div>
        </button>
        <ul class="hidden-links hidden"></ul>
      </nav>
    </div>
  </div>
</div>


    <div class="initial-content">
      



<div id="main" role="main">
  
  <div class="sidebar sticky">
  


<div itemscope itemtype="https://schema.org/Person">

  
    <div class="author__avatar">
      

      
        <img src="/assets/images/about_me.png" alt="mk-mode.com" itemprop="image">
      
    </div>
  

  <div class="author__content">
    
      <h3 class="author__name" itemprop="name">mk-mode.com</h3>
    
    
      <p class="author__bio" itemprop="description">
        Linux, Debian, IT, Server, PG, Ruby, Rails, Python, C++, Fortran, PC, MariaDB, math, GIS, etc...
      </p>
    
  </div>

  <div class="author__urls-wrapper">
    <button class="btn btn--inverse">Follow</button>
    <ul class="author__urls social-icons">
      
        <li itemprop="homeLocation" itemscope itemtype="https://schema.org/Place">
          <i class="fas fa-fw fa-map-marker-alt" aria-hidden="true"></i> <span itemprop="name">Ruby City MATSUE</span>
        </li>
      

      
        
          
        
          
            <li><a href="https://www.mk-mode.com" rel="nofollow noopener noreferrer"><i class="fas fa-fw fa-link" aria-hidden="true"></i> mk-mode SITE</a></li>
          
        
          
            <li><a href="https://www.mk-mode.com/blog" rel="nofollow noopener noreferrer"><i class="fas fa-fw fa-link" aria-hidden="true"></i> mk-mode BLOG (original)</a></li>
          
        
          
            <li><a href="https://mk-mode.tumblr.com" rel="nofollow noopener noreferrer"><i class="fas fa-fw fa-link" aria-hidden="true"></i> mk-mode TUMBLR</a></li>
          
        
          
            <li><a href="https://mk-ephemeris.tumblr.com" rel="nofollow noopener noreferrer"><i class="fas fa-fw fa-link" aria-hidden="true"></i> mk-mode EPHEMERIS</a></li>
          
        
          
            <li><a href="https://twitter.com/rsm_mzk" rel="nofollow noopener noreferrer"><i class="fab fa-fw fa-twitter-square" aria-hidden="true"></i> Twitter</a></li>
          
        
          
        
          
            <li><a href="https://github.com/komasaru" rel="nofollow noopener noreferrer"><i class="fab fa-fw fa-github" aria-hidden="true"></i> GitHub</a></li>
          
        
          
        
      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      <!--
  <li>
    <a href="http://link-to-whatever-social-network.com/user/" itemprop="sameAs" rel="nofollow noopener noreferrer">
      <i class="fas fa-fw" aria-hidden="true"></i> Custom Social Profile Link
    </a>
  </li>
-->
    </ul>
  </div>
</div>

  
  </div>


  <article class="page" itemscope itemtype="https://schema.org/CreativeWork">
    <meta itemprop="headline" content="Debian 7 Wheezy - Web サーバ Nginx をインストール（ソースビルド）！">
    <meta itemprop="description" content="Debian GNU/Linux 7 Wheezy サーバに Web サーバ Nginx をソースをビルドしてインストールする方法についての記録です。ちなみに以前、Linux Mint にソースビルドでインストールする方法を紹介しています。（当然、似たような内容となっています）  Nginx - Linux Mint にインストール（ソースビルド）！">
    <meta itemprop="datePublished" content="October 28, 2013">
    

    <div class="page__inner-wrap">
      
        <header>
          <!-- div id="google-ad-1"></div -->
          <h1 id="page-title" class="page__title" itemprop="headline">Debian 7 Wheezy - Web サーバ Nginx をインストール（ソースビルド）！
</h1>
          
          
            
            <p class="page__date"><small><strong><i class="fas fa-fw fa-calendar-alt" aria-hidden="true"></i> Updated:</strong> <time datetime="2013-10-28T00:20:00+09:00">2013-10-28 00:20</time></small></p>
          
        </header>
      
      <div id="google-ad-2"></div>
      <br />

      <section class="page__content" itemprop="text">
        
        <p>Debian GNU/Linux 7 Wheezy サーバに Web サーバ Nginx をソースをビルドしてインストールする方法についての記録です。</p>

<p>ちなみに以前、Linux Mint にソースビルドでインストールする方法を紹介しています。（当然、似たような内容となっています）</p>

<ul>
  <li><a href="/2013/01/14/nginx-linux-mint-install-by-src/" title="Nginx - Linux Mint にインストール（ソースビルド）！">Nginx - Linux Mint にインストール（ソースビルド）！</a></li>
</ul>

<!--more-->

<h3 id="0-前提条件">0 前提条件</h3>

<ul>
  <li>Debian GNU/Linux 7.1.0 での作業を想定。</li>
  <li>接続元のマシンは Linux Mint 14(64bit) を想定。</li>
  <li>インストールする Nginx のバージョンは 1.4.3（当記事執筆時点最新安定版）を想定。</li>
</ul>

<h3 id="1-必要パッケージインストール">1. 必要パッケージインストール</h3>

<p>Nginx のビルドに以下のパッケージが必要なので、未インストールならインストールしておく。（他にも必要なものがあればインストールする）</p>

<div class="language-text highlighter-rouge"><div class="highlight"><pre class="highlight"><code># aptitude -y install gcc libpcre3-dev libssl-dev
</code></pre></div></div>

<p>依存する libpcre3, zlib1g-dev もインストールされる。</p>

<h3 id="2-アーカイブダウンロード">2. アーカイブダウンロード</h3>

<p>インストールに使用するアーカイブファイルをダインロードし、解凍する。</p>

<div class="language-text highlighter-rouge"><div class="highlight"><pre class="highlight"><code># cd /usr/local/src/
# wget http://nginx.org/download/nginx-1.4.3.tar.gz
# tar zxvf nginx-1.4.3.tar.gz
</code></pre></div></div>

<h3 id="3-ビルドインストール">3. ビルド＆インストール</h3>

<p><code class="language-plaintext highlighter-rouge">configure</code>, <code class="language-plaintext highlighter-rouge">make</code>, <code class="language-plaintext highlighter-rouge">make install</code> でビルド・インストールする。<br />
インストール先はデフォルトでは <code class="language-plaintext highlighter-rouge">/usr/local/nginx</code> となるが、今後のバージョンアップのことも考慮し、バージョン別にインストール先を指定しリンクを貼るようにした。</p>

<div class="language-text highlighter-rouge"><div class="highlight"><pre class="highlight"><code># cd nginx-1.4.3
# ./configure --prefix=/usr/local/nginx-1.4.3 \
--user=www-data \
--group=www-data \
--pid-path=/var/run/nginx.pid \
--error-log-path=/var/log/nginx/error.log \
--http-log-path=/var/log/nginx/access.log \
--lock-path=/var/run/nginx.lock \
--with-http_ssl_module \
--with-http_realip_module
# make
# make install
# ln -s /usr/local/nginx-1.4.3 /usr/local/nginx
</code></pre></div></div>

<p><code class="language-plaintext highlighter-rouge">configure</code> オプションについて。</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">prefix</code><br />
… nginx をインストールするディレクトリを指定する。（デフォルト： <code class="language-plaintext highlighter-rouge">/usr/local/nginx</code>）</li>
  <li><code class="language-plaintext highlighter-rouge">with-http_ssl_module</code><br />
… HTTPS/SSL support（デフォルト：HTTPS は無効）</li>
  <li><code class="language-plaintext highlighter-rouge">with-http_realip_module</code><br />
… For using nginx as backend</li>
</ul>

<h3 id="4-インストール確認">4. インストール確認</h3>

<p>Nginx がインストールできたか確認してみる。<br />
<code class="language-plaintext highlighter-rouge">-V</code> オプションで <code class="language-plaintext highlighter-rouge">configure</code> オプションも確認可能。<code class="language-plaintext highlighter-rouge">-v</code> でバージョンだけ確認可能。</p>

<div class="language-text highlighter-rouge"><div class="highlight"><pre class="highlight"><code># /usr/local/nginx/sbin/nginx -V
nginx version: nginx/1.4.3
built by gcc 4.7.2 (Debian 4.7.2-5)
TLS SNI support enabled
configure arguments: --prefix=/usr/local/nginx-1.4.3 --user=www-data --group=www-data --pid-path=/var/run/nginx.pid --error-log-path=/var/log/nginx/error.log --http-log-path=/var/log/nginx/access.log --lock-path=/var/run/nginx.lock --with-http_ssl_module --with-http_realip_module
</code></pre></div></div>

<h3 id="5-設定">5. 設定</h3>

<p>今回のインストール環境の場合、基本的（グローバル）な設定のファイルは <code class="language-plaintext highlighter-rouge">/usr/local/nginx/conf/nginx.conf</code> となる。<br />
取り急ぎ、デフォルトのままとした。<br />
詳細な設定は、「<a href="http://www.mk-mode.com/octopress/tags/nginx/" title="Tag: Nginx - mk-mode BLOG">当ブログ Nginx 関連の過去記事</a>」を参照。</p>

<h3 id="6-起動スクリプト作成">6. 起動スクリプト作成</h3>

<p>サービス起動用スクリプト “/etc/init.d/nginx” を作成する。<br />
ゼロから作成するのは面倒なので、 “/etc/init.d/skeleton” を複製して編集する。（冒頭の各種定義部分の他、Start, Stop, Restart 時にメッセージを出力するようにしている）<br />
コメントは不要なら削除してもよい。（ただし、冒頭の <code class="language-plaintext highlighter-rouge">BEGIN INIT INFO</code> から <code class="language-plaintext highlighter-rouge">END INIT INFO</code> はコメントではないの削除しないこと）<br />
もしくは、「<a href="http://wiki.nginx.org/InitScriptsJa" title="InitScriptsJa">Nginx - InitScriptsJa</a>」にあるサンプルを参考にして作成してもよい。</p>

<p>File: <code class="language-plaintext highlighter-rouge">/etc/init.d/nginx</code></p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><table class="rouge-table"><tbody><tr><td class="gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
153
154
155
156
157
158
159
160
161
162
163
164
165
</pre></td><td class="code"><pre> 
<span class="c">#! /bin/sh</span>

<span class="c">### BEGIN INIT INFO</span>

<span class="c"># Provides:          nginx                         # &lt;= 編集</span>
<span class="c"># Required-Start:    $all                          # &lt;= 編集</span>
<span class="c"># Required-Stop:     $all                          # &lt;= 編集</span>
<span class="c"># Default-Start:     2 3 4 5</span>
<span class="c"># Default-Stop:      0 1 6</span>
<span class="c"># Short-Description: Start script of the Nginx.    # &lt;= 編集</span>
<span class="c"># Description:       Start/Stop the nginx daemon.  # &lt;= 編集</span>

<span class="c">### END INIT INFO</span>

<span class="c"># Author: Administrator &lt;root@mk-mode.com&gt;</span>
<span class="c">#</span>
<span class="c"># Please remove the "Author" lines above and replace them</span>
<span class="c"># with your own name if you copy and modify this script.</span>

<span class="c"># Do NOT "set -e"</span>

<span class="c"># PATH should only include /usr/* if it runs after the mountnfs.sh script</span>
<span class="nv">PATH</span><span class="o">=</span>/sbin:/usr/sbin:/bin:/usr/bin:/usr/local/sbin:/usr/local/bin  <span class="c"># &lt;= 編集</span>
<span class="nv">DESC</span><span class="o">=</span><span class="s2">"Nginx Daemon"</span>                                <span class="c"># &lt;= 編集</span>
<span class="nv">NAME</span><span class="o">=</span>nginx                                         <span class="c"># &lt;= 編集</span>
<span class="nv">DAEMON</span><span class="o">=</span>/usr/local/nginx/sbin/<span class="nv">$NAME</span>
<span class="c">#DAEMON_ARGS="--options args"                      # &lt;= コメントアウト</span>
<span class="nv">PIDFILE</span><span class="o">=</span>/var/run/<span class="nv">$NAME</span>.pid
<span class="nv">SCRIPTNAME</span><span class="o">=</span>/etc/init.d/<span class="nv">$NAME</span>

<span class="c"># Exit if the package is not installed</span>
<span class="o">[</span> <span class="nt">-x</span> <span class="s2">"</span><span class="nv">$DAEMON</span><span class="s2">"</span> <span class="o">]</span> <span class="o">||</span> <span class="nb">exit </span>0

<span class="c"># Read configuration variable file if it is present</span>
<span class="o">[</span> <span class="nt">-r</span> /etc/default/<span class="nv">$NAME</span> <span class="o">]</span> <span class="o">&amp;&amp;</span> <span class="nb">.</span> /etc/default/<span class="nv">$NAME</span>

<span class="c"># Load the VERBOSE setting and other rcS variables</span>
<span class="nb">.</span> /lib/init/vars.sh

<span class="c"># Define LSB log_* functions.</span>
<span class="c"># Depend on lsb-base (&gt;= 3.2-14) to ensure that this file is present</span>
<span class="c"># and status_of_proc is working.</span>
<span class="nb">.</span> /lib/lsb/init-functions

<span class="c">#</span>
<span class="c"># Function that starts the daemon/service</span>
<span class="c">#</span>
do_start<span class="o">()</span>
<span class="o">{</span>
        <span class="c"># Return</span>
        <span class="c">#   0 if daemon has been started</span>
        <span class="c">#   1 if daemon was already running</span>
        <span class="c">#   2 if daemon could not be started</span>
        start-stop-daemon <span class="nt">--start</span> <span class="nt">--quiet</span> <span class="nt">--pidfile</span> <span class="nv">$PIDFILE</span> <span class="nt">--exec</span> <span class="nv">$DAEMON</span> <span class="nt">--test</span> <span class="o">&gt;</span> /dev/null <span class="se">\</span>
                <span class="o">||</span> <span class="k">return </span>1
        start-stop-daemon <span class="nt">--start</span> <span class="nt">--quiet</span> <span class="nt">--pidfile</span> <span class="nv">$PIDFILE</span> <span class="nt">--exec</span> <span class="nv">$DAEMON</span> <span class="nt">--</span> <span class="se">\</span>
                <span class="nv">$DAEMON_ARGS</span> <span class="se">\</span>
                <span class="o">||</span> <span class="k">return </span>2
        <span class="c"># Add code here, if necessary, that waits for the process to be ready</span>
        <span class="c"># to handle requests from services started subsequently which depend</span>
        <span class="c"># on this one.  As a last resort, sleep for some time.</span>
<span class="o">}</span>

<span class="c">#</span>
<span class="c"># Function that stops the daemon/service</span>
<span class="c">#</span>
do_stop<span class="o">()</span>
<span class="o">{</span>
        <span class="c"># Return</span>
        <span class="c">#   0 if daemon has been stopped</span>
        <span class="c">#   1 if daemon was already stopped</span>
        <span class="c">#   2 if daemon could not be stopped</span>
        <span class="c">#   other if a failure occurred</span>
        start-stop-daemon <span class="nt">--stop</span> <span class="nt">--quiet</span> <span class="nt">--retry</span><span class="o">=</span>TERM/30/KILL/5 <span class="nt">--pidfile</span> <span class="nv">$PIDFILE</span> <span class="nt">--name</span> <span class="nv">$NAME</span>
        <span class="nv">RETVAL</span><span class="o">=</span><span class="s2">"</span><span class="nv">$?</span><span class="s2">"</span>
        <span class="o">[</span> <span class="s2">"</span><span class="nv">$RETVAL</span><span class="s2">"</span> <span class="o">=</span> 2 <span class="o">]</span> <span class="o">&amp;&amp;</span> <span class="k">return </span>2
        <span class="c"># Wait for children to finish too if this is a daemon that forks</span>
        <span class="c"># and if the daemon is only ever run from this initscript.</span>
        <span class="c"># If the above conditions are not satisfied then add some other code</span>
        <span class="c"># that waits for the process to drop all resources that could be</span>
        <span class="c"># needed by services started subsequently.  A last resort is to</span>
        <span class="c"># sleep for some time.</span>
        start-stop-daemon <span class="nt">--stop</span> <span class="nt">--quiet</span> <span class="nt">--oknodo</span> <span class="nt">--retry</span><span class="o">=</span>0/30/KILL/5 <span class="nt">--exec</span> <span class="nv">$DAEMON</span>
        <span class="o">[</span> <span class="s2">"</span><span class="nv">$?</span><span class="s2">"</span> <span class="o">=</span> 2 <span class="o">]</span> <span class="o">&amp;&amp;</span> <span class="k">return </span>2
        <span class="c"># Many daemons don't delete their pidfiles when they exit.</span>
        <span class="nb">rm</span> <span class="nt">-f</span> <span class="nv">$PIDFILE</span>
        <span class="k">return</span> <span class="s2">"</span><span class="nv">$RETVAL</span><span class="s2">"</span>
<span class="o">}</span>

<span class="c">#</span>
<span class="c"># Function that sends a SIGHUP to the daemon/service</span>
<span class="c">#</span>
do_reload<span class="o">()</span> <span class="o">{</span>
        <span class="c">#</span>
        <span class="c"># If the daemon can reload its configuration without</span>
        <span class="c"># restarting (for example, when it is sent a SIGHUP),</span>
        <span class="c"># then implement that here.</span>
        <span class="c">#</span>
        start-stop-daemon <span class="nt">--stop</span> <span class="nt">--signal</span> 1 <span class="nt">--quiet</span> <span class="nt">--pidfile</span> <span class="nv">$PIDFILE</span> <span class="nt">--name</span> <span class="nv">$NAME</span>
        <span class="k">return </span>0
<span class="o">}</span>

<span class="k">case</span> <span class="s2">"</span><span class="nv">$1</span><span class="s2">"</span> <span class="k">in
  </span>start<span class="p">)</span>
        <span class="nb">echo</span> <span class="nt">-n</span> <span class="s2">"Starting </span><span class="nv">$DESC</span><span class="s2">: </span><span class="nv">$NAME</span><span class="se">\n</span><span class="s2">"</span>  <span class="c"># &lt;= 追加</span>
        <span class="o">[</span> <span class="s2">"</span><span class="nv">$VERBOSE</span><span class="s2">"</span> <span class="o">!=</span> no <span class="o">]</span> <span class="o">&amp;&amp;</span> log_daemon_msg <span class="s2">"Starting </span><span class="nv">$DESC</span><span class="s2">"</span> <span class="s2">"</span><span class="nv">$NAME</span><span class="s2">"</span>
        do_start
        <span class="k">case</span> <span class="s2">"</span><span class="nv">$?</span><span class="s2">"</span> <span class="k">in
                </span>0|1<span class="p">)</span> <span class="o">[</span> <span class="s2">"</span><span class="nv">$VERBOSE</span><span class="s2">"</span> <span class="o">!=</span> no <span class="o">]</span> <span class="o">&amp;&amp;</span> log_end_msg 0 <span class="p">;;</span>
                2<span class="p">)</span> <span class="o">[</span> <span class="s2">"</span><span class="nv">$VERBOSE</span><span class="s2">"</span> <span class="o">!=</span> no <span class="o">]</span> <span class="o">&amp;&amp;</span> log_end_msg 1 <span class="p">;;</span>
        <span class="k">esac</span>
        <span class="p">;;</span>
  stop<span class="p">)</span>
        <span class="nb">echo</span> <span class="nt">-n</span> <span class="s2">"Stopping </span><span class="nv">$DESC</span><span class="s2">: </span><span class="nv">$NAME</span><span class="se">\n</span><span class="s2">"</span>  <span class="c"># &lt;= 追加</span>
        <span class="o">[</span> <span class="s2">"</span><span class="nv">$VERBOSE</span><span class="s2">"</span> <span class="o">!=</span> no <span class="o">]</span> <span class="o">&amp;&amp;</span> log_daemon_msg <span class="s2">"Stopping </span><span class="nv">$DESC</span><span class="s2">"</span> <span class="s2">"</span><span class="nv">$NAME</span><span class="s2">"</span>
        do_stop
        <span class="k">case</span> <span class="s2">"</span><span class="nv">$?</span><span class="s2">"</span> <span class="k">in
                </span>0|1<span class="p">)</span> <span class="o">[</span> <span class="s2">"</span><span class="nv">$VERBOSE</span><span class="s2">"</span> <span class="o">!=</span> no <span class="o">]</span> <span class="o">&amp;&amp;</span> log_end_msg 0 <span class="p">;;</span>
                2<span class="p">)</span> <span class="o">[</span> <span class="s2">"</span><span class="nv">$VERBOSE</span><span class="s2">"</span> <span class="o">!=</span> no <span class="o">]</span> <span class="o">&amp;&amp;</span> log_end_msg 1 <span class="p">;;</span>
        <span class="k">esac</span>
        <span class="p">;;</span>
  status<span class="p">)</span>
        status_of_proc <span class="s2">"</span><span class="nv">$DAEMON</span><span class="s2">"</span> <span class="s2">"</span><span class="nv">$NAME</span><span class="s2">"</span> <span class="o">&amp;&amp;</span> <span class="nb">exit </span>0 <span class="o">||</span> <span class="nb">exit</span> <span class="nv">$?</span>
        <span class="p">;;</span>
  <span class="c">#reload|force-reload)</span>
        <span class="c">#</span>
        <span class="c"># If do_reload() is not implemented then leave this commented out</span>
        <span class="c"># and leave 'force-reload' as an alias for 'restart'.</span>
        <span class="c">#</span>
        <span class="c">#log_daemon_msg "Reloading $DESC" "$NAME"</span>
        <span class="c">#do_reload</span>
        <span class="c">#log_end_msg $?</span>
        <span class="c">#;;</span>
  restart|force-reload<span class="p">)</span>
        <span class="nb">echo</span> <span class="nt">-n</span> <span class="s2">"Restarting </span><span class="nv">$DESC</span><span class="s2">: </span><span class="nv">$NAME</span><span class="se">\n</span><span class="s2">"</span>  <span class="c"># &lt;= 追加</span>
        <span class="c">#</span>
        <span class="c"># If the "reload" option is implemented then remove the</span>
        <span class="c"># 'force-reload' alias</span>
        <span class="c">#</span>
        log_daemon_msg <span class="s2">"Restarting </span><span class="nv">$DESC</span><span class="s2">"</span> <span class="s2">"</span><span class="nv">$NAME</span><span class="s2">"</span>
        do_stop
        <span class="k">case</span> <span class="s2">"</span><span class="nv">$?</span><span class="s2">"</span> <span class="k">in
          </span>0|1<span class="p">)</span>
                do_start
                <span class="k">case</span> <span class="s2">"</span><span class="nv">$?</span><span class="s2">"</span> <span class="k">in
                        </span>0<span class="p">)</span> log_end_msg 0 <span class="p">;;</span>
                        1<span class="p">)</span> log_end_msg 1 <span class="p">;;</span> <span class="c"># Old process is still running</span>
                        <span class="k">*</span><span class="p">)</span> log_end_msg 1 <span class="p">;;</span> <span class="c"># Failed to start</span>
                <span class="k">esac</span>
                <span class="p">;;</span>
          <span class="k">*</span><span class="p">)</span>
                <span class="c"># Failed to stop</span>
                log_end_msg 1
                <span class="p">;;</span>
        <span class="k">esac</span>
        <span class="p">;;</span>
  <span class="k">*</span><span class="p">)</span>
        <span class="c">#echo "Usage: $SCRIPTNAME {start|stop|restart|reload|force-reload}" &gt;&amp;2</span>
        <span class="nb">echo</span> <span class="s2">"Usage: </span><span class="nv">$SCRIPTNAME</span><span class="s2"> {start|stop|status|restart|force-reload}"</span> <span class="o">&gt;</span>&amp;2
        <span class="nb">exit </span>3
        <span class="p">;;</span>
<span class="k">esac</span>

:
</pre></td></tr></tbody></table></code></pre></figure>

<h3 id="7-実行権限付与">7. 実行権限付与</h3>

<p>作成した <code class="language-plaintext highlighter-rouge">/etc/init.d/nginx</code> に実行権限を付与する。</p>

<div class="language-text highlighter-rouge"><div class="highlight"><pre class="highlight"><code># chmod +x /etc/init.d/nginx
</code></pre></div></div>

<h3 id="8-サービス起動">8. サービス起動</h3>

<p>サービスを使って Nginx を起動してみる。</p>

<div class="language-text highlighter-rouge"><div class="highlight"><pre class="highlight"><code># /etc/init.d/nginx start
Starting nginx daemon: nginx.
</code></pre></div></div>

<p>もしくは、</p>

<div class="language-text highlighter-rouge"><div class="highlight"><pre class="highlight"><code># service nginx start
Starting nginx daemon: nginx.
</code></pre></div></div>

<h3 id="9-起動確認">9. 起動確認</h3>

<p>ブラウザで <code class="language-plaintext highlighter-rouge">http://＜サーバアドレス or ホスト名＞/</code> にアクセスしてみる。
“Welcome to nginx!” と以下５行くらい表示されば成功。</p>

<h3 id="10-自動起動設定">10. 自動起動設定</h3>

<p>マシン起動時に自動で Nginx を起動させるには以下のようにする。（<code class="language-plaintext highlighter-rouge">sysv-rc-conf</code> 導入済みの場合）</p>

<div class="language-text highlighter-rouge"><div class="highlight"><pre class="highlight"><code># sysv-rc-conf nginx on
</code></pre></div></div>

<p>もしくは、以下のようにする。</p>

<div class="language-text highlighter-rouge"><div class="highlight"><pre class="highlight"><code># insserv -d nginx
</code></pre></div></div>

<p>逆に、自動起動しないようにするには以下のようにする。（<code class="language-plaintext highlighter-rouge">sysv-rc-conf</code> 導入済みの場合）</p>

<div class="language-text highlighter-rouge"><div class="highlight"><pre class="highlight"><code># sysv-rc-conf nginx off
</code></pre></div></div>

<p>あるいは、</p>

<div class="language-text highlighter-rouge"><div class="highlight"><pre class="highlight"><code># insserv -r nginx
</code></pre></div></div>

<p>ちなみに、<code class="language-plaintext highlighter-rouge">update-rc.d</code> コマンドで設定する方法は最近は非推奨らしい。</p>

<h3 id="11-参考サイト">11. 参考サイト</h3>

<ul>
  <li><a href="http://wiki.nginx.org/Main" title="Nginx">Nginx</a></li>
  <li><a href="http://nginx.org/ja/" title="nginx">nginx</a></li>
</ul>

<hr />

<p>以上。</p>


        
      </section>

      <footer class="page__meta">
        
        
  


  
  
  

  <p class="page__taxonomy">
    <strong><i class="fas fa-fw fa-tags" aria-hidden="true"></i> Tags: </strong>
    <span itemprop="keywords">
    
      
      
      <a href="/tags/debian" class="page__taxonomy-item" rel="tag">Debian</a><span class="sep">, </span>
    
      
      
      <a href="/tags/linux" class="page__taxonomy-item" rel="tag">Linux</a><span class="sep">, </span>
    
      
      
      <a href="/tags/nginx" class="page__taxonomy-item" rel="tag">Nginx</a>
    
    </span>
  </p>




  


  
  
  

  <p class="page__taxonomy">
    <strong><i class="fas fa-fw fa-folder-open" aria-hidden="true"></i> Categories: </strong>
    <span itemprop="keywords">
    
      
      
      <a href="/categories/%E3%82%B5%E3%83%BC%E3%83%90%E6%A7%8B%E7%AF%89" class="page__taxonomy-item" rel="tag">サーバ構築</a>
    
    </span>
  </p>


        
          
          <p class="page__date"><strong><i class="fas fa-fw fa-calendar-alt" aria-hidden="true"></i> Updated:</strong> <time datetime="2013-10-28T00:20:00+09:00">2013-10-28 00:20</time></p>
        
        <br />
      </footer>
      <div id="google-ad-3"></div>
      <br />
      <br />
      <br />
      <br />

      <section class="page__share">
  

  <a href="https://twitter.com/intent/tweet?via=rsm_mzk&text=Debian+7+Wheezy+-+Web+%E3%82%B5%E3%83%BC%E3%83%90+Nginx+%E3%82%92%E3%82%A4%E3%83%B3%E3%82%B9%E3%83%88%E3%83%BC%E3%83%AB%EF%BC%88%E3%82%BD%E3%83%BC%E3%82%B9%E3%83%93%E3%83%AB%E3%83%89%EF%BC%89%EF%BC%81%20https%3A%2F%2Fkomasaru.github.io%2F2013%2F10%2F28%2Fdebian-7-install-nginx-by-src%2F" class="btn btn--twitter" onclick="window.open(this.href, 'window', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" title="Share on Twitter"><i class="fab fa-fw fa-twitter" aria-hidden="true"></i><span> Twitter</span></a>

  <a href="https://www.facebook.com/sharer/sharer.php?u=https%3A%2F%2Fkomasaru.github.io%2F2013%2F10%2F28%2Fdebian-7-install-nginx-by-src%2F" class="btn btn--facebook" onclick="window.open(this.href, 'window', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" title="Share on Facebook"><i class="fab fa-fw fa-facebook" aria-hidden="true"></i><span> Facebook</span></a>

  

  <a href="https://www.tumblr.com/share" class="btn btn--tumblr" onclick="window.open(this.href, 'window', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" title="Share on Tumblr"><i class="fab fa-fw fa-tumblr" aria-hidden="true"></i><span> Tumblr</span></a><script id="tumblr-js" async src="https://assets.tumblr.com/share-button.js"></script>

  <a href="https://www.linkedin.com/shareArticle?mini=true&url=https%3A%2F%2Fkomasaru.github.io%2F2013%2F10%2F28%2Fdebian-7-install-nginx-by-src%2F" class="btn btn--linkedin" onclick="window.open(this.href, 'window', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" title="Share on LinkedIn"><i class="fab fa-fw fa-linkedin" aria-hidden="true"></i><span> LinkedIn</span></a>
</section>


      <section>
        &nbsp;
        <h4>Sponsored Link</h4>
        <div id="rakuten-ad"></div>
        <div id="amazon-ad-1"></div>
      </section>
      &nbsp;
      
  <nav class="pagination">
    
      <a href="/2013/10/27/debian-7-anlyze-postfix-log/" class="pagination--pager" title="Debian 7 Wheezy - Postfix ログ解析！
">Previous</a>
    
    
      <a href="/2013/10/30/debian-7-install-mariadb-by-src/" class="pagination--pager" title="Debian 7 Wheezy - DB サーバ MariaDB をインストール（ソースビルド）！
">Next</a>
    
  </nav>

    </div>

    
      <div class="page__comments">
  
  
      <h4 class="page__comments-title">Comments</h4>
      <section id="disqus_thread"></section>
    
</div>

    
  </article>

  
  
    <div class="page__related">
      <div id="google-ad-4"></div>
      <h4 class="page__related-title">You May Also Enjoy</h4>
      <div class="grid__wrapper">
        
          



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
    <h3 class="archive__item-title" itemprop="headline">
      
        <a href="/2022/08/11/logistic-regression/" rel="permalink">ロジスティック回帰分析！
</a>
        &nbsp;<small>(2022-08-11)</small>
    </h3>
    
    <p class="archive__item-excerpt" itemprop="description">説明変数K個・目的変数1個のロジスティック回帰分析のアルゴリズムについて、プログラムとして実装できるようにするために自分なりに理解してまとめたものです。

ロジスティック回帰分析の実装について調べると、ほとんどが基本的な内容とライブラリを使った実装方法の説明であり、ライブラリに頼らずに自分で実装する方法について知...</p>
  </article>
</div>

        
          



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
    <h3 class="archive__item-title" itemprop="headline">
      
        <a href="/2022/08/01/blog-access/" rel="permalink">2022年7月 - OS・ブラウザ別アクセス状況！
</a>
        &nbsp;<small>(2022-08-01)</small>
    </h3>
    
    <p class="archive__item-excerpt" itemprop="description">8月になりましたので、先月7月分の当ブログアクセス状況を公開します。（※自分用の記録）

</p>
  </article>
</div>

        
          



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
    <h3 class="archive__item-title" itemprop="headline">
      
        <a href="/2022/07/13/cpp-simple-regression-curve-5d/" rel="permalink">C++ - 単回帰曲線（5次回帰モデル）の計算！
</a>
        &nbsp;<small>(2022-07-13)</small>
    </h3>
    
    <p class="archive__item-excerpt" itemprop="description">C++ で、数値からなる同サイズの配列2つを説明変数・目的変数とみなして単回帰曲線（5次回帰モデル）を計算する方法についての記録です。
今回は連立1次方程式を解くのに「ガウスの消去法（ピボット選択）」を使用します。

先日は Ruby で実装しています。。


  Ruby - Array クラス拡張で単回帰曲線...</p>
  </article>
</div>

        
          



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
    <h3 class="archive__item-title" itemprop="headline">
      
        <a href="/2022/06/22/ruby-simple-regression-curve-5d/" rel="permalink">Ruby - Array クラス拡張で単回帰曲線（5次回帰モデル）計算！
</a>
        &nbsp;<small>(2022-06-22)</small>
    </h3>
    
    <p class="archive__item-excerpt" itemprop="description">かつて、 Ruby で Array クラスを拡張して単回帰直線や単回帰曲線（2〜4次、その他）を計算してみました。
（過去記事は「こちら」で検索してください）

今回は5次の単回帰曲線を計算してみました。自作のある解析処理で必要になったため、その練習として。（連立方程式の解法にはガウスの消去法（ピボット選択）を使...</p>
  </article>
</div>

        
      </div>
      <!-- &nbsp;
      <div id="amazon-wd"></div -->
    </div>
  
  
</div>

    </div>

    
      <div class="search-content">
        <div class="search-content__inner-wrap"><form onsubmit="return googleCustomSearchExecute();" id="cse-search-box-form-id">
    <input type="text" id="cse-search-input-box-id" class="search-input" tabindex="-1" placeholder="Enter your search term..." />
    </form>
    <div id="results" class="results">
        <gcse:searchresults-only></gcse:searchresults-only>    
    </div></div>

      </div>
    

    <div class="page__footer">
      <footer>
        <!-- start custom footer snippets -->
<div id="qr"><img src="/assets/images/qr.png" alt="mk-mode BLOG"></div>
<div id="google-ad-5"></div>
<div class="page__footer-etc">
  <strong>ブログ開設日</strong> <tt>2009-01-05</tt><br />
  <strong>サーバ連続稼働時間</strong> <tt id="uptime">Loading...</tt><br />
  <strong>Page View</strong><br />
  &emsp;合計 <tt id="pv-total">Loading...</tt><br />
  &emsp;今日 <tt id="pv-today">Loading...</tt><br />
  &emsp;昨日 <tt id="pv-yesterday">Loading...</tt><br />
  <small>※<a href="/privacy.html" title="「プライバシーポリシー」ページへ">プライバシーポリシー</a></small>
</div>
<p id="page-top">
  <a href="#">
    <i class="fa fa-angle-double-up fa-2x" aria-hidden="true"></i>
  </a>
</p>
<!-- end custom footer snippets -->

        <div class="page__footer-follow">
  <ul class="social-icons">
    

    
      
        
          <li><a href="https://twitter.com/rsm_mzk" rel="nofollow noopener noreferrer"><i class="fab fa-fw fa-twitter-square" aria-hidden="true"></i> Twitter</a></li>
        
      
        
      
        
          <li><a href="https://github.com/komasaru" rel="nofollow noopener noreferrer"><i class="fab fa-fw fa-github" aria-hidden="true"></i> GitHub</a></li>
        
      
        
      
        
      
        
      
    

    <li><a href="https://www.mk-mode.com/blog/atom.xml"><i class="fas fa-fw fa-rss-square" aria-hidden="true"></i> Feed</a></li>
  </ul>
</div>

<div class="page__footer-copyright">&copy; 2022 mk-mode.com. Powered by <a href="https://jekyllrb.com" rel="nofollow">Jekyll</a> &amp; <a href="https://mademistakes.com/work/minimal-mistakes-jekyll-theme/" rel="nofollow">Minimal Mistakes</a>.</div>

      </footer>
    </div>

    
  <script defer src="/assets/js/main.min.js"></script>
  <script defer src="https://use.fontawesome.com/releases/v5.6.0/js/all.js" integrity="sha384-z9ZOvGHHo21RqN5De4rfJMoAxYpaVoiYhuJXPyVmSs8yn20IE3PmBM534CffwSJI" crossorigin="anonymous"></script>
  <script defer src="/assets/js/my_custom.js"></script>


<script>
  (function () {
    var cx = 'partner-pub-7320193476057758:6328726109';
    var gcse = document.createElement('script');
    gcse.type = 'text/javascript';
    gcse.async = true;
    gcse.src = 'https://cse.google.com/cse.js?cx=' + cx;
    var s = document.getElementsByTagName('script')[0];
    s.parentNode.insertBefore(gcse, s);
  })();

  function googleCustomSearchExecute() {
    var input = document.getElementById('cse-search-input-box-id');
    var element = google.search.cse.element.getElement('searchresults-only0');
    if (input.value == '') {
      element.clearAllResults();
    } else {
      element.execute(input.value);
    }
    return false;
  }

  
</script>




  <script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-18154748-1']);
  
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>





    
  <script>
    var disqus_config = function () {
      this.page.url = "https://komasaru.github.io/2013/10/28/debian-7-install-nginx-by-src/";  // Replace PAGE_URL with your page's canonical URL variable
      this.page.identifier = "/2013/10/28/debian-7-install-nginx-by-src"; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
    };
    (function() { // DON'T EDIT BELOW THIS LINE
      var d = document, s = d.createElement('script');
      s.src = 'https://mkmodeblog.disqus.com/embed.js';
      s.setAttribute('data-timestamp', +new Date());
      (d.head || d.body).appendChild(s);
    })();
  </script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>


  



  </body>
</html>
